(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(47)},37:function(e,t,n){},44:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(25),o=n.n(i),u=n(18),s=n(12),c=(n(37),n(31)),l=n(3),m=n(2),f=n(9),p=n(10),h=n(14),d=n(13),v=n(8),E=n(15),g=n(26),y=n.n(g),b=n(30),w=(n(41),n(27)),O=n.n(w),x={"DARK-RED":L(139,0,0),"FIRE-BRICK":L(178,34,34),"DEEP-PINK":L(255,20,147),"INDIAN-RED":L(205,92,92),"MEDIUM-VIOLET-RED":L(199,21,133),"VIOLET-RED":L(208,32,144),"LIGHT-CORAL":L(240,128,128),"HOT-PINK":L(255,105,180),"PALE-VIOLET-RED":L(219,112,147),"LIGHT-PINK":L(255,182,193),"ROSY-BROWN":L(188,143,143),"LAVENDER-BLUSH":L(255,240,245),"SADDLE-BROWN":L(139,69,19),"DARK-ORANGE":L(255,140,0),"DARK-GOLDENRON":L(184,134,11),"SANDY-BROWN":L(244,164,96),"LIGHT-SALMON":L(255,160,122),"DARK-SALMON":L(233,150,122),"NAVAJO-WHITE":L(255,222,173),"PEACH-PUFF":L(255,218,185),"DARK-KHAKI":L(189,183,107),"PALE-GOLDENROD":L(238,232,170),"BLANCHE-DIAMOND":L(255,235,205),"MEDIUM-GOLDENROD":L(234,234,173),"PAPAYA-WHIP":L(255,239,213),"MISTY-ROSE":L(255,228,225),"LEMON-CHIFFON":L(255,250,205),"ANTIQUE-WHITE":L(250,235,215),"CORN-SILK":L(255,248,220),"LIGHT-GOLDENRON-YELLOW":L(250,250,210),"OLD-LACE":L(253,245,230),"LIGHT-YELLOW":L(255,255,224),"FLORAL-WHITE":L(255,250,240),"LAWN-GREEN":L(124,252,0),"GREEN-YELLOW":L(173,255,47),"YELLOW-GREEN":L(154,205,50),"OLIVE-DRAB":L(107,142,35),"MEDIUM-FOREST-GREEN":L(107,142,35),"DARK-OLIVE-GREEN":L(85,107,47),"DARK-SEA-GREEN":L(143,188,139),"DARK-GREEN":L(0,100,0),"LIME-GREEN":L(50,205,50),"FOREST-GREEN":L(34,139,34),"SPRING-GREEN":L(0,255,127),"MEDIUM-SPRING-GREEN":L(0,250,154),"SEA-GREEN":L(46,139,87),"MEDIUM-SEA-GREEN":L(60,179,113),"LIGHT-GREEN":L(144,238,144),"PALE-GREEN":L(152,251,152),"MEDIUM-AQUAMARINE":L(102,205,170),"LIGHT-SEA-GREEN":L(32,178,170),"MEDIUM-TURQUOISE":L(72,209,204),"MINT-CREAM":L(245,255,250),"ROYAL-BLUE":L(65,105,225),"DODGER-BLUE":L(30,144,255),"DEEP-SKY-BLUE":L(0,191,255),"CORNFLOWER-BLUE":L(100,149,237),"STEEL-BLUE":L(70,130,180),"LIGHT-SKY-BLUE":L(135,206,250),"DARK-TURQUOISE":L(0,206,209),DARKTURQUOISE:L(0,206,209),"SKY-BLUE":L(135,206,235),SKYBLUE:L(135,206,235),"CADET-BLUE":L(96,160,160),"DARK-SLATE-GRAY":L(47,79,79),"LIGHT-STEEL-BLUE":L(176,196,222),"LIGHT-BLUE":L(173,216,230),"POWDER-BLUE":L(176,224,230),"PALE-TURQUOISE":L(175,238,238),"LIGHT-CYAN":L(224,255,255),"ALICE-BLUE":L(240,248,255),"MEDIUM-BLUE":L(0,0,205),"DARK-BLUE":L(0,0,139),"MIDNIGHT-BLUE":L(25,25,112),"BLUE-VIOLET":L(138,43,226),"MEDIUM-SLATE-BLUE":L(123,104,238),"SLATE-BLUE":L(106,90,205),"DARK-SLATE-BLUE":L(72,61,139),"DARK-VIOLET":L(148,0,211),"DARK-ORCHID":L(153,50,204),"MEDIUM-PURPLE":L(147,112,219),"MEDIUM-ORCHID":L(186,85,211),"DARK-MAGENTA":L(139,0,139),"GHOST-WHITE":L(248,248,255),"WHITE-SMOKE":L(245,245,245),"LIGHT-GRAY":L(211,211,211),"DARK-GRAY":L(169,169,169),"DIM-GRAY":L(105,105,105),ORANGE:L(255,165,0),ORANGERED:L(255,69,0),TOMATO:L(255,99,71),DARKRED:L(139,0,0),RED:L(255,0,0),FIREBRICK:L(178,34,34),CRIMSON:L(220,20,60),DEEPPINK:L(255,20,147),MAROON:L(176,48,96),"INDIAN RED":L(205,92,92),INDIANRED:L(205,92,92),"MEDIUM VIOLET RED":L(199,21,133),MEDIUMVIOLETRED:L(199,21,133),"VIOLET RED":L(208,32,144),VIOLETRED:L(208,32,144),LIGHTCORAL:L(240,128,128),HOTPINK:L(255,105,180),PALEVIOLETRED:L(219,112,147),LIGHTPINK:L(255,182,193),ROSYBROWN:L(188,143,143),PINK:L(255,192,203),ORCHID:L(218,112,214),LAVENDERBLUSH:L(255,240,245),SNOW:L(255,250,250),CHOCOLATE:L(210,105,30),SADDLEBROWN:L(139,69,19),BROWN:L(132,60,36),DARKORANGE:L(255,140,0),CORAL:L(255,127,80),SIENNA:L(160,82,45),SALMON:L(250,128,114),PERU:L(205,133,63),DARKGOLDENROD:L(184,134,11),GOLDENROD:L(218,165,32),SANDYBROWN:L(244,164,96),LIGHTSALMON:L(255,160,122),DARKSALMON:L(233,150,122),GOLD:L(255,215,0),YELLOW:L(255,255,0),OLIVE:L(128,128,0),BURLYWOOD:L(222,184,135),TAN:L(210,180,140),NAVAJOWHITE:L(255,222,173),PEACHPUFF:L(255,218,185),KHAKI:L(240,230,140),DARKKHAKI:L(189,183,107),MOCCASIN:L(255,228,181),WHEAT:L(245,222,179),BISQUE:L(255,228,196),PALEGOLDENROD:L(238,232,170),BLANCHEDALMOND:L(255,235,205),"MEDIUM GOLDENROD":L(234,234,173),MEDIUMGOLDENROD:L(234,234,173),PAPAYAWHIP:L(255,239,213),MISTYROSE:L(255,228,225),LEMONCHIFFON:L(255,250,205),ANTIQUEWHITE:L(250,235,215),CORNSILK:L(255,248,220),LIGHTGOLDENRODYELLOW:L(250,250,210),OLDLACE:L(253,245,230),LINEN:L(250,240,230),LIGHTYELLOW:L(255,255,224),SEASHELL:L(255,245,238),BEIGE:L(245,245,220),FLORALWHITE:L(255,250,240),IVORY:L(255,255,240),GREEN:L(0,255,0),LAWNGREEN:L(124,252,0),CHARTREUSE:L(127,255,0),"GREEN YELLOW":L(173,255,47),GREENYELLOW:L(173,255,47),"YELLOW GREEN":L(154,205,50),YELLOWGREEN:L(154,205,50),"MEDIUM FOREST GREEN":L(107,142,35),OLIVEDRAB:L(107,142,35),MEDIUMFORESTGREEN:L(107,142,35),"DARK OLIVE GREEN":L(85,107,47),DARKOLIVEGREEN:L(85,107,47),DARKSEAGREEN:L(143,188,139),LIME:L(0,255,0),"DARK GREEN":L(0,100,0),DARKGREEN:L(0,100,0),"LIME GREEN":L(50,205,50),LIMEGREEN:L(50,205,50),"FOREST GREEN":L(34,139,34),FORESTGREEN:L(34,139,34),"SPRING GREEN":L(0,255,127),SPRINGGREEN:L(0,255,127),"MEDIUM SPRING GREEN":L(0,250,154),MEDIUMSPRINGGREEN:L(0,250,154),"SEA GREEN":L(46,139,87),SEAGREEN:L(46,139,87),"MEDIUM SEA GREEN":L(60,179,113),MEDIUMSEAGREEN:L(60,179,113),AQUAMARINE:L(112,216,144),LIGHTGREEN:L(144,238,144),"PALE GREEN":L(152,251,152),PALEGREEN:L(152,251,152),"MEDIUM AQUAMARINE":L(102,205,170),MEDIUMAQUAMARINE:L(102,205,170),TURQUOISE:L(64,224,208),LIGHTSEAGREEN:L(32,178,170),"MEDIUM TURQUOISE":L(72,209,204),MEDIUMTURQUOISE:L(72,209,204),HONEYDEW:L(240,255,240),MINTCREAM:L(245,255,250),ROYALBLUE:L(65,105,225),DODGERBLUE:L(30,144,255),DEEPSKYBLUE:L(0,191,255),CORNFLOWERBLUE:L(100,149,237),"STEEL BLUE":L(70,130,180),STEELBLUE:L(70,130,180),LIGHTSKYBLUE:L(135,206,250),"DARK TURQUOISE":L(0,206,209),CYAN:L(0,255,255),AQUA:L(0,255,255),DARKCYAN:L(0,139,139),TEAL:L(0,128,128),"SKY BLUE":L(135,206,235),"CADET BLUE":L(96,160,160),CADETBLUE:L(95,158,160),"DARK SLATE GRAY":L(47,79,79),DARKSLATEGRAY:L(47,79,79),LIGHTSLATEGRAY:L(119,136,153),SLATEGRAY:L(112,128,144),"LIGHT STEEL BLUE":L(176,196,222),LIGHTSTEELBLUE:L(176,196,222),"LIGHT BLUE":L(173,216,230),LIGHTBLUE:L(173,216,230),POWDERBLUE:L(176,224,230),PALETURQUOISE:L(175,238,238),LIGHTCYAN:L(224,255,255),ALICEBLUE:L(240,248,255),AZURE:L(240,255,255),"MEDIUM BLUE":L(0,0,205),MEDIUMBLUE:L(0,0,205),DARKBLUE:L(0,0,139),"MIDNIGHT BLUE":L(25,25,112),MIDNIGHTBLUE:L(25,25,112),NAVY:L(36,36,140),BLUE:L(0,0,255),INDIGO:L(75,0,130),"BLUE VIOLET":L(138,43,226),BLUEVIOLET:L(138,43,226),"MEDIUM SLATE BLUE":L(123,104,238),MEDIUMSLATEBLUE:L(123,104,238),"SLATE BLUE":L(106,90,205),SLATEBLUE:L(106,90,205),PURPLE:L(160,32,240),"DARK SLATE BLUE":L(72,61,139),DARKSLATEBLUE:L(72,61,139),DARKVIOLET:L(148,0,211),"DARK ORCHID":L(153,50,204),DARKORCHID:L(153,50,204),MEDIUMPURPLE:L(147,112,219),"CORNFLOWER BLUE":L(68,64,108),"MEDIUM ORCHID":L(186,85,211),MEDIUMORCHID:L(186,85,211),MAGENTA:L(255,0,255),FUCHSIA:L(255,0,255),DARKMAGENTA:L(139,0,139),VIOLET:L(238,130,238),PLUM:L(221,160,221),LAVENDER:L(230,230,250),THISTLE:L(216,191,216),GHOSTWHITE:L(248,248,255),WHITE:L(255,255,255),WHITESMOKE:L(245,245,245),GAINSBORO:L(220,220,220),"LIGHT GRAY":L(211,211,211),LIGHTGRAY:L(211,211,211),SILVER:L(192,192,192),GRAY:L(190,190,190),"DARK GRAY":L(169,169,169),DARKGRAY:L(169,169,169),"DIM GRAY":L(105,105,105),DIMGRAY:L(105,105,105),BLACK:L(0,0,0),TRANSPARENT:L(0,0,0,0)};function L(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;if(e<0||e>255||t<0||t>255||n<0||n>255||r<0||r>255)throw new Error("r g b a values must be between 0 and 255 (inclusive)");return{r:e,g:t,b:n,a:r}}function I(e,t){return L(e.r,e.g,e.b,t)}function R(e){if(e<0)throw new Error("shape dimensions must be non-negative");return e}function N(e){if("string"===typeof e){var t=x[e.replace(" ","").toUpperCase()];if(void 0===t)throw new Error("".concat(e," is not a valid color"));return t}return e}function A(e){if("solid"!==e&&"outline"!==e)throw new Error("".concat(e," is not a valid mode"));return e}function D(e){if("middle"===e)return"center";if("left"!==e&&"right"!==e&&"center"!==e)throw new Error("".concat(e," is not a valid x-place"));return e}function C(e){if("middle"===e)return"center";if("top"!==e&&"bottom"!==e&&"center"!==e)throw new Error("".concat(e," is not a valid y-place"));return e}function j(e,t,n,r){return"string"===typeof n?{width:R(e),height:R(t),mode:A(n),color:N(r),type:"rect"}:{width:R(e),height:R(t),mode:"solid",color:I(N(r),n),type:"rect"}}function S(e,t,n){return function(e,t,n,r,a){return"string"===typeof r?{A:R(e),B:R(t),C:R(n),mode:A(r),color:N(a),type:"triangle"}:{A:R(e),B:R(t),C:R(n),mode:"solid",color:I(N(a),r),type:"triangle"}}(e,e,e,t,n)}function k(e){return{images:e,yplace:C(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center"),type:"beside"}}function T(e){return{images:e,xplace:D(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center"),type:"above"}}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center";return{images:e,xplace:D(t),yplace:C(n),type:"overlay"}}function M(e,t,n,r){return{image:e,x:t,y:n,scene:r,type:"place"}}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"white";return z([j(e,t,"outline","black"),j(e,t,"solid",n)])}function G(e){switch(e.type){case"circle":return 2*e.r;case"rect":return e.width;case"triangle":return e.A;case"polygon":return e.coordinates.map(function(e){return e.x}).reduce(function(e,t){return Math.max(e,t)});case"beside":return e.images.reduce(function(e,t){return e+G(t)},0);case"above":case"overlay":return e.images.reduce(function(e,t){return Math.max(e,G(t))},0);case"place":return G(e.scene);default:return new Error("Unknown Image Type: ".concat(e.type))}}function B(e){switch(e.type){case"circle":return 2*e.r;case"rect":return e.height;case"triangle":var t=(e.A+e.B+e.C)/2,n=Math.sqrt(t*(t-e.A)*(t-e.B)*(t-e.C));return Math.round(2*n/e.A);case"polygon":return e.coordinates.map(function(e){return e.y}).reduce(function(e,t){return Math.max(e,t)});case"beside":return e.images.reduce(function(e,t){return Math.max(e,B(t))},0);case"above":return e.images.reduce(function(e,t){return e+B(t)},0);case"overlay":return e.images.reduce(function(e,t){return Math.max(e,B(t))},0);case"place":return B(e.scene);default:return new Error("Unknown Image Type: ".concat(e.type))}}function H(e,t,n){switch(e.type){case"circle":return function(e,t,n){var r=e.color.r,i=e.color.g,o=e.color.b,u=e.color.a/255;switch(e.mode){case"solid":return a.a.createElement("circle",{cx:t+e.r,cy:n+e.r,r:e.r,fill:"rgba(".concat(r,", ").concat(i,", ").concat(o,", ").concat(u,")")});case"outline":return a.a.createElement("circle",{cx:t+e.r,cy:n+e.r,r:e.r-.5,fill:"none",stroke:"rgba(".concat(r,", ").concat(i,", ").concat(o,", ").concat(u,")"),strokeWidth:1});default:throw new Error("Unknown Image Mode: ".concat(e.mode))}}(e,t,n);case"rect":return function(e,t,n){var r=e.color.r,i=e.color.g,o=e.color.b,u=e.color.a/255;switch(e.mode){case"solid":return a.a.createElement("rect",{x:t,y:n,width:e.width,height:e.height,fill:"rgba(".concat(r,", ").concat(i,", ").concat(o,", ").concat(u,")")});case"outline":return a.a.createElement("rect",{x:t+.5,y:n+.5,width:e.width-1,height:e.height-1,fill:"none",stroke:"rgba(".concat(r,", ").concat(i,", ").concat(o,", ").concat(u,")"),strokeWidth:1});default:throw new Error("Unknown Image Mode: ".concat(e.mode))}}(e,t,n);case"triangle":return function(e,t,n){var r=e.color.r,i=e.color.g,o=e.color.b,u=e.color.a/255,s=Math.round(Math.sqrt(Math.pow(e.B,2)-Math.pow(B(e),2))),c={x:t,y:n+B(e)},l={x:t+s,y:n},m={x:t+G(e),y:n+B(e)};switch(e.mode){case"solid":return a.a.createElement("polygon",{points:"".concat(c.x,",").concat(c.y," ").concat(l.x,",").concat(l.y," ").concat(m.x,",").concat(m.y),fill:"rgba(".concat(r,", ").concat(i,", ").concat(o,", ").concat(u,")")});case"outline":return a.a.createElement("polygon",{points:"".concat(c.x,",").concat(c.y," ").concat(l.x,",").concat(l.y," ").concat(m.x,",").concat(m.y),fill:"none",stroke:"rgba(".concat(r,", ").concat(i,", ").concat(o,", ").concat(u,")"),strokeWidth:1});default:throw new Error("Unknown Image Mode: ".concat(e.mode))}}(e,t,n);case"polygon":return function(e,t,n){var r=e.color.r,i=e.color.g,o=e.color.b,u=e.color.a/255,s=e.coordinates.map(function(e){return"".concat(e.x+t,",").concat(e.y+n)}).reduce(function(e,t){return e+" "+t});switch(e.mode){case"solid":return a.a.createElement("polygon",{points:s,fill:"rgba(".concat(r,", ").concat(i,", ").concat(o,", ").concat(u,")")});case"outline":return a.a.createElement("polygon",{points:s,fill:"none",stroke:"rgba(".concat(r,", ").concat(i,", ").concat(o,", ").concat(u,")"),strokeWidth:1});default:throw new Error("Unknown Image Mode: ".concat(e.mode))}}(e,t,n);case"beside":return function(e,t,n){var r=n,a=function(e,t){return e};switch(e.yplace){case"top":break;case"center":r=n+B(e)/2,a=function(e,t){return e-t/2};break;case"bottom":r=n+B(e),a=function(e,t){return e-t};break;default:throw new Error("Unknown y-place: ".concat(e.yplace))}return K(function(e,t){return e},a,function(e,t){return e+t},function(e,t){return e})(e.images,t,r)}(e,t,n);case"above":return function(e,t,n){var r=t,a=function(e,t){return e};switch(e.xplace){case"left":break;case"center":r=t+G(e)/2,a=function(e,t){return e-t/2};break;case"right":r=t+G(e),a=function(e,t){return e-t};break;default:throw new Error("Unknown x-place: ".concat(e.xplace))}return K(a,function(e,t){return e},function(e,t){return e},function(e,t){return e+t})(e.images,r,n)}(e,t,n);case"overlay":return function(e,t,n){var r=t,a=n,i=function(e,t){return e},o=function(e,t){return e};switch(e.xplace){case"left":break;case"center":r=t+G(e)/2,i=function(e,t){return e-t/2};break;case"right":r=t+G(e),i=function(e,t){return e-t};break;default:throw new Error("Unknown x-place: ".concat(e.xplace))}switch(e.yplace){case"top":break;case"center":a=n+B(e)/2,o=function(e,t){return e-t/2};break;case"bottom":a=n+B(e),o=function(e,t){return e-t};break;default:throw new Error("Unknown y-place: ".concat(e.yplace))}return K(i,o,function(e,t){return e},function(e,t){return e})(e.images,r,a)}(e,t,n);case"place":return function(e,t,n){return[H(e.scene,t,n),H(e.image,t+e.x-G(e.image)/2,n+e.y-B(e.image)/2)]}(e,t,n);default:throw new Error("Unknown Image Type: ".concat(e.type))}}function K(e,t,n,r){return function a(i,o,u){if(0===i.length)throw new Error("I need at least 1 image to render!");var s=G(i[0]),c=B(i[0]),l=H(i[0],e(o,s),t(u,c));if(1===i.length)return[l];var f=a(i.slice(1),n(o,s),r(u,c));return[].concat(Object(m.a)(f),[l])}}function V(e){var t=H(e,0,0);return a.a.createElement("svg",{viewBox:"0 0 ".concat(G(e)," ").concat(B(e)),xmlns:"http://www.w3.org/2000/svg",width:G(e),height:B(e),key:Math.round(1e8*Math.random())},t)}var P=0,W=1,Y=2,F=3,_=4,Q=5,$=6,q=7,J=8,X=9,Z=10,ee=11,te=12,ne=/^[^\s",'`()[\]{}|;#]+/,re=/^\(/,ae=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?=$|[\s",'`()[\]{}|;#])/,ie=/^#(?:[tfTF]|true|false)(?=$|[\s",'`()[\]{}|;#])/,oe=/^"[^\\"]*"/,ue=/^'/,se=/^[^\s",'`()[\]{}|;#]+/,ce=/^\(/,le=ye("posn",["x","y"],[{name:"+",binding:{type:Y,value:function(e){if(e.length<2)throw new Error("arity mismatch");return e.forEach(function(e){return ge(e,[F])}),e.reduce(function(e,t){return{value:e.value+t.value,type:F}})}}},{name:"add1",binding:{type:Y,value:function(e){if(1!==e.length)throw new Error("arity mismatch");return ge(e[0],[F]),{value:e[0].value+1,type:F}}}},{name:"-",binding:{type:Y,value:function(e){if(e.length<1)throw new Error("arity mismatch");if(e.forEach(function(e){return ge(e,[F])}),1===e.length)return{value:0-e[0].value,type:F};return e.reduce(function(e,t){return{value:e.value-t.value,type:F}})}}},{name:"sub1",binding:{type:Y,value:function(e){if(1!==e.length)throw new Error("arity mismatch");return ge(e[0],[F]),{value:e[0].value-1,type:F}}}},{name:"*",binding:{type:Y,value:function(e){if(e.length<2)throw new Error("arity mismatch");return e.forEach(function(e){return ge(e,[F])}),e.reduce(function(e,t){return{value:e.value*t.value,type:F}})}}},{name:"/",binding:{type:Y,value:function(e){if(e.forEach(function(e){return ge(e,[F])}),1===e.length){var t=e[0];return ge(t,[F]),{value:1/t.value,type:F}}if(2===e.length){var n=e[0],r=e[1];return ge(n,[F]),ge(r,[F]),{value:n.value/r.value,type:F}}return{value:!1,type:_}}}},{name:"car",binding:{type:Y,value:we}},{name:"first",binding:{type:Y,value:we}},{name:"cdr",binding:{type:Y,value:Oe}},{name:"rest",binding:{type:Y,value:Oe}},{name:"cons",binding:{type:Y,value:function(e){if(2!==e.length)throw new Error("arity mismatch");var t=e[0],n=e[1];return ge(n,[$]),{value:{a:t,d:n},type:$}}}},{name:"list",binding:{type:Y,value:function(e){return e.reverse().reduce(function(e,t){return{value:{a:t,d:e},type:$}},{value:null,type:$})}}},{name:"not",binding:{type:Y,value:function(e){if(1!==e.length)throw new Error("arity mismatch");return{value:!1===e[0].value,type:_}}}},{name:"and",binding:{type:Y,value:function(e){return e.reduce(function(e,t){return!1!==e.value?t:{value:!1,type:_}},{value:!0,type:_})}}},{name:"or",binding:{type:Y,value:function(e){return e.reduce(function(e,t){return!1!==e.value?e:t},{value:!0,type:_})}}},{name:"eqv?",binding:{type:Y,value:function(e){if(2!==e.length)throw new Error("arity mismatch");var t=e[0],n=e[1];return{value:t.value===n.value,type:_}}}},{name:"null?",binding:{type:Y,value:xe}},{name:"empty?",binding:{type:Y,value:xe}},{name:"cons?",binding:{type:Y,value:function(e){if(1!==e.length)throw new Error("arity mismatch");var t=e[0];return{value:null!==t.value&&t.type===$,type:_}}}},{name:"=",binding:{type:Y,value:function(e){e.forEach(function(e){return ge(e,[F])});var t=e.reduce(function(e,t){return!1===e.value?{value:!1,type:_}:e.value===t.value?e:{value:!1,type:_}});return!1===t.value?t:{value:!0,type:_}}}},{name:">",binding:{type:Y,value:function(e){e.forEach(function(e){return ge(e,[F])});var t=e.reduce(function(e,t){return!1===e.value?{value:!1,type:_}:e.value>t.value?e:{value:!1,type:_}});return!1===t.value?t:{value:!0,type:_}}}},{name:">=",binding:{type:Y,value:function(e){e.forEach(function(e){return ge(e,[F])});var t=e.reduce(function(e,t){return!1===e.value?{value:!1,type:_}:e.value>=t.value?e:{value:!1,type:_}});return!1===t.value?t:{value:!0,type:_}}}},{name:"<",binding:{type:Y,value:function(e){e.forEach(function(e){return ge(e,[F])});var t=e.reduce(function(e,t){return!1===e.value?{value:!1,type:_}:e.value<t.value?e:{value:!1,type:_}});return!1===t.value?t:{value:!0,type:_}}}},{name:"<=",binding:{type:Y,value:function(e){e.forEach(function(e){return ge(e,[F])});var t=e.reduce(function(e,t){return!1===e.value?{value:!1,type:_}:e.value<=t.value?e:{value:!1,type:_}});return!1===t.value?t:{value:!0,type:_}}}},{name:"string-length",binding:{type:Y,value:function(e){if(1!==e.length)throw new Error("arity mismatch");var t=e[0];return ge(t,[Q]),{value:t.value.length,type:F}}}},{name:"string-append",binding:{type:Y,value:function(e){if(e.length<2)throw new Error("arity mismatch");return e.forEach(function(e){return ge(e,[Q])}),e.reduce(function(e,t){return{value:e.value+t.value,type:Q}})}}},{name:"string=?",binding:{type:Y,value:function(e){e.forEach(function(e){return ge(e,[Q])});var t=e.map(function(e){return e.value}).reduce(function(e,t){return!1!==e&&(e===t&&e)});return!1!==t?{value:!0,type:_}:{value:t,type:_}}}},{name:"circle",binding:{type:Y,value:function(e){if(e.length<3)throw new Error("arity mismatch");var t=e[0],n=e[1],r=e[2];return ge(t,[F]),ge(n,[F,Q,q]),ge(r,[Q,q,X]),{value:(a=t.value,i=n.value,o=r.value,"string"===typeof i?{r:R(a),mode:A(i),color:N(o),type:"circle"}:{r:R(a),mode:"solid",color:I(N(o),i),type:"circle"}),type:J};var a,i,o}}},{name:"rectangle",binding:{type:Y,value:function(e){if(e.length<4)throw new Error("arity mismatch");var t=e[0],n=e[1],r=e[2],a=e[3];return ge(t,[F]),ge(n,[F]),ge(r,[F,Q,q]),ge(a,[Q,q,X]),{value:j(t.value,n.value,r.value,a.value),type:J}}}},{name:"square",binding:{type:Y,value:function(e){if(e.length<3)throw new Error("arity mismatch");var t=e[0],n=e[1],r=e[2];return ge(t,[F]),ge(n,[F,Q,q]),ge(r,[Q,q,X]),{value:j(t.value,t.value,n.value,r.value),type:J}}}},{name:"triangle",binding:{type:Y,value:function(e){if(e.length<3)throw new Error("arity mismatch");var t=e[0],n=e[1],r=e[2];return ge(t,[F]),ge(n,[F,Q,q]),ge(r,[Q,q,X]),{value:S(t.value,n.value,r.value),type:J}}}},{name:"beside",binding:{type:Y,value:function(e){if(e.length<2)throw new Error("arity mismatch");return e.forEach(function(e){return ge(e,[J])}),{value:k(e.map(function(e){return e.value})),type:J}}}},{name:"beside/align",binding:{type:Y,value:function(e){if(e.length<3)throw new Error("arity mismatch");var t=e[0],n=e.slice(1);return ge(t,[Q,q]),n.forEach(function(e){return ge(e,[J])}),{value:k(n.map(function(e){return e.value}),t.value),type:J}}}},{name:"above",binding:{type:Y,value:function(e){if(e.length<2)throw new Error("arity mismatch");return e.forEach(function(e){return ge(e,[J])}),{value:T(e.map(function(e){return e.value})),type:J}}}},{name:"above/align",binding:{type:Y,value:function(e){if(e.length<3)throw new Error("arity mismatch");var t=e[0],n=e.slice(1);return ge(t,[Q,q]),n.forEach(function(e){return ge(e,[J])}),{value:T(n.map(function(e){return e.value}),t.value),type:J}}}},{name:"overlay",binding:{type:Y,value:function(e){if(e.length<2)throw new Error("arity mismatch");return e.forEach(function(e){return ge(e,[J])}),{value:z(e.map(function(e){return e.value})),type:J}}}},{name:"overlay/align",binding:{type:Y,value:function(e){if(e.length<4)throw new Error("arity mismatch");var t=e[0],n=e[1],r=e.slice(2);return ge(t,[Q,q]),ge(n,[Q,q]),r.forEach(function(e){return ge(e,[J])}),{value:z(r.map(function(e){return e.value}),t.value,n.value),type:J}}}},{name:"place-image",binding:{type:Y,value:function(e){if(e.length<4)throw new Error("arity mismatch");var t=e[0],n=e[1],r=e[2],a=e[3];return ge(t,[J]),ge(n,[F]),ge(r,[F]),ge(a,[J]),{value:M(t.value,n.value,r.value,a.value),type:J}}}},{name:"empty-scene",binding:{type:Y,value:function(e){if(e.length<2)throw new Error("arity mismatch");var t,n=e[0],r=e[1],a=e[2];ge(n,[F]),ge(r,[F]),void 0!==a?(ge(a,[X,Q,q]),t=U(n.value,r.value,a.value)):t=U(n.value,r.value);return{value:t,type:J}}}},{name:"color",binding:{type:Y,value:function(e){if(e.length<3)throw new Error("arity mismatch");var t,n=e[0],r=e[1],a=e[2],i=e[3];ge(n,[F]),ge(r,[F]),ge(a,[F]),void 0!==i?(ge(i,[F]),t=L(n.value,r.value,a.value,i.value)):t=L(n.value,r.value,a.value);return{value:t,type:X}}}},{name:"true",binding:{type:_,value:!0}},{name:"false",binding:{type:_,value:!1}},{name:"null",binding:{type:$,value:null}},{name:"empty",binding:{type:$,value:null}}]);function me(e){if(ae.test(e)){var t=e.match(ae)[0],n=e.slice(t.length).trim();return{prog:{value:+t,type:F},rest:n}}if(ne.test(e)){var r=e.match(ne)[0],a=e.slice(r.length).trim();return{prog:{value:r,type:P},rest:a}}if(ie.test(e)){var i=e.match(ie)[0],o=e.slice(i.length).trim();return{prog:{value:"t"===i[1].toLowerCase(),type:_},rest:o}}if(oe.test(e)){var u=e.match(oe);return{prog:{value:u[0].substring(1,u[0].length-1),type:Q},rest:e.slice(u[0].length).trim()}}if(re.test(e)){var s=me(e=e.slice(1).trim()),c=s.prog;e=s.rest;for(var l,f=[];")"!==e[0];){var p=me(e);f=[].concat(Object(m.a)(f),[p.prog]),e=p.rest}if("or"===c.value){if(2!==f.length)throw f.length,new SyntaxError('Invalid Syntax: "'+e+'"');l={value:{tst:f[0],els:f[1],thn:{value:!0,type:_}},type:Z}}else if("and"===c.value){if(2!==f.length)throw f.length,new SyntaxError('Invalid Syntax: "'+e+'"');l={value:{tst:f[0],thn:f[1],els:{value:!1,type:_}},type:Z}}else if("if"===c.value){if(3!==f.length)throw new SyntaxError('Invalid Syntax: "'+e+'"');l={value:{tst:f[0],thn:f[1],els:f[2]},type:Z}}else l={value:{funct:c,args:f},type:W};return{prog:l,rest:e.slice(1).trim()}}if(ue.test(e))return function e(t){if(ce.test(t)){t=t.slice(1).trim();for(var n=[];")"!==t[0];){var r=e(t);n=[r.prog].concat(Object(m.a)(n)),t=r.rest}var a=t.slice(1).trim(),i=n.reduce(function(e,t){return{value:{a:t,d:e},type:$}},{value:null,type:$});return{prog:i,rest:a}}if(ae.test(t)){var o=t.match(ae),u=o[0],s=t.slice(u.length).trim(),c={value:+u,type:F};return{prog:c,rest:s}}if(ie.test(t)){var l=t.match(ie),f=l[0],p=t.slice(f.length).trim(),h={value:"t"===f.charAt(1).toLowerCase(),type:_};return{prog:h,rest:p}}if(oe.test(t)){var d=t.match(oe),v=d[0].substring(1,d[0].length-1),E={value:v,type:Q},g=t.slice(d[0].length).trim();return{prog:E,rest:g}}if(se.test(t)){var y=t.match(se),b=y[0],w={value:b,type:q},O=t.slice(y[0].length).trim();return{prog:w,rest:O}}throw new SyntaxError('Invalid Syntax: "'+t+'"')}(e.slice(1).trim());throw new SyntaxError('Invalid Syntax: "'+e+'"')}function fe(e){var t=/^\(\s*define-struct(?=$|[\s",'`()[\]{}|;#])/,n=/^\(\s*define(?=$|[\s",'`()[\]{}|;#])/,r=/^(?!-?(?:\d+(?:\.\d*)?|\.\d+)(?=$|[\s",'`()[\]{}|;#]))[^\s",'`()[\]{}|;#]+/;e=(e=e.replace(/;.*/g,"")).trim();for(var a=[];""!==e;){var i=o(e);e=i.rest,a=[].concat(Object(m.a)(a),[i.prog])}return a;function o(e){if(t.test(e)){var a=/[([]/;if(e=e.slice(e.match(t)[0].length).trim(),!r.test(e))throw new Error("Invalid Struct Name");var i=e.match(r)[0];if(e=e.slice(i.length).trim(),!a.test(e))throw new Error("Invalid Struct Definition");var o,u=e.match(a)[0];e=e.slice(u.length).trim(),"("===u?o=")":"["===u&&(o="]");for(var s=[];e[0]!==o;){if(!r.test(e))throw new Error("Invalid Field Name");var c=e.match(r)[0];e=(e=e.slice(c.length)).trim(),s=[].concat(Object(m.a)(s),[c])}if(")"!==(e=e.slice(1).trim())[0])throw new Error("Invalid Struct Definition");return{prog:{superID:i,fieldIDs:s,type:"struct"},rest:e=e.slice(1).trim()}}if(n.test(e)){var l,f,p=/^\(/;if(e=e.slice(e.match(n)[0].length).trim(),r.test(e)){l=e.match(r)[0];var h=me(e=e.slice(l.length).trim());f=h.prog,e=h.rest.trim()}else{if(!p.test(e))throw new Error("Invalid Prefix Form: ".concat(e));if(e=e.slice(e.match(p)[0].length).trim(),!r.test(e))throw new Error("Invalid Prefix Form: ".concat(e));l=e.match(r)[0],e=e.slice(l.length).trim();for(var d=[];")"!==e[0];){if(!r.test(e))throw new Error("Invalid Prefix Form: ".concat(e));var v=e.match(r)[0];e=e.slice(v.length).trim(),d=[].concat(Object(m.a)(d),[v])}var E=me(e=e.slice(1).trim()),g=E.prog;e=(e=E.rest).trim(),f={value:{parameters:d,body:g},type:te}}if(")"!==e[0])throw new Error("Invalid Prefix Form: ".concat(e));return{prog:{name:l,binding:f,type:"define"},rest:e=e.slice(1).trim()}}throw new Error("Invalid Prefix Form: ".concat(e))}}function pe(e,t){switch(e.type){case F:case _:case Q:case $:case q:return e;case P:return function(e){var n=t.reduce(function(t,n){return void 0!==t?t:n.name===e?n.binding:void 0},void 0);if(void 0===n)throw new ReferenceError(e+" isn't defined");return n}(e.value);case Y:return e;case te:return{value:{parameters:e.value.parameters,body:e.value.body,env:t},type:te};case Z:var n=pe(e.value.tst,t);return ge(n,[_]),n.value?pe(e.value.thn,t):pe(e.value.els,t);case W:var r="anonymous";(function(e){return e.type===P})(e.value.funct)&&(r=e.value.funct.value);var a=pe(e.value.funct,t),i=e.value.args.map(function(e){return pe(e,t)});switch(a.type){case Y:return a.value(i);case te:if(i.length!==a.value.parameters.length)throw new Error("Arity Mismatch: ".concat(r," expects ").concat(a.value.parameters.length," arguments but got ").concat(i.length));var o=[].concat(Object(m.a)(a.value.env),Object(m.a)(a.value.parameters.map(function(e,t){return{name:e,binding:i[t]}})));return pe(a.value.body,o);default:ge(a,[Y])}break;case J:case X:return e;default:throw new TypeError("Unknown Type "+e.value)}}function he(e,t){return e.reduce(function(e,t){switch(t.type){case"struct":return ye(t.superID,t.fieldIDs,e);case"define":return function(e,t,n){switch(t.type){case te:var r={name:e,binding:pe(t,n)};return[].concat(Object(m.a)(n),[r]);default:var a={name:e,binding:pe(t,n)};return[].concat(Object(m.a)(n),[a])}}(t.name,t.binding,e);default:throw new Error("Invalid Prefix Prog")}},t)}function de(e){switch(e.type){case F:return[e.value];case _:return["#"+e.value];case Q:return['"'.concat(e.value,'"')];case $:return null===e.value?["'()"]:["(cons "].concat(Object(m.a)(de(e.value.a)),[" "],Object(m.a)(de(e.value.d)),[")"]);case q:return["'"+e.value];case P:return[e.value];case Y:return["#<procedure>"];case te:return["#<user_defined_procedure>"];case W:return["("].concat(Object(m.a)(de(e.value.funct)),Object(m.a)(e.value.args.map(de).reduce(function(e,t){return[].concat(Object(m.a)(e),[" "],Object(m.a)(t))},"")),[")"]);case J:return[V(e.value)];case X:return["#<color>"];case ee:return["(make-".concat(e.value.id)].concat(Object(m.a)(e.value.fields.map(function(e){return de(e.binding)}).reduce(function(e,t){return[].concat(Object(m.a)(e),[" "],Object(m.a)(t))},"")),[")"]);default:return"error or something"}}function ve(e){switch(e.type){case F:return[e.value];case _:return["#"+e.value];case Q:return['"'.concat(e.value,'"')];case $:if(null===e.value)return["'()"];for(var t=[];null!==e.value;)t=[].concat(Object(m.a)(t),[" "],Object(m.a)(ve(e.value.a))),e=e.value.d;return["(list"].concat(Object(m.a)(t),[")"]);case q:return["'"+e.value];case P:return[e.value];case Y:return["#<procedure>"];case te:return["#<user_defined_procedure>"];case W:return["("].concat(Object(m.a)(ve(e.value.funct)),Object(m.a)(e.value.args.map(ve).reduce(function(e,t){return[].concat(Object(m.a)(e),[" "],Object(m.a)(t))},"")),[")"]);case J:return[V(e.value)];case X:return["#<color>"];case ee:return["(make-".concat(e.value.id)].concat(Object(m.a)(e.value.fields.map(function(e){return ve(e.binding)}).reduce(function(e,t){return[].concat(Object(m.a)(e),[" "],Object(m.a)(t))},"")),[")"]);default:return"error or something"}}function Ee(e){var t=me(e);switch(t.rest){case"":break;default:throw new SyntaxError("Parsing Error")}return t.prog}function ge(e,t){if(!t.includes(e.type)){var n=t.map(function(e){switch(e){case P:return"variable";case W:return"application";case Y:return"function";case te:return"closure";case F:return"number";case _:return"boolean";case Q:return"string";case $:return"list";case q:return"symbol";case J:return"image";case X:return"color";default:return"???"}}).reduce(function(e,t){return e+" or a ".concat(t)}),r=new TypeError;throw r.message=a.a.createElement(a.a.Fragment,null,[de(e)," ain't a "+n]),r}}function ye(e,t,n){var r=t.length;var a=t.map(function(t){return function(n){if(1!==n.length)throw new Error("".concat(e,"-").concat(t,": arity mismatch, expected 1 argument but given ").concat(n.length));if(n[0].type!==ee||n[0].value.id!==e)throw new Error("".concat(e,"-").concat(t,": expects a ").concat(e));return n[0].value.fields.reduce(function(e,n){return void 0!==e?e:n.id===t?n.binding:void 0},void 0)}}),i=[{name:"make-".concat(e),binding:{type:Y,value:function(n){if(n.length!==r)throw new Error("make-".concat(e,": arity mismatch, expected ").concat(r," arguments but given ").concat(n.length));var a=n.map(function(e,n){return{id:t[n],binding:e}});return{value:{id:e,fields:a},type:ee}}}},{name:"".concat(e,"?"),binding:{type:Y,value:function(t){if(1!==t.length)throw new Error("".concat(e,"?: arity mismatch, expected 1 argument but given ").concat(t.length));var n=t[0];return{value:n.type===ee&&n.value.id===e,type:_}}}}].concat(Object(m.a)(a.map(function(n,r){return{name:"".concat(e,"-").concat(t[r]),binding:{type:Y,value:n}}})));return[].concat(Object(m.a)(n),Object(m.a)(i))}function be(e){return e.type===_}function we(e){if(1!==e.length)throw new Error("arity mismatch");var t=e[0];if(ge(t,[$]),null===t.value)throw new Error("expected a cons, but given empty list");return t.value.a}function Oe(e){if(1!==e.length)throw new Error("arity mismatch");var t=e[0];if(null===t.value)throw new Error("expected a cons, but given empty list");return ge(t,[$]),t.value.d}function xe(e){if(1!==e.length)throw new Error("arity mismatch");var t=e[0];return{value:null===t.value&&t.type===$,type:_}}var Le={gray:"gray"},Ie={pink:"pink"},Re={yellow:"yellow"};function Ne(e){return 0!==e.length&&!e.every(function(e){return e===Le})&&e.every(function(e){return e===Le||be(e)})}function Ae(e){return Ne(e.outputs)||void 0!==e.thenChildren}var De=function(){return{type:"NIL"}},Ce={type:"nil"};function je(e){return""===e?Ce:{type:"text",text:String(e)}}var Se={type:"line"};function ke(e,t){if("function"!==typeof t)throw new Error("docR isn't a thunk");return{type:"union",left:e,right:t}}function Te(e,t){if("function"!==typeof t)throw new Error("docR isn't a thunk");switch(e.type){case"nil":return t();case"concat":return{type:"concat",left:e.left,right:function(){return Te(e.right(),t)}};case"union":return ke(Te(e.left,t),function(){return Te(e.right(),t)});default:return{type:"concat",left:e,right:t}}}function ze(e,t){switch(t.type){case"nil":return Ce;case"concat":return Te(ze(e,t.left),function(){return ze(e,t.right())});case"nest":return{type:"nest",indent:t.indent+e,rest:t.rest};case"text":return t;case"line":return{type:"nest",indent:e,rest:t};case"union":return ke(ze(e,t.left),function(){return ze(e,t.right())});default:throw Error("unnexpected document type: ".concat(t.type))}}function Me(e){return ke(function e(t){switch(t.type){case"nil":return Ce;case"concat":return Te(e(t.left),function(){return e(t.right())});case"nest":return e(t.rest);case"text":return t;case"line":return je(" ");case"union":return e(t.left);default:throw Error("unnexpected document type: ".concat(t.type))}}(e),function(){return e})}function Ue(e,t){function n(t,n,a){return function t(n,a,i){if(0===i.length)return De;var o=i[0].doc;var u=i[0].indent;var s=i.slice(1);switch(o.type){case"nil":return t(n,a,s);case"concat":return t(n,a,[{indent:u,doc:o.left},{indent:u,doc:o.right()}].concat(Object(m.a)(s)));case"nest":return t(n,a,[{indent:u+o.indent,doc:o.rest}].concat(Object(m.a)(s)));case"text":return""===o.text?De:r(function(){return{type:"TEXT",text:o.text,rest:r(function(){return t(n,a+o.text.length,s)()})}});case"line":return r(function(){return{type:"LINE",indent:u,rest:r(function(){return t(n+u,u,s)()})}});case"union":return c=n,l=a,f=t(n,a,[{indent:u,doc:o.left}].concat(Object(m.a)(s))),p=r(function(){return t(n,a,[{indent:u,doc:o.right()}].concat(Object(m.a)(s)))()}),function e(t,n,r){if(t<0||n<0)return!1;var a=r();switch(a.type){case"NIL":return!0;case"TEXT":return e(t-a.text.length,n-a.text.length,a.rest);case"LINE":return!0;default:throw Error("unnexpected DOCUMENT type: ".concat(a.type))}}(e-l,c-l,f)?f:p;default:throw console.log(o()),Error("unnexpected document type: ".concat(o.type))}var c,l,f,p}(t,n,[{indent:0,doc:a}])}function r(e){var t,n=!1;return function(){return n?t:(n=!0,t=e())}}return function(e){return function e(t){var n=t();switch(n.type){case"NIL":return"";case"TEXT":return n.text+e(n.rest);case"LINE":return"\n"+" ".repeat(n.indent)+e(n.rest);default:throw Error("unnexpected DOCUMENT type: ".concat(n.type))}}(n(t,0,e))}}function Ge(e,t){return Te(e,function(){return Te(je(" "),function(){return t})})}function Be(e,t){return Te(e,function(){return Te(Se,function(){return t})})}function He(e,t){return Te(e,function(){return t})}function Ke(e,t){return 0===t.length?Ce:1===t.length?t[0]:e(t[0],Ke(e,t.slice(1)))}function Ve(e){return Ke(Ge,e)}function Pe(e){return Ke(Be,e)}function We(e,t,n){return Ke(He,[je(e),t,je(n)])}function Ye(e){switch(e.type){case P:return je(e.value);case W:return ze(1,We("(",Me(Pe([Ye(e.value.funct)].concat(Object(m.a)(e.value.args.map(Ye))))),")"));case Y:return je("function");case F:return je(e.value);case _:return je("#"+e.value);case Q:return je('"'+e.value+'"');case $:return null===e.value?je("'()"):ze(1,We("(",Me(Pe([je("cons"),Ye(e.value.a),Ye(e.value.d)])),")"));case q:return je("'"+e.value);default:throw new Error("unknown program type")}}function Fe(e){switch(e.type){case P:return je(e.value);case W:return ze(1,We("(",Me(Pe([Fe(e.value.funct)].concat(Object(m.a)(e.value.args.map(Fe))))),")"));case Y:return je("function");case F:return je(e.value);case _:return je("#"+e.value);case Q:return je('"'+e.value+'"');case $:if(null===e.value)return je("'()");for(var t=e.value.d,n=Fe(e.value.a);null!==t.value;)n=Pe([n,Fe(t.value.a)]),t=t.value.d;return We("(",Ve([je("list"),Me(n)]),")");case q:return je("'"+e.value);default:throw new Error("unknown program type")}}Ue(1/0,1/0);var _e=function(e,t,n,r){var a;a="cons"===t?Ye:Fe;var i=Ue(n,r);return e.map(function(e){return function(e){var t=o(e.name),n=o(e.signature),r=o(e.purpose),a=Ve(e.params.map(function(e){return o(e.name)})),u=e.examples.map(function(e){var n=Pe(e.inputs.map(function(e){return o(e.prog)})),r=o(e.want);return i(ze(1,We("(",Me(Pe([je("check-expect"),We("(",ze(1,Pe([t,n])),")"),r])),")")))}).join("\n"),s=function e(t){var n,r=function(e){var t=e.filter(Ae),n=e.filter(function(e){return!Ae(e)});return{bools:t,nonbools:n}}(t),a=Pe(r.nonbools.map(function(e){return o(e.prog)}));if(0!==r.bools.length){var i=r.bools.map(function(t){return ze(1,We("[",Pe([o(t.prog),e(t.thenChildren)]),"]"))});n=ze(2,We("(",Pe([je("cond")].concat(Object(m.a)(i))),")"))}return 0!==r.bools.length&&0!==r.nonbools.length?Pe([n,a]):0!==r.bools.length?n:0!==r.nonbools.length?a:Ce}(e.formulas),c=i(Ve([je(";;"),t,je(":"),n])),l=i(Ve([je(";;"),r])),f=i(ze(2,We("(",Ve([je("define"),Pe([We("(",Ve([t,a]),")"),s])]),")")));return[c,l,f,"",u].join("\n")}(e)}).join("\n\n");function o(e){return e===Re?je("..."):"string"===typeof e?je(e):a(e)}};function Qe(e){return"http://107.170.76.216:8000/log/session"+e}var $e=function(){function e(t,n){Object(f.a)(this,e),this.delay=t,this.url=Qe(n),this.item=!1,this.sendItem=this.sendItem.bind(this),this.sendItem()}return Object(p.a)(e,[{key:"sendItem",value:function(){var e=this;if(this.clear(),this.item){var t=this.item;fetch(this.url,{method:"POST",body:JSON.stringify(t),mode:"no-cors",headers:{"Content-Type":"application/json"}}).then(function(){e.timerID=setTimeout(e.sendItem,e.delay)},function(){e.item||(e.item=t),e.timerID=setTimeout(e.sendItem,e.delay)}),this.item=!1}else this.timerID=setTimeout(this.sendItem,this.delay)}},{key:"setItem",value:function(e){this.item=e}},{key:"clear",value:function(){this.timerID&&(clearTimeout(this.timerID),delete this.timerID)}}]),e}(),qe=n(17),Je=(n(44),{yo:"don't actually change anything"}),Xe=/^(?!-?(?:\d+(?:\.\d*)?|\.\d+)(?=$|[\s",'`()[\]{}|;#]))[^\s",'`()[\]{}|;#]+$/,Ze=0;function et(){return Ze++}function tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Ze+e}var nt=de,rt="cons";function at(e){return"yellow"===e.yellow?"":nt(e).join("")}function it(e,t){if(e.type!==t.type)return!1;if(e.type===$)return null===e.value||null===t.value?e.value===t.value:it(e.value.a,t.value.a)&&it(e.value.d,t.value.d);if(function(e){return e.type===W}(e)){if(e.value.args.length!==t.value.args.length)return!1;var n=it(e.value.funct,t.value.funct),r=e.value.args.map(function(e,n){return it(e,t.value.args[n])}).every(function(e){return e});return n&&r}if(function(e){return e.type===ee}(e)){var a,i=e.value,o=t.value,u=i.id===o.id;return a=i.fields.length===o.fields.length&&i.fields.every(function(e,t){return it(e.binding,o.fields[t].binding)}),u&&a}if(function(e){return e.type===J}(e)){var s=function(e){var t=document.createElement("canvas");t.width=G(e),t.height=B(e);var n=t.getContext("2d"),r=V(e),a=y.a.renderToString(r),i="data:image/svg+xml;base64,"+btoa(a),o=document.createElement("img");return o.src=i,n.drawImage(o,0,0),n.getImageData(0,0,G(e),B(e)).data},c=e.value,l=t.value,m=s(z([c,j(G(c),G(c),"solid","red")])),f=s(z([c,j(G(c),G(c),"solid","green")])),p=s(z([l,j(G(l),G(l),"solid","red")])),h=s(z([l,j(G(l),G(l),"solid","green")]));if(G(c)!==G(l)||B(c)!==B(l))return!1;var d=m.every(function(e,t){return e===p[t]}),v=f.every(function(e,t){return e===h[t]});return d&&v}return e.value===t.value}function ot(e){return a.a.createElement("div",{className:"colon"},":")}function ut(e){return a.a.createElement("div",null,e.error.message,a.a.createElement("div",{title:"Oh no! You got an error!",className:"alert"},a.a.createElement(qe.d,{icon:qe.a,size:"small",verticalAlign:"middle",ariaLabel:"Error!"})))}function st(e){return a.a.createElement("div",{className:"remove",onClick:e.onClick,title:e.title},a.a.createElement(qe.d,{icon:qe.c,size:"small",verticalAlign:"middle",ariaLabel:"Remove"}))}var ct=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={text:""},n.textChange=n.textChange.bind(Object(v.a)(n)),n}return Object(E.a)(t,e),Object(p.a)(t,[{key:"textChange",value:function(e){if(void 0===this.props.text){var t=e.target.value;this.setState({text:t}),this.props.isValid(t)?this.props.onValid(t):""!==t||this.props.dummy||this.props.onEmpty()}}},{key:"render",value:function(){var e,t,n=void 0===this.props.text?this.state.text:"yellow"===this.props.text.yellow?"":this.props.text;return e=this.props.dummy&&""===n?"dummy_input":this.props.isValid(n)?"valid_input":""===n?"empty_input":"invalid_input",t=0===n.length?this.props.placeholder.length:Math.max(n.length+2,4),a.a.createElement("input",{type:"text",className:e,size:t,placeholder:this.props.placeholder,onChange:this.textChange,value:n})}}]),t}(a.a.Component),lt=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={text:""},n.textChange=n.textChange.bind(Object(v.a)(n)),n}return Object(E.a)(t,e),Object(p.a)(t,[{key:"textChange",value:function(e){if(void 0===this.props.text){var t=e.target.value;this.setState({text:t}),this.props.isValid(t)?this.props.onValid(t):""!==t||this.props.dummy||this.props.onEmpty()}}},{key:"render",value:function(){var e,t=void 0===this.props.text?this.state.text:"yellow"===this.props.text.yellow?"":this.props.text;e=this.props.dummy&&""===t?"dummy_input":this.props.isValid(t)?"valid_input":""===t?"empty_input":"invalid_input";var n,r,i=t.match(/\n/g);return n=null===i?1:i.length+1,r=0===t.length?this.props.placeholder.length:Math.max.apply(Math,Object(m.a)(t.split("\n").map(function(e){return e.length+1})).concat([4])),a.a.createElement("textarea",{className:e+" validated_area",rows:n,cols:r,placeholder:this.props.placeholder,onChange:this.textChange,spellCheck:!1,value:t})}}]),t}(a.a.Component);function mt(e){function t(t,n){var r;r=-1!==e.tables.indexOf(n)?e.tables.map(function(e){return e===n?t:e}):[].concat(Object(m.a)(e.tables),[t]),e.programChange(r)}function n(t,n){var r=e.tables.filter(function(e){return e!==n}).map(function(e){return{name:e.name,binding:null}}),a=n.params.map(function(e){return{name:e,binding:null}}),i=[].concat(Object(m.a)(e.globalEnv),Object(m.a)(r),Object(m.a)(a));return Xe.test(t)&&!function(e,t){return t.reduce(function(t,n){return!!t||n.name===e},!1)}(t,i)}var r=e.tables.map(function(r){return a.a.createElement("div",{key:r.key,className:"flex_horiz table"},a.a.createElement("div",{className:"flex_vert no_grow"},a.a.createElement("div",{className:"flex_horiz no_grow signature"},a.a.createElement(ct,{dummy:!1,placeholder:"Table Name",text:e.disabled?r.name:void 0,isValid:function(e){return n(e,r)},onValid:function(e){return t(Object(l.a)({},r,{name:e}),r)},onEmpty:function(){return t(Object(l.a)({},r,{name:Re}),r)}}),a.a.createElement(ot,null),a.a.createElement(ct,{dummy:!1,placeholder:"Signature",text:e.disabled?r.signature:void 0,isValid:function(e){return function(e,t){var n=e.split(/\s+->\s+/g);if(2!==n.length)return!1;var r=n[0].match(/[a-zA-Z]+/g),a=n[1].match(/[a-zA-Z]+/g);return null!==r&&null!==a&&r.length===t.params.length&&1===a.length}(e,r)},onValid:function(e){return t(Object(l.a)({},r,{signature:e}),r)},onEmpty:function(){return t(Object(l.a)({},r,{signature:Re}),r)}}),a.a.createElement(st,{onClick:e.disabled?void 0:function(){return function(t){var n=e.tables.filter(function(e){return e!==t});e.programChange(n)}(r)},title:"Remove this table"})),a.a.createElement("div",{className:"flex_horiz no_grow"},a.a.createElement(ct,{dummy:!1,placeholder:"Purpose",text:e.disabled?r.purpose:void 0,isValid:function(e){return""!==e},onValid:function(e){return t(Object(l.a)({},r,{purpose:e}),r)},onEmpty:function(){return t(Object(l.a)({},r,{purpose:Re}),r)}})),a.a.createElement(ft,{disabled:e.disabled,globalEnv:e.globalEnv,table:r,tableNames:e.tables.map(function(e){return e.name}),tableChange:function(e){return t(e,r)}})),a.a.createElement("div",{className:"grow"}))}),i=a.a.createElement("div",{key:tt(),className:"flex_horiz table"},a.a.createElement("div",{className:"flex_vert no_grow"},a.a.createElement("div",{className:"flex_horiz no_grow signature"},a.a.createElement(ct,{dummy:!0,placeholder:"Table Name",text:e.disabled?"":void 0,isValid:function(e){return n(e,{params:[]})},onValid:function(e){return t({name:e,signature:Re,purpose:Re,examples:[],formulas:[],params:[],key:et()},{})}}),a.a.createElement(ot,null),a.a.createElement(ct,{dummy:!0,placeholder:"Signature",text:e.disabled?"":void 0,isValid:function(e){return""!==e},onValid:function(e){return t({name:Re,signature:e,purpose:Re,examples:[],formulas:[],params:[],key:et()},{})}})),a.a.createElement("div",{className:"flex_horiz no_grow"},a.a.createElement(ct,{dummy:!0,placeholder:"Purpose",text:e.disabled?"":void 0,isValid:function(e){return""!==e},onValid:function(e){return t({name:Re,signature:Re,purpose:e,examples:[],formulas:[],params:[],key:et()},{})}})),a.a.createElement(ft,{disabled:e.disabled,globalEnv:e.globalEnv,table:{name:Re,signature:Re,purpose:Re,examples:[],formulas:[],params:[],key:tt()},tableNames:e.tables.map(function(e){return e.name}),tableChange:function(e){return t(e,{})}})),a.a.createElement("div",{className:"grow"}));return a.a.createElement("div",null,[].concat(Object(m.a)(r),[i]))}function ft(e){function t(t){e.tableChange(Object(l.a)({},e.table,{formulas:t}))}return a.a.createElement("table",{className:"grow"},a.a.createElement(pt,{disabled:e.disabled,globalEnv:e.globalEnv,params:e.table.params,examples:e.table.examples,tableNames:e.tableNames,paramsExamplesChange:function(t,n){e.tableChange(Object(l.a)({},e.table,{params:t,examples:n}))},formulas:e.table.formulas,formulasChange:t}),a.a.createElement(vt,{disabled:e.disabled,globalEnv:e.globalEnv,examples:e.table.examples,formulas:e.table.formulas,paramNames:e.table.params.map(function(e){return e.name}),examplesFormulasChange:function(t,n){e.tableChange(Object(l.a)({},e.table,{examples:t,formulas:n}))},formulasChange:t}))}function pt(e){function t(e){var t=!0;try{Ee(e)}catch(n){if(!(n instanceof SyntaxError))throw n;t=!1}return t}function n(t,n){var r;r=-1===e.formulas.indexOf(n)?[].concat(Object(m.a)(e.formulas),[t]):e.formulas.map(function(e){return e===n?t:e}),e.formulasChange(r)}function r(e){return Ae(e)?e.thenChildren.reduce(function(e,t){return e+r(t)},2):1}var i=e.formulas.reduce(function(e,t){return Math.max(e,function e(t,n){return Ae(t)?t.thenChildren.reduce(function(t,r){return Math.max(t,e(r,n+1))},n+1):n}(t,0))},0),o=e.params.length,u=e.formulas.map(function(i){return a.a.createElement("th",{key:i.key,colSpan:r(i)},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(lt,{placeholder:"Formula",dummy:!1,text:e.disabled?at(i.prog):void 0,isValid:t,onValid:function(e){return n(Object(l.a)({},i,{prog:Ee(e)}),i)},onEmpty:function(){return n(Object(l.a)({},i,{prog:Re}),i)}}),a.a.createElement(st,{title:"Remove this formula",onClick:e.disabled?void 0:function(){return function(t){var n=e.formulas.filter(function(e){return e!==t});e.formulasChange(n)}(i)}})))}),s=a.a.createElement("th",{key:tt(),colSpan:1},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(lt,{dummy:!0,placeholder:"Formula",text:e.disabled?"":void 0,isValid:t,onValid:function(t){return n({prog:Ee(t),outputs:e.examples.map(function(e){return Re}),key:et()},{})}}))),c=function e(t){return 0===t?[]:1===t?[1]:[].concat(Object(m.a)(e(t-1)),[t])}(i).map(function(t){return a.a.createElement("tr",{key:t},a.a.createElement("th",{colSpan:o+2}),e.formulas.map(function(r){return a.a.createElement(dt,{disabled:e.disabled,key:r.key,formula:r,depth:t,numExamples:e.examples.length,formulaChange:function(e){return n(e,r)}})}),Array(t).map(function(e,t){return a.a.createElement("th",{key:t})}),a.a.createElement("th",null))});return a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement(ht,{disabled:e.disabled,globalEnv:e.globalEnv,params:e.params,examples:e.examples,tableNames:e.tableNames,paramsExamplesChange:e.paramsExamplesChange}),[].concat(Object(m.a)(u),[s,a.a.createElement("th",{key:tt(1)})])),c)}function ht(e){function t(t,n){var r=e.params.filter(function(e){return e!==n}).map(function(e){return{name:e.name,binding:null}}),a=e.tableNames.map(function(e){return{name:e,binding:null}}),i=[].concat(Object(m.a)(e.globalEnv),Object(m.a)(a),Object(m.a)(r));return Xe.test(t)&&!function(e,t){return t.reduce(function(t,n){return!!t||n.name===e},!1)}(t,i)}function n(t,n){var r,a;-1===e.params.indexOf(n)?(r=[].concat(Object(m.a)(e.params),[t]),a=e.examples.map(function(e){return Object(l.a)({},e,{inputs:[].concat(Object(m.a)(e.inputs),[{prog:Re,key:et()}])})})):(r=e.params.map(function(e){return e===n?t:e}),a=e.examples),e.paramsExamplesChange(r,a)}var r=e.params.map(function(r){return a.a.createElement("th",{key:r.key},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(ct,{dummy:!1,placeholder:"Parameter",text:e.disabled?r.name:void 0,isValid:function(e){return t(e,r)},onValid:function(e){return n(Object(l.a)({},r,{name:e}),r)},onEmpty:function(){return n(Object(l.a)({},r,{name:Re}),r)}}),a.a.createElement(st,{title:"Remove this parameter",onClick:e.disabled?void 0:function(){return function(t){var n=e.params.indexOf(t),r=e.params.filter(function(e){return e!==t}),a=e.examples.map(function(e){return Object(l.a)({},e,{inputs:e.inputs.filter(function(e,t){return t!==n})})});e.paramsExamplesChange(r,a)}(r)}})))}),i=a.a.createElement("th",{key:tt()},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(ct,{dummy:!0,placeholder:"Parameter",text:e.disabled?"":void 0,isValid:function(e){return t(e,{})},onValid:function(e){return n({name:e,key:et()},{})}})));return a.a.createElement(a.a.Fragment,null,a.a.createElement("th",null),a.a.createElement(a.a.Fragment,null,[].concat(Object(m.a)(r),[i])))}function dt(e){function t(e){try{Ee(e)}catch(t){return!1}return!0}function n(t,n){var r;r=-1===e.formula.thenChildren.indexOf(n)?[].concat(Object(m.a)(e.formula.thenChildren),[t]):e.formula.thenChildren.map(function(e){return e===n?t:e}),e.formulaChange(Object(l.a)({},e.formula,{thenChildren:r}))}function r(e){return Ae(e)?e.thenChildren.reduce(function(e,t){return e+r(t)},2):1}if(e.depth>1)return a.a.createElement(a.a.Fragment,null,a.a.createElement("th",null),Ae(e.formula)?a.a.createElement(a.a.Fragment,null,e.formula.thenChildren.map(function(t){return a.a.createElement(dt,{disabled:e.disabled,key:t.key,formula:t,depth:e.depth-1,numExamples:e.numExamples,formulaChange:function(e){return n(e,t)}})}),a.a.createElement("th",null)):a.a.createElement("script",null));if(Ae(e.formula)){var i=e.formula.thenChildren.map(function(i){return a.a.createElement("th",{key:i.key,colSpan:r(i)},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(lt,{dummy:!1,placeholder:"Formula",text:e.disabled?at(i.prog):void 0,isValid:t,onValid:function(e){return n(Object(l.a)({},i,{prog:Ee(e)}),i)},onEmpty:function(){return n(Object(l.a)({},i,{prog:Re}),i)}}),a.a.createElement(st,{title:"Remove this formula",onClick:e.disabled?void 0:function(){return function(t){var n=e.formula.thenChildren.filter(function(e){return e!==t});e.formulaChange(Object(l.a)({},e.formula,{thenChildren:n}))}(i)}})))}),o=a.a.createElement("th",{key:tt(),colSpan:1},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(lt,{dummy:!0,placeholder:"Formula",text:e.disabled?"":void 0,isValid:t,onValid:function(t){return n({prog:Ee(t),outputs:Array(e.numExamples).fill(Re),key:et()},{})}})));return a.a.createElement(a.a.Fragment,null,a.a.createElement("th",null),a.a.createElement(a.a.Fragment,null,[].concat(Object(m.a)(i),[o])))}return a.a.createElement(a.a.Fragment,null,a.a.createElement("th",null))}function vt(e){function t(t,n){var r,a,i=-1!==e.examples.indexOf(n);if(t===Je)return i;return i?(r=e.examples.map(function(e){return e===n?t:e}),a=e.formulas):(r=[].concat(Object(m.a)(e.examples),[t]),a=e.formulas.map(function e(t){var n=[].concat(Object(m.a)(t.outputs),[Re]);if(Ae(t)){var r=t.thenChildren.map(e);return Object(l.a)({},t,{outputs:n,thenChildren:r})}return Object(l.a)({},t,{outputs:n})})),e.examplesFormulasChange(r,a),!0}var n=e.examples.map(function(n,r){return a.a.createElement("tr",{key:n.key},a.a.createElement("td",null,a.a.createElement(st,{onClick:e.disabled?void 0:function(){return function(t){var n=e.examples.indexOf(t),r=e.examples.filter(function(e){return e!==t}),a=e.formulas.map(function e(t){var r=t.outputs.filter(function(e,t){return t!==n});if(Ae(t)){var a=t.thenChildren.map(e);return Object(l.a)({},t,{outputs:r,thenChildren:a})}return Object(l.a)({},t,{outputs:r})});e.examplesFormulasChange(r,a)}(n)},title:"Remove this example"})),a.a.createElement(Et,{disabled:e.disabled,globalEnv:e.globalEnv,dummy:!1,inputs:n.inputs,inputsChange:function(e){return t(Object(l.a)({},n,{inputs:e}),n)}}),a.a.createElement("td",null),a.a.createElement(gt,{globalEnv:e.globalEnv,dummy:!1,formulas:e.formulas,want:n.want,row:r}),a.a.createElement("td",null),a.a.createElement(wt,{disabled:e.disabled,globalEnv:e.globalEnv,dummy:!1,want:n.want,wantChange:function(e){return t(Object(l.a)({},n,{want:e}),n)}}))}),r=a.a.createElement("tr",{key:tt(e.paramNames.length)},a.a.createElement("td",null),a.a.createElement(Et,{disabled:e.disabled,globalEnv:e.globalEnv,dummy:!0,inputs:e.paramNames.map(function(e,t){return{key:tt(t)}}),inputsChange:function(e){return t({inputs:e,want:Re,key:et()},{})}}),a.a.createElement("td",null),a.a.createElement(gt,{globalEnv:e.globalEnv,dummy:!0,formulas:e.formulas}),a.a.createElement("td",null),a.a.createElement(wt,{disabled:e.disabled,globalEnv:e.globalEnv,dummy:!0,wantChange:function(n){return t({want:n,inputs:e.paramNames.map(function(e){return{prog:Re,key:et()}}),key:et()},{})}}));return a.a.createElement("tbody",null,[].concat(Object(m.a)(n),[r]))}function Et(e){function t(e){try{Ee(e)}catch(t){return!1}return!0}function n(t,n){var r;r=e.dummy?e.inputs.map(function(e){return e===n?Object(l.a)({},t,{key:et()}):{prog:Re,key:et()}}):e.inputs.map(function(e){return e===n?t:e}),e.inputsChange(r)}var r=e.inputs.map(function(r,i){var o=a.a.createElement("div",null);if(e.dummy)return a.a.createElement("td",{key:r.key},a.a.createElement("div",{className:"flex_vert"},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(lt,{dummy:e.dummy,placeholder:"Input",text:e.disabled?"":void 0,isValid:t,onValid:function(e){return n({prog:Ee(e)},r)}})),o));if("yellow"!==r.prog.yellow)try{pe(r.prog,e.globalEnv)}catch(u){o=a.a.createElement(ut,{error:u})}return a.a.createElement("td",{key:r.key},a.a.createElement("div",{className:"flex_vert"},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(lt,{dummy:e.dummy,placeholder:"Input",text:e.disabled?at(r.prog):void 0,isValid:t,onValid:function(e){return n(Object(l.a)({},r,{prog:Ee(e)}),r)},onEmpty:function(){return n(Object(l.a)({},r,{prog:Re}),r)}})),o))});return a.a.createElement(a.a.Fragment,null,r)}function gt(e){function t(e){return Ae(e)?e.thenChildren.reduce(function(e,n){return e+t(n)},2):1}return e.dummy?a.a.createElement(a.a.Fragment,null,e.formulas.map(function(e){return a.a.createElement("td",{key:e.key,colSpan:t(e)})})):a.a.createElement(a.a.Fragment,null,e.formulas.map(function(t){return a.a.createElement(a.a.Fragment,{key:t.key},a.a.createElement(yt,{globalEnv:e.globalEnv,output:t.outputs[e.row],want:e.want}),Ae(t)?a.a.createElement(a.a.Fragment,null,a.a.createElement(gt,{globalEnv:e.globalEnv,formulas:t.thenChildren,want:e.want,row:e.row}),a.a.createElement(bt,{parentOutput:t.outputs[e.row]})):a.a.createElement("script",null))}))}function yt(e){var t,n=e.output;if(n===Le)return a.a.createElement("td",{className:"gray"});if(n===Ie)return a.a.createElement("td",{className:"pink"});if("yellow"===n.yellow)return a.a.createElement("td",{className:"yellow"});if(n instanceof Error)return a.a.createElement("td",null,a.a.createElement(ut,{error:n}));try{t=pe(e.want,e.globalEnv)}catch(r){t=Re}return"yellow"!==t.yellow&&it(n,t)?a.a.createElement("td",{className:"output"},nt(n),a.a.createElement("div",{title:"Yay! It's right!",className:"check"},a.a.createElement(qe.d,{icon:qe.b,size:"small",verticalAlign:"middle",ariaLabel:"Yay!"}))):a.a.createElement("td",{className:"output"},nt(n))}function bt(e){return e.parentOutput===Le||!1===e.parentOutput.value?a.a.createElement("td",{className:"gray"}):e.parentOutput!==Ie&&be(e.parentOutput)?a.a.createElement("td",null):a.a.createElement("td",{className:"pink"})}function wt(e){var t;if(e.dummy||"yellow"===e.want.yellow)t=a.a.createElement("script",null);else try{var n=pe(e.want,e.globalEnv);t=it(n,e.want)?a.a.createElement("script",null):a.a.createElement("td",{className:"output"},nt(n))}catch(r){t=a.a.createElement("td",null,a.a.createElement(ut,{error:r}))}return a.a.createElement(a.a.Fragment,null,a.a.createElement("td",null,a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(lt,{dummy:e.dummy,placeholder:"Want",text:e.disabled?e.dummy?"":at(e.want):void 0,isValid:function(e){try{Ee(e)}catch(r){return!1}return!0},onValid:function(t){return e.wantChange(Ee(t))},onEmpty:function(){return e.wantChange(Re)}}))),t)}var Ot=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={error:!1},n.prefixChange=n.prefixChange.bind(Object(v.a)(n)),n}return Object(E.a)(t,e),Object(p.a)(t,[{key:"validPrefix",value:function(e){try{fe(e)}catch(t){return!1}return!0}},{key:"prefixChange",value:function(e){this.setState({error:this.props.prefixChange(e)})}},{key:"render",value:function(){var e=void 0===this.props.error?this.state.error:this.props.error;return a.a.createElement("div",{className:"flex_horiz"},a.a.createElement("div",{className:"flex_vert no_grow"},a.a.createElement(lt,{dummy:!1,placeholder:"Definitions Area",text:this.props.text,isValid:this.validPrefix,onValid:this.prefixChange}),e?a.a.createElement(ut,{error:e}):[]),a.a.createElement("div",{className:"grow"}))}}]),t}(a.a.Component),xt=function(e){function t(e){var n;Object(f.a)(this,t);return(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={showBSL:!1},n.toggleDisplay=n.toggleDisplay.bind(Object(v.a)(n)),n}return Object(E.a)(t,e),Object(p.a)(t,[{key:"toggleDisplay",value:function(e){this.setState(function(e){return{showBSL:!e.showBSL}})}},{key:"render",value:function(){var e;return e=this.state.showBSL?a.a.createElement("textarea",{className:"bsl_field",rows:20,cols:70,readOnly:!0,value:_e(this.props.tables,rt,70,70)}):a.a.createElement("div",null),a.a.createElement("div",{className:"bsl_io"},a.a.createElement("div",{className:"bsl_checkbox"},a.a.createElement("input",{type:"checkbox",id:"bsl_toggle",name:"bsl_output",onChange:this.toggleDisplay}),a.a.createElement("label",{htmlFor:"bsl_toggle"},"Show Combined Program")),e)}}]),t}(a.a.Component),Lt=function(e){function t(e){var n;Object(f.a)(this,t),n=Object(h.a)(this,Object(d.a)(t).call(this,e));var r="",a=!1,i=le,o=[{examples:[{inputs:[{prog:Re,key:et()}],want:Re,key:et()}],formulas:[{prog:Re,outputs:[Re],key:et()}],params:[{name:Re,key:et()}],name:Re,signature:Re,purpose:Re,key:et()}];if(e.snapshots&&e.snapshots.length>0){r=e.snapshots[0].prefix;try{i=he(fe(r),le)}catch(u){a=u}o=n.calculate(i,e.snapshots[0].tables)}return n.state={prefix:r,prefixError:a,globalEnv:i,tables:o,playbackTime:e.snapshots?0:void 0,snapshots:e.snapshots?void 0:[{prefix:r,tables:o}]},n.prefixChange=n.prefixChange.bind(Object(v.a)(n)),n.programChange=n.programChange.bind(Object(v.a)(n)),n.playbackTimeChange=n.playbackTimeChange.bind(Object(v.a)(n)),n.render=n.render.bind(Object(v.a)(n)),document.createElement("img"),n}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.sendifier=new $e(3e3,Math.floor(1e9*Math.random()))}},{key:"componentDidUpdate",value:function(e){if(this.props.snapshots&&this.props.snapshots!==e.snapshots&&this.props.snapshots.length>0){var t=this.props.snapshots[0].prefix,n=!1,r=le;try{r=he(fe(t),le)}catch(i){n=i}var a=this.calculate(r,this.props.snapshots[0].tables);this.setState({prefix:t,prefixError:n,globalEnv:r,tables:a,playbackTime:0,snapshots:void 0})}this.sendifier&&!this.props.snapshots&&this.sendifier.setItem(this.state.snapshots)}},{key:"componentWillUnmount",value:function(){this.sendifier&&(this.sendifier.clear(),delete this.sendifier)}},{key:"calculate",value:function(e,t){function n(t){return function(n){if(n.length!==t.params.length)throw new Error("Arity Mismatch, expected "+t.params.length+" argument"+(1===t.params.length?"":"s"));var r=t.examples.reduce(function(r,i){if(void 0!==r)return r;if(i.inputs.every(function(t,r){if("yellow"===t.prog.yellow)return!1;var a;try{a=it(pe(t.prog,e),n[r])}catch(o){a=!1}return a})){if("yellow"===i.want.yellow){var o=new ReferenceError;throw o.message=a.a.createElement(a.a.Fragment,null,"(",t.name,n.flatMap(function(e){return[" "].concat(Object(m.a)(nt(e)))}),") doesn't have a want"),o}return pe(i.want,e)}},void 0);if(void 0===r){var i=new ReferenceError;throw i.message=a.a.createElement(a.a.Fragment,null,"(",t.name,n.flatMap(function(e){return[" "].concat(Object(m.a)(nt(e)))}),") is not an example"),i}return r}}var r=t.map(function(e){return{name:e.name,binding:{value:n(e),type:Y}}}),i=[].concat(Object(m.a)(e),Object(m.a)(r));return t.map(function(e){function t(n,r){var a=r.map(function(t){if(t===Le)return Le;if(t===Ie)return Ie;if(!t.inputs.every(function(e){return"yellow"!==e.prog.yellow})||"yellow"===n.prog.yellow)return Re;var r=!1;try{t.inputs.map(function(e){return pe(e.prog,i)})}catch(s){r=!0}if(t===Ie||r)return Ie;var a,o=e.params.map(function(e,n){return{name:e.name,binding:pe(t.inputs[n].prog,i)}}),u=[].concat(Object(m.a)(i),Object(m.a)(o));try{a=pe(n.prog,u)}catch(s){a=s}return a});if(Ne(a)||void 0!==n.thenChildren&&0!==n.thenChildren.length){if(void 0===n.thenChildren)var o=[];else{var u=r.map(function(e,t){return function(e,t){return e===Le||!1===t.value?Le:"boolean"!==typeof t.value?Ie:e}(e,a[t])});o=n.thenChildren.map(function(e){return t(e,u)})}return Object(l.a)({},n,{outputs:a,thenChildren:o})}var s=Object(l.a)({},n,{outputs:a});return delete s.thenChildren,s}if("yellow"!==e.name.yellow&&e.params.every(function(e){return"yellow"!==e.name.yellow})){var n=e.formulas.map(function(n){return t(n,e.examples)});return Object(l.a)({},e,{formulas:n})}return Object(l.a)({},e)})}},{key:"prefixChange",value:function(e){var t,n=this,r=this.state.tables;try{t=he(fe(e),le)}catch(a){return this.setState(function(t){return{prefix:e,prefixError:a,snapshots:!n.props.snapshots&&t.snapshots?[].concat(Object(m.a)(t.snapshots),[{prefix:e,tables:r}]):t.snapshots}}),a}return r=this.calculate(t,r),this.setState(function(a){return{prefix:e,prefixError:!1,globalEnv:t,tables:r,snapshots:!n.props.snapshots&&a.snapshots?[].concat(Object(m.a)(a.snapshots),[{prefix:e,tables:r}]):a.snapshots}}),!1}},{key:"programChange",value:function(e){var t=this;this.setState(function(n){var r=n.prefix,a=t.calculate(n.globalEnv,e);return{tables:a,snapshots:!t.props.snapshots&&n.snapshots?[].concat(Object(m.a)(n.snapshots),[{prefix:r,tables:a}]):n.snapshots}})}},{key:"playbackTimeChange",value:function(e){var t=this.props.snapshots;if(t){for(var n,r=Math.max(0,Math.min(t.length-1,Math.floor(e.target.value))),a=t[r].prefix,i=!1,o=r;o>=0;o--)try{n=he(fe(t[o].prefix),le);break}catch(s){n=le,i||(i=s)}var u=this.calculate(n,t[r].tables);this.setState({playbackTime:r,prefix:a,prefixError:i,globalEnv:n,tables:u})}}},{key:"render",value:function(){var e=this,t=!!this.props.snapshots;return a.a.createElement("div",null,this.state.snapshots?a.a.createElement("p",null,"Sessions may be recorded to ensure quality service."):[],a.a.createElement(Ot,{text:t?this.state.prefix:void 0,error:t?this.state.prefixError:void 0,prefixChange:this.prefixChange}),a.a.createElement(mt,{disabled:t,globalEnv:this.state.globalEnv,tables:this.state.tables,programChange:this.programChange}),a.a.createElement("div",{className:"language_select"},a.a.createElement("select",{defaultValue:"cons",onChange:function(t){"cons"===t.target.value?(rt="cons",nt=de):(rt="list",nt=ve),e.setState(function(e){return e})}},a.a.createElement("option",{value:"cons"},"Beginning Student"),a.a.createElement("option",{value:"list"},"Beginning Student with List Abbreviations"))),a.a.createElement(xt,{tables:this.state.tables}),a.a.createElement("div",{className:"flex_horiz"},this.props.snapshots?a.a.createElement("input",{className:"grow",type:"range",min:"0",max:this.props.snapshots.length-1,value:this.state.playbackTime,onChange:this.playbackTimeChange}):[]))}}]),t}(a.a.Component),It=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={recordings:!1},n}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve({session74210253:{size:1317,time:1569527105},session148428182:{size:24138,time:1569441778},session298518670:{size:67750,time:1570147882},session575431584:{size:7321,time:1569449754},session930775627:{size:14635,time:1569618590},session570766654:{size:330,time:1569523618},session915398986:{size:5429,time:1569617399},session999858449:{size:659,time:1569526940},session90919863:{size:3116,time:1569443001},session567323686:{size:3134,time:1569505443},session784259918:{size:1758,time:1569393141},session507747830:{size:659,time:1569394378},session145724935:{size:3949,time:1569444002},session245762524:{size:12448,time:1569620128},session575752629:{size:659,time:1569526370},session940750390:{size:17947,time:1570238850},session37323886:{size:9990,time:1569617512},session498445431:{size:25175,time:1569523765},session670055431:{size:333,time:1569365716},session288283280:{size:659,time:1569615477},session227852605:{size:4045,time:1569524509},session197976485:{size:988,time:1569441365},session330494010:{size:1953,time:1569441422},session598747267:{size:4111,time:1569618625},session623103187:{size:8373,time:1569899290},session999539992:{size:3134,time:1569505606},session841290975:{size:8712,time:1569888406},session897248455:{size:147902,time:1569950195},session1:{size:940,time:1569361677},session877105065:{size:7054,time:1569621940},session602721874:{size:1349495,time:1569525021},session233966387:{size:5707,time:1569617646},session868970505:{size:741,time:1571102649},session348726274:{size:4022020,time:1569605177},session343832615:{size:28894,time:1569529801},session602872928:{size:116713,time:1569443668},session708814486:{size:3571,time:1569510728},session551983007:{size:4617,time:1569620317},session480232560:{size:643,time:1569512400},session230125778:{size:330,time:1569523600},session902741536:{size:2353,time:1569393197},session447164309:{size:2360,time:1569524607},session555279589:{size:782,time:1569603543},session632240729:{size:3649,time:1569449291},session536512572:{size:3027,time:1569505832},session482479667:{size:123297,time:1569600468},session985771101:{size:6102,time:1569620263},session990812380:{size:813,time:1569509672},session651096748:{size:1975,time:1569392624},session168117690:{size:4773,time:1569620352},session324574791:{size:2372,time:1569448089},session282291088:{size:18236,time:1569516754},session82640873:{size:1317,time:1569526035},session440321010:{size:5565,time:1569504175},session497585669:{size:2004,time:1571091390},session435278495:{size:11733,time:1569617280},session71705427:{size:1272,time:1569892304},session114918654:{size:3453,time:1569618189},session769327710:{size:35848,time:1569529501},session533008942:{size:4606,time:1569617810},session854506959:{size:4180,time:1569449410},session534454392:{size:8989,time:1569392049},session358761034:{size:3291,time:1569441520},session204224283:{size:30137,time:1570235988},session851710327:{size:19083,time:1569506760},session344982751:{size:19338,time:1569392323},session58811825:{size:1961448,time:1569395126},session681842540:{size:7865,time:1569504962},session591312144:{size:2275,time:1569394167},session932599257:{size:3649,time:1569449357},session738858660:{size:330,time:1569509275},session285689967:{size:3291,time:1569443859},session947102836:{size:3453,time:1569618251},session162640642:{size:1975,time:1569441344},session978454913:{size:643,time:1569510576},session502471813:{size:353,time:1571091576},session965456577:{size:11597,time:1569393602},session301868416:{size:18296,time:1569617319},session349244196:{size:4405,time:1569527934},session401734276:{size:47572,time:1569524455},session162448624:{size:3453,time:1569618170},session574968481:{size:3242,time:1569526521},session163583295:{size:1317,time:1569394365},session217355621:{size:12707,time:1569524077},session762723603:{size:40425,time:1569393829},session544896062:{size:766,time:1569509599},session331426005:{size:1646,time:1569393640},session98513081:{size:248371,time:1570237650},session397731507:{size:4568,time:1569448946},session837408853:{size:330,time:1569523635},session814877055:{size:466023,time:1569899283},session54979042:{size:2278307,time:1569523771},session957179394:{size:988,time:1569526627},session642398994:{size:1901,time:1569392969},session768900304:{size:4225,time:1569617602},session381129428:{size:3291,time:1569441130},session467771103:{size:3453,time:1569617831},session279972290:{size:659,time:1569618085},session15605080:{size:2698,time:1569527666},session533889898:{size:5671,time:1569527595},session955905614:{size:3697,time:1569393534},session998016363:{size:3414,time:1569618445},foo:{size:643,time:1569361574},session295549567:{size:1317,time:1569362593},session145178177:{size:813,time:1569509378},session164281699:{size:2335,time:1569528253},session499915288:{size:13397,time:1569450148},session899554694:{size:3649,time:1569449202},session44668617:{size:4445,time:1569392573},session577919156:{size:1975,time:1569527770},session115044997:{size:13998,time:1571094085},session156922472:{size:2202,time:1569393012},session165111959:{size:542116,time:1569508679},session227166802:{size:2262,time:1570150620},session622233388:{size:11653,time:1569510683},session384488575:{size:2353,time:1569393091},session49624715:{size:11248,time:1569895761},session752253269:{size:9301,time:1569449855},session349458871:{size:3840,time:1569505886},session396576484:{size:4566,time:1569618674},session247925523:{size:1896,time:1569525642},session396835055:{size:26169,time:1569394128},session104042244:{size:3047,time:1569615563},session578016140:{size:6031,time:1569505117}}).then(function(t){e.setState({recordings:Object.entries(t).flatMap(function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return n.startsWith("session")?[Object(l.a)({id:n.slice(7)},r)]:[]})})})}},{key:"render",value:function(){var e={"text-align":"right"},t=[{Cell:function(e){return a.a.createElement(u.b,{to:"/session"+e.value},e.value)},Header:"Session ID",accessor:"id",maxWidth:150},{Cell:function(e){var t=new Date(1e3*e.value),n=t.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"medium"});return a.a.createElement("div",{className:"date"},a.a.createElement("span",null,n),a.a.createElement(O.a,{date:t}))},defaultSortDesc:!0,Header:"Last recording time",accessor:"time",maxWidth:350},{defaultSortDesc:!0,Header:"Size (bytes)",accessor:"size",headerStyle:e,style:e,maxWidth:150}];return this.state.recordings?a.a.createElement(b.a,{data:this.state.recordings,columns:t,defaultSorted:[{id:"time",desc:!0}]}):a.a.createElement("p",null,"Loading list of recordings")}}]),t}(a.a.Component),Rt=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={snapshots:!1},n}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.playbackSessionIDChange()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&this.playbackSessionIDChange()}},{key:"playbackSessionIDChange",value:function(){var e=this,t=this.props.match.params.id;if(this.setState({snapshots:!1}),t.length>0){var n=Qe(t);fetch(n).then(function(e){return e.json()}).then(function(t){t.every(function(e){return!("prefix"in e)&&!("tables"in e)})&&(t=t.map(function(e){return{prefix:"",tables:e}})),e.setState({snapshots:t})})}}},{key:"render",value:function(){return this.state.snapshots?a.a.createElement(Lt,{snapshots:this.state.snapshots}):a.a.createElement("p",null,"Loading session ",this.props.match.params.id," for playback")}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(u.a,null,a.a.createElement(s.a,{path:"/",exact:!0,component:Lt}),a.a.createElement(s.a,{path:"/list",exact:!0,component:It}),a.a.createElement(s.a,{path:"/session:id",component:Rt})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.7a1ba503.chunk.js.map