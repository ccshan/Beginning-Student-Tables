(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(25)},20:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(12),c=n.n(u),l=(n(20),n(2)),o=n(1),i=n(6),s=n(7),m=n(10),f=n(8),E=n(3),p=n(9),v=n(13),h=n.n(v),d={"DARK-RED":g(139,0,0),"FIRE-BRICK":g(178,34,34),"DEEP-PINK":g(255,20,147),"INDIAN-RED":g(205,92,92),"MEDIUM-VIOLET-RED":g(199,21,133),"VIOLET-RED":g(208,32,144),"LIGHT-CORAL":g(240,128,128),"HOT-PINK":g(255,105,180),"PALE-VIOLET-RED":g(219,112,147),"LIGHT-PINK":g(255,182,193),"ROSY-BROWN":g(188,143,143),"LAVENDER-BLUSH":g(255,240,245),"SADDLE-BROWN":g(139,69,19),"DARK-ORANGE":g(255,140,0),"DARK-GOLDENRON":g(184,134,11),"SANDY-BROWN":g(244,164,96),"LIGHT-SALMON":g(255,160,122),"DARK-SALMON":g(233,150,122),"NAVAJO-WHITE":g(255,222,173),"PEACH-PUFF":g(255,218,185),"DARK-KHAKI":g(189,183,107),"PALE-GOLDENROD":g(238,232,170),"BLANCHE-DIAMOND":g(255,235,205),"MEDIUM-GOLDENROD":g(234,234,173),"PAPAYA-WHIP":g(255,239,213),"MISTY-ROSE":g(255,228,225),"LEMON-CHIFFON":g(255,250,205),"ANTIQUE-WHITE":g(250,235,215),"CORN-SILK":g(255,248,220),"LIGHT-GOLDENRON-YELLOW":g(250,250,210),"OLD-LACE":g(253,245,230),"LIGHT-YELLOW":g(255,255,224),"FLORAL-WHITE":g(255,250,240),"LAWN-GREEN":g(124,252,0),"GREEN-YELLOW":g(173,255,47),"YELLOW-GREEN":g(154,205,50),"OLIVE-DRAB":g(107,142,35),"MEDIUM-FOREST-GREEN":g(107,142,35),"DARK-OLIVE-GREEN":g(85,107,47),"DARK-SEA-GREEN":g(143,188,139),"DARK-GREEN":g(0,100,0),"LIME-GREEN":g(50,205,50),"FOREST-GREEN":g(34,139,34),"SPRING-GREEN":g(0,255,127),"MEDIUM-SPRING-GREEN":g(0,250,154),"SEA-GREEN":g(46,139,87),"MEDIUM-SEA-GREEN":g(60,179,113),"LIGHT-GREEN":g(144,238,144),"PALE-GREEN":g(152,251,152),"MEDIUM-AQUAMARINE":g(102,205,170),"LIGHT-SEA-GREEN":g(32,178,170),"MEDIUM-TURQUOISE":g(72,209,204),"MINT-CREAM":g(245,255,250),"ROYAL-BLUE":g(65,105,225),"DODGER-BLUE":g(30,144,255),"DEEP-SKY-BLUE":g(0,191,255),"CORNFLOWER-BLUE":g(100,149,237),"STEEL-BLUE":g(70,130,180),"LIGHT-SKY-BLUE":g(135,206,250),"DARK-TURQUOISE":g(0,206,209),DARKTURQUOISE:g(0,206,209),"SKY-BLUE":g(135,206,235),SKYBLUE:g(135,206,235),"CADET-BLUE":g(96,160,160),"DARK-SLATE-GRAY":g(47,79,79),"LIGHT-STEEL-BLUE":g(176,196,222),"LIGHT-BLUE":g(173,216,230),"POWDER-BLUE":g(176,224,230),"PALE-TURQUOISE":g(175,238,238),"LIGHT-CYAN":g(224,255,255),"ALICE-BLUE":g(240,248,255),"MEDIUM-BLUE":g(0,0,205),"DARK-BLUE":g(0,0,139),"MIDNIGHT-BLUE":g(25,25,112),"BLUE-VIOLET":g(138,43,226),"MEDIUM-SLATE-BLUE":g(123,104,238),"SLATE-BLUE":g(106,90,205),"DARK-SLATE-BLUE":g(72,61,139),"DARK-VIOLET":g(148,0,211),"DARK-ORCHID":g(153,50,204),"MEDIUM-PURPLE":g(147,112,219),"MEDIUM-ORCHID":g(186,85,211),"DARK-MAGENTA":g(139,0,139),"GHOST-WHITE":g(248,248,255),"WHITE-SMOKE":g(245,245,245),"LIGHT-GRAY":g(211,211,211),"DARK-GRAY":g(169,169,169),"DIM-GRAY":g(105,105,105),ORANGE:g(255,165,0),ORANGERED:g(255,69,0),TOMATO:g(255,99,71),DARKRED:g(139,0,0),RED:g(255,0,0),FIREBRICK:g(178,34,34),CRIMSON:g(220,20,60),DEEPPINK:g(255,20,147),MAROON:g(176,48,96),"INDIAN RED":g(205,92,92),INDIANRED:g(205,92,92),"MEDIUM VIOLET RED":g(199,21,133),MEDIUMVIOLETRED:g(199,21,133),"VIOLET RED":g(208,32,144),VIOLETRED:g(208,32,144),LIGHTCORAL:g(240,128,128),HOTPINK:g(255,105,180),PALEVIOLETRED:g(219,112,147),LIGHTPINK:g(255,182,193),ROSYBROWN:g(188,143,143),PINK:g(255,192,203),ORCHID:g(218,112,214),LAVENDERBLUSH:g(255,240,245),SNOW:g(255,250,250),CHOCOLATE:g(210,105,30),SADDLEBROWN:g(139,69,19),BROWN:g(132,60,36),DARKORANGE:g(255,140,0),CORAL:g(255,127,80),SIENNA:g(160,82,45),SALMON:g(250,128,114),PERU:g(205,133,63),DARKGOLDENROD:g(184,134,11),GOLDENROD:g(218,165,32),SANDYBROWN:g(244,164,96),LIGHTSALMON:g(255,160,122),DARKSALMON:g(233,150,122),GOLD:g(255,215,0),YELLOW:g(255,255,0),OLIVE:g(128,128,0),BURLYWOOD:g(222,184,135),TAN:g(210,180,140),NAVAJOWHITE:g(255,222,173),PEACHPUFF:g(255,218,185),KHAKI:g(240,230,140),DARKKHAKI:g(189,183,107),MOCCASIN:g(255,228,181),WHEAT:g(245,222,179),BISQUE:g(255,228,196),PALEGOLDENROD:g(238,232,170),BLANCHEDALMOND:g(255,235,205),"MEDIUM GOLDENROD":g(234,234,173),MEDIUMGOLDENROD:g(234,234,173),PAPAYAWHIP:g(255,239,213),MISTYROSE:g(255,228,225),LEMONCHIFFON:g(255,250,205),ANTIQUEWHITE:g(250,235,215),CORNSILK:g(255,248,220),LIGHTGOLDENRODYELLOW:g(250,250,210),OLDLACE:g(253,245,230),LINEN:g(250,240,230),LIGHTYELLOW:g(255,255,224),SEASHELL:g(255,245,238),BEIGE:g(245,245,220),FLORALWHITE:g(255,250,240),IVORY:g(255,255,240),GREEN:g(0,255,0),LAWNGREEN:g(124,252,0),CHARTREUSE:g(127,255,0),"GREEN YELLOW":g(173,255,47),GREENYELLOW:g(173,255,47),"YELLOW GREEN":g(154,205,50),YELLOWGREEN:g(154,205,50),"MEDIUM FOREST GREEN":g(107,142,35),OLIVEDRAB:g(107,142,35),MEDIUMFORESTGREEN:g(107,142,35),"DARK OLIVE GREEN":g(85,107,47),DARKOLIVEGREEN:g(85,107,47),DARKSEAGREEN:g(143,188,139),LIME:g(0,255,0),"DARK GREEN":g(0,100,0),DARKGREEN:g(0,100,0),"LIME GREEN":g(50,205,50),LIMEGREEN:g(50,205,50),"FOREST GREEN":g(34,139,34),FORESTGREEN:g(34,139,34),"SPRING GREEN":g(0,255,127),SPRINGGREEN:g(0,255,127),"MEDIUM SPRING GREEN":g(0,250,154),MEDIUMSPRINGGREEN:g(0,250,154),"SEA GREEN":g(46,139,87),SEAGREEN:g(46,139,87),"MEDIUM SEA GREEN":g(60,179,113),MEDIUMSEAGREEN:g(60,179,113),AQUAMARINE:g(112,216,144),LIGHTGREEN:g(144,238,144),"PALE GREEN":g(152,251,152),PALEGREEN:g(152,251,152),"MEDIUM AQUAMARINE":g(102,205,170),MEDIUMAQUAMARINE:g(102,205,170),TURQUOISE:g(64,224,208),LIGHTSEAGREEN:g(32,178,170),"MEDIUM TURQUOISE":g(72,209,204),MEDIUMTURQUOISE:g(72,209,204),HONEYDEW:g(240,255,240),MINTCREAM:g(245,255,250),ROYALBLUE:g(65,105,225),DODGERBLUE:g(30,144,255),DEEPSKYBLUE:g(0,191,255),CORNFLOWERBLUE:g(100,149,237),"STEEL BLUE":g(70,130,180),STEELBLUE:g(70,130,180),LIGHTSKYBLUE:g(135,206,250),"DARK TURQUOISE":g(0,206,209),CYAN:g(0,255,255),AQUA:g(0,255,255),DARKCYAN:g(0,139,139),TEAL:g(0,128,128),"SKY BLUE":g(135,206,235),"CADET BLUE":g(96,160,160),CADETBLUE:g(95,158,160),"DARK SLATE GRAY":g(47,79,79),DARKSLATEGRAY:g(47,79,79),LIGHTSLATEGRAY:g(119,136,153),SLATEGRAY:g(112,128,144),"LIGHT STEEL BLUE":g(176,196,222),LIGHTSTEELBLUE:g(176,196,222),"LIGHT BLUE":g(173,216,230),LIGHTBLUE:g(173,216,230),POWDERBLUE:g(176,224,230),PALETURQUOISE:g(175,238,238),LIGHTCYAN:g(224,255,255),ALICEBLUE:g(240,248,255),AZURE:g(240,255,255),"MEDIUM BLUE":g(0,0,205),MEDIUMBLUE:g(0,0,205),DARKBLUE:g(0,0,139),"MIDNIGHT BLUE":g(25,25,112),MIDNIGHTBLUE:g(25,25,112),NAVY:g(36,36,140),BLUE:g(0,0,255),INDIGO:g(75,0,130),"BLUE VIOLET":g(138,43,226),BLUEVIOLET:g(138,43,226),"MEDIUM SLATE BLUE":g(123,104,238),MEDIUMSLATEBLUE:g(123,104,238),"SLATE BLUE":g(106,90,205),SLATEBLUE:g(106,90,205),PURPLE:g(160,32,240),"DARK SLATE BLUE":g(72,61,139),DARKSLATEBLUE:g(72,61,139),DARKVIOLET:g(148,0,211),"DARK ORCHID":g(153,50,204),DARKORCHID:g(153,50,204),MEDIUMPURPLE:g(147,112,219),"CORNFLOWER BLUE":g(68,64,108),"MEDIUM ORCHID":g(186,85,211),MEDIUMORCHID:g(186,85,211),MAGENTA:g(255,0,255),FUCHSIA:g(255,0,255),DARKMAGENTA:g(139,0,139),VIOLET:g(238,130,238),PLUM:g(221,160,221),LAVENDER:g(230,230,250),THISTLE:g(216,191,216),GHOSTWHITE:g(248,248,255),WHITE:g(255,255,255),WHITESMOKE:g(245,245,245),GAINSBORO:g(220,220,220),"LIGHT GRAY":g(211,211,211),LIGHTGRAY:g(211,211,211),SILVER:g(192,192,192),GRAY:g(190,190,190),"DARK GRAY":g(169,169,169),DARKGRAY:g(169,169,169),"DIM GRAY":g(105,105,105),DIMGRAY:g(105,105,105),BLACK:g(0,0,0),TRANSPARENT:g(0,0,0,0)};function g(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;if(e<0||e>255||t<0||t>255||n<0||n>255||r<0||r>255)throw new Error("r g b a values must be between 0 and 255 (inclusive)");return{r:e,g:t,b:n,a:r}}function y(e,t){return g(e.r,e.g,e.b,t)}function b(e){if(e<0)throw new Error("shape dimensions must be non-negative");return e}function O(e){if("string"===typeof e){var t=d[e.replace(" ","").toUpperCase()];if(void 0===t)throw new Error("".concat(e," is not a valid color"));return t}return e}function w(e){if("solid"!==e&&"outline"!==e)throw new Error("".concat(e," is not a valid mode"));return e}function L(e){if("middle"===e)return"center";if("left"!==e&&"right"!==e&&"center"!==e)throw new Error("".concat(e," is not a valid x-place"));return e}function R(e){if("middle"===e)return"center";if("top"!==e&&"bottom"!==e&&"center"!==e)throw new Error("".concat(e," is not a valid y-place"));return e}function I(e,t,n,r){return"string"===typeof n?{width:b(e),height:b(t),mode:w(n),color:O(r),type:"rect"}:{width:b(e),height:b(t),mode:"solid",color:y(O(r),n),type:"rect"}}function N(e,t,n){return function(e,t,n,r,a){return"string"===typeof r?{A:b(e),B:b(t),C:b(n),mode:w(r),color:O(a),type:"triangle"}:{A:b(e),B:b(t),C:b(n),mode:"solid",color:y(O(a),r),type:"triangle"}}(e,e,e,t,n)}function A(e){return{images:e,yplace:R(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center"),type:"beside"}}function x(e){return{images:e,xplace:L(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center"),type:"above"}}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center";return{images:e,xplace:L(t),yplace:R(n),type:"overlay"}}function C(e,t,n,r){return{image:e,x:t,y:n,scene:r,type:"place"}}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"white";return D([I(e,t,"outline","black"),I(e,t,"solid",n)])}function U(e){switch(e.type){case"circle":return 2*e.r;case"rect":return e.width;case"triangle":return e.A;case"polygon":return e.coordinates.map(function(e){return e.x}).reduce(function(e,t){return Math.max(e,t)});case"beside":return e.images.reduce(function(e,t){return e+U(t)},0);case"above":case"overlay":return e.images.reduce(function(e,t){return Math.max(e,U(t))},0);case"place":return U(e.scene);default:return new Error("Unknown Image Type: ".concat(e.type))}}function S(e){switch(e.type){case"circle":return 2*e.r;case"rect":return e.height;case"triangle":var t=(e.A+e.B+e.C)/2,n=Math.sqrt(t*(t-e.A)*(t-e.B)*(t-e.C));return Math.round(2*n/e.A);case"polygon":return e.coordinates.map(function(e){return e.y}).reduce(function(e,t){return Math.max(e,t)});case"beside":return e.images.reduce(function(e,t){return Math.max(e,S(t))},0);case"above":return e.images.reduce(function(e,t){return e+S(t)},0);case"overlay":return e.images.reduce(function(e,t){return Math.max(e,S(t))},0);case"place":return S(e.scene);default:return new Error("Unknown Image Type: ".concat(e.type))}}function j(e,t,n){switch(e.type){case"circle":return function(e,t,n){var r=e.color.r,u=e.color.g,c=e.color.b,l=e.color.a/255;switch(e.mode){case"solid":return a.a.createElement("circle",{cx:t+e.r,cy:n+e.r,r:e.r,fill:"rgba(".concat(r,", ").concat(u,", ").concat(c,", ").concat(l,")")});case"outline":return a.a.createElement("circle",{cx:t+e.r,cy:n+e.r,r:e.r-.5,fill:"none",stroke:"rgba(".concat(r,", ").concat(u,", ").concat(c,", ").concat(l,")"),strokeWidth:1});default:throw new Error("Unknown Image Mode: ".concat(e.mode))}}(e,t,n);case"rect":return function(e,t,n){var r=e.color.r,u=e.color.g,c=e.color.b,l=e.color.a/255;switch(e.mode){case"solid":return a.a.createElement("rect",{x:t,y:n,width:e.width,height:e.height,fill:"rgba(".concat(r,", ").concat(u,", ").concat(c,", ").concat(l,")")});case"outline":return a.a.createElement("rect",{x:t+.5,y:n+.5,width:e.width-1,height:e.height-1,fill:"none",stroke:"rgba(".concat(r,", ").concat(u,", ").concat(c,", ").concat(l,")"),strokeWidth:1});default:throw new Error("Unknown Image Mode: ".concat(e.mode))}}(e,t,n);case"triangle":return function(e,t,n){var r=e.color.r,u=e.color.g,c=e.color.b,l=e.color.a/255,o=Math.round(Math.sqrt(Math.pow(e.B,2)-Math.pow(S(e),2))),i={x:t,y:n+S(e)},s={x:t+o,y:n},m={x:t+U(e),y:n+S(e)};switch(e.mode){case"solid":return a.a.createElement("polygon",{points:"".concat(i.x,",").concat(i.y," ").concat(s.x,",").concat(s.y," ").concat(m.x,",").concat(m.y),fill:"rgba(".concat(r,", ").concat(u,", ").concat(c,", ").concat(l,")")});case"outline":return a.a.createElement("polygon",{points:"".concat(i.x,",").concat(i.y," ").concat(s.x,",").concat(s.y," ").concat(m.x,",").concat(m.y),fill:"none",stroke:"rgba(".concat(r,", ").concat(u,", ").concat(c,", ").concat(l,")"),strokeWidth:1});default:throw new Error("Unknown Image Mode: ".concat(e.mode))}}(e,t,n);case"polygon":return function(e,t,n){var r=e.color.r,u=e.color.g,c=e.color.b,l=e.color.a/255,o=e.coordinates.map(function(e){return"".concat(e.x+t,",").concat(e.y+n)}).reduce(function(e,t){return e+" "+t});switch(e.mode){case"solid":return a.a.createElement("polygon",{points:o,fill:"rgba(".concat(r,", ").concat(u,", ").concat(c,", ").concat(l,")")});case"outline":return a.a.createElement("polygon",{points:o,fill:"none",stroke:"rgba(".concat(r,", ").concat(u,", ").concat(c,", ").concat(l,")"),strokeWidth:1});default:throw new Error("Unknown Image Mode: ".concat(e.mode))}}(e,t,n);case"beside":return function(e,t,n){var r=n,a=function(e,t){return e};switch(e.yplace){case"top":break;case"center":r=n+S(e)/2,a=function(e,t){return e-t/2};break;case"bottom":r=n+S(e),a=function(e,t){return e-t};break;default:throw new Error("Unknown y-place: ".concat(e.yplace))}return M(function(e,t){return e},a,function(e,t){return e+t},function(e,t){return e})(e.images,t,r)}(e,t,n);case"above":return function(e,t,n){var r=t,a=function(e,t){return e};switch(e.xplace){case"left":break;case"center":r=t+U(e)/2,a=function(e,t){return e-t/2};break;case"right":r=t+U(e),a=function(e,t){return e-t};break;default:throw new Error("Unknown x-place: ".concat(e.xplace))}return M(a,function(e,t){return e},function(e,t){return e},function(e,t){return e+t})(e.images,r,n)}(e,t,n);case"overlay":return function(e,t,n){var r=t,a=n,u=function(e,t){return e},c=function(e,t){return e};switch(e.xplace){case"left":break;case"center":r=t+U(e)/2,u=function(e,t){return e-t/2};break;case"right":r=t+U(e),u=function(e,t){return e-t};break;default:throw new Error("Unknown x-place: ".concat(e.xplace))}switch(e.yplace){case"top":break;case"center":a=n+S(e)/2,c=function(e,t){return e-t/2};break;case"bottom":a=n+S(e),c=function(e,t){return e-t};break;default:throw new Error("Unknown y-place: ".concat(e.yplace))}return M(u,c,function(e,t){return e},function(e,t){return e})(e.images,r,a)}(e,t,n);case"place":return function(e,t,n){return[j(e.scene,t,n),j(e.image,t+e.x-U(e.image)/2,n+e.y-S(e.image)/2)]}(e,t,n);default:throw new Error("Unknown Image Type: ".concat(e.type))}}function M(e,t,n,r){return function a(u,c,l){if(0===u.length)throw new Error("I need at least 1 image to render!");var i=U(u[0]),s=S(u[0]),m=j(u[0],e(c,i),t(l,s));if(1===u.length)return[m];var f=a(u.slice(1),n(c,i),r(l,s));return[].concat(Object(o.a)(f),[m])}}function k(e){var t=j(e,0,0);return a.a.createElement("svg",{viewBox:"0 0 ".concat(U(e)," ").concat(S(e)),xmlns:"http://www.w3.org/2000/svg",width:U(e),height:S(e),key:Math.round(1e8*Math.random())},t)}var G=0,B=1,H=2,K=3,V=4,P=5,Y=6,F=7,W=8,_=9,z=10,Q=11,$=12,J=/^[^\s",'`()[\]{}|;#]+/,q=/^\(/,X=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?=$|[\s",'`()[\]{}|;#])/,Z=/^#(?:[tfTF]|true|false)(?=$|[\s",'`()[\]{}|;#])/,ee=/^"[^\\"]*"/,te=/^'/,ne=/^[^\s",'`()[\]{}|;#]+/,re=/^\(/,ae=Ee("posn",["x","y"],[{name:"+",binding:{type:H,value:function(e){if(e.length<2)throw new Error("arity mismatch");return e.forEach(function(e){return fe(e,[K])}),e.reduce(function(e,t){return{value:e.value+t.value,type:K}})}}},{name:"add1",binding:{type:H,value:function(e){if(1!==e.length)throw new Error("arity mismatch");return fe(e[0],[K]),{value:e[0].value+1,type:K}}}},{name:"-",binding:{type:H,value:function(e){if(e.length<1)throw new Error("arity mismatch");if(e.forEach(function(e){return fe(e,[K])}),1===e.length)return{value:0-e[0].value,type:K};return e.reduce(function(e,t){return{value:e.value-t.value,type:K}})}}},{name:"sub1",binding:{type:H,value:function(e){if(1!==e.length)throw new Error("arity mismatch");return fe(e[0],[K]),{value:e[0].value-1,type:K}}}},{name:"*",binding:{type:H,value:function(e){if(e.length<2)throw new Error("arity mismatch");return e.forEach(function(e){return fe(e,[K])}),e.reduce(function(e,t){return{value:e.value*t.value,type:K}})}}},{name:"/",binding:{type:H,value:function(e){if(e.forEach(function(e){return fe(e,[K])}),1===e.length){var t=e[0];return fe(t,[K]),{value:1/t.value,type:K}}if(2===e.length){var n=e[0],r=e[1];return fe(n,[K]),fe(r,[K]),{value:n.value/r.value,type:K}}return{value:!1,type:V}}}},{name:"car",binding:{type:H,value:ve}},{name:"first",binding:{type:H,value:ve}},{name:"cdr",binding:{type:H,value:he}},{name:"rest",binding:{type:H,value:he}},{name:"cons",binding:{type:H,value:function(e){if(2!==e.length)throw new Error("arity mismatch");var t=e[0],n=e[1];return fe(n,[Y]),{value:{a:t,d:n},type:Y}}}},{name:"list",binding:{type:H,value:function(e){return e.reverse().reduce(function(e,t){return{value:{a:t,d:e},type:Y}},{value:null,type:Y})}}},{name:"not",binding:{type:H,value:function(e){if(1!==e.length)throw new Error("arity mismatch");return{value:!1===e[0].value,type:V}}}},{name:"and",binding:{type:H,value:function(e){return e.reduce(function(e,t){return!1!==e.value?t:{value:!1,type:V}},{value:!0,type:V})}}},{name:"or",binding:{type:H,value:function(e){return e.reduce(function(e,t){return!1!==e.value?e:t},{value:!0,type:V})}}},{name:"eqv?",binding:{type:H,value:function(e){if(2!==e.length)throw new Error("arity mismatch");var t=e[0],n=e[1];return{value:t.value===n.value,type:V}}}},{name:"null?",binding:{type:H,value:de}},{name:"empty?",binding:{type:H,value:de}},{name:"cons?",binding:{type:H,value:function(e){if(1!==e.length)throw new Error("arity mismatch");var t=e[0];return{value:null!==t.value&&t.type===Y,type:V}}}},{name:"=",binding:{type:H,value:function(e){e.forEach(function(e){return fe(e,[K])});var t=e.reduce(function(e,t){return!1===e.value?{value:!1,type:V}:e.value===t.value?e:{value:!1,type:V}});return!1===t.value?t:{value:!0,type:V}}}},{name:">",binding:{type:H,value:function(e){e.forEach(function(e){return fe(e,[K])});var t=e.reduce(function(e,t){return!1===e.value?{value:!1,type:V}:e.value>t.value?e:{value:!1,type:V}});return!1===t.value?t:{value:!0,type:V}}}},{name:">=",binding:{type:H,value:function(e){e.forEach(function(e){return fe(e,[K])});var t=e.reduce(function(e,t){return!1===e.value?{value:!1,type:V}:e.value>=t.value?e:{value:!1,type:V}});return!1===t.value?t:{value:!0,type:V}}}},{name:"<",binding:{type:H,value:function(e){e.forEach(function(e){return fe(e,[K])});var t=e.reduce(function(e,t){return!1===e.value?{value:!1,type:V}:e.value<t.value?e:{value:!1,type:V}});return!1===t.value?t:{value:!0,type:V}}}},{name:"<=",binding:{type:H,value:function(e){e.forEach(function(e){return fe(e,[K])});var t=e.reduce(function(e,t){return!1===e.value?{value:!1,type:V}:e.value<=t.value?e:{value:!1,type:V}});return!1===t.value?t:{value:!0,type:V}}}},{name:"string-length",binding:{type:H,value:function(e){if(1!==e.length)throw new Error("arity mismatch");var t=e[0];return fe(t,[P]),{value:t.value.length,type:K}}}},{name:"string-append",binding:{type:H,value:function(e){if(e.length<2)throw new Error("arity mismatch");return e.forEach(function(e){return fe(e,[P])}),e.reduce(function(e,t){return{value:e.value+t.value,type:P}})}}},{name:"string=?",binding:{type:H,value:function(e){e.forEach(function(e){return fe(e,[P])});var t=e.map(function(e){return e.value}).reduce(function(e,t){return!1!==e&&(e===t&&e)});return!1!==t?{value:!0,type:V}:{value:t,type:V}}}},{name:"circle",binding:{type:H,value:function(e){if(e.length<3)throw new Error("arity mismatch");var t=e[0],n=e[1],r=e[2];return fe(t,[K]),fe(n,[K,P,F]),fe(r,[P,F,_]),{value:(a=t.value,u=n.value,c=r.value,"string"===typeof u?{r:b(a),mode:w(u),color:O(c),type:"circle"}:{r:b(a),mode:"solid",color:y(O(c),u),type:"circle"}),type:W};var a,u,c}}},{name:"rectangle",binding:{type:H,value:function(e){if(e.length<4)throw new Error("arity mismatch");var t=e[0],n=e[1],r=e[2],a=e[3];return fe(t,[K]),fe(n,[K]),fe(r,[K,P,F]),fe(a,[P,F,_]),{value:I(t.value,n.value,r.value,a.value),type:W}}}},{name:"square",binding:{type:H,value:function(e){if(e.length<3)throw new Error("arity mismatch");var t=e[0],n=e[1],r=e[2];return fe(t,[K]),fe(n,[K,P,F]),fe(r,[P,F,_]),{value:I(t.value,t.value,n.value,r.value),type:W}}}},{name:"triangle",binding:{type:H,value:function(e){if(e.length<3)throw new Error("arity mismatch");var t=e[0],n=e[1],r=e[2];return fe(t,[K]),fe(n,[K,P,F]),fe(r,[P,F,_]),{value:N(t.value,n.value,r.value),type:W}}}},{name:"beside",binding:{type:H,value:function(e){if(e.length<2)throw new Error("arity mismatch");return e.forEach(function(e){return fe(e,[W])}),{value:A(e.map(function(e){return e.value})),type:W}}}},{name:"beside/align",binding:{type:H,value:function(e){if(e.length<3)throw new Error("arity mismatch");var t=e[0],n=e.slice(1);return fe(t,[P,F]),n.forEach(function(e){return fe(e,[W])}),{value:A(n.map(function(e){return e.value}),t.value),type:W}}}},{name:"above",binding:{type:H,value:function(e){if(e.length<2)throw new Error("arity mismatch");return e.forEach(function(e){return fe(e,[W])}),{value:x(e.map(function(e){return e.value})),type:W}}}},{name:"above/align",binding:{type:H,value:function(e){if(e.length<3)throw new Error("arity mismatch");var t=e[0],n=e.slice(1);return fe(t,[P,F]),n.forEach(function(e){return fe(e,[W])}),{value:x(n.map(function(e){return e.value}),t.value),type:W}}}},{name:"overlay",binding:{type:H,value:function(e){if(e.length<2)throw new Error("arity mismatch");return e.forEach(function(e){return fe(e,[W])}),{value:D(e.map(function(e){return e.value})),type:W}}}},{name:"overlay/align",binding:{type:H,value:function(e){if(e.length<4)throw new Error("arity mismatch");var t=e[0],n=e[1],r=e.slice(2);return fe(t,[P,F]),fe(n,[P,F]),r.forEach(function(e){return fe(e,[W])}),{value:D(r.map(function(e){return e.value}),t.value,n.value),type:W}}}},{name:"place-image",binding:{type:H,value:function(e){if(e.length<4)throw new Error("arity mismatch");var t=e[0],n=e[1],r=e[2],a=e[3];return fe(t,[W]),fe(n,[K]),fe(r,[K]),fe(a,[W]),{value:C(t.value,n.value,r.value,a.value),type:W}}}},{name:"empty-scene",binding:{type:H,value:function(e){if(e.length<2)throw new Error("arity mismatch");var t,n=e[0],r=e[1],a=e[2];fe(n,[K]),fe(r,[K]),void 0!==a?(fe(a,[_,P,F]),t=T(n.value,r.value,a.value)):t=T(n.value,r.value);return{value:t,type:W}}}},{name:"color",binding:{type:H,value:function(e){if(e.length<3)throw new Error("arity mismatch");var t,n=e[0],r=e[1],a=e[2],u=e[3];fe(n,[K]),fe(r,[K]),fe(a,[K]),void 0!==u?(fe(u,[K]),t=g(n.value,r.value,a.value,u.value)):t=g(n.value,r.value,a.value);return{value:t,type:_}}}},{name:"true",binding:{type:V,value:!0}},{name:"false",binding:{type:V,value:!1}},{name:"null",binding:{type:Y,value:null}},{name:"empty",binding:{type:Y,value:null}}]);function ue(e){if(X.test(e)){var t=e.match(X)[0],n=e.slice(t.length).trim();return{prog:{value:+t,type:K},rest:n}}if(J.test(e)){var r=e.match(J)[0],a=e.slice(r.length).trim();return{prog:{value:r,type:G},rest:a}}if(Z.test(e)){var u=e.match(Z)[0],c=e.slice(u.length).trim();return{prog:{value:"t"===u[1].toLowerCase(),type:V},rest:c}}if(ee.test(e)){var l=e.match(ee);return{prog:{value:l[0].substring(1,l[0].length-1),type:P},rest:e.slice(l[0].length).trim()}}if(q.test(e)){var i=ue(e=e.slice(1).trim()),s=i.prog;e=i.rest;for(var m,f=[];")"!==e[0];){var E=ue(e);f=[].concat(Object(o.a)(f),[E.prog]),e=E.rest}if("or"===s.value){if(2!==f.length)throw f.length,new SyntaxError('Invalid Syntax: "'+e+'"');m={value:{tst:f[0],els:f[1],thn:{value:!0,type:V}},type:z}}else if("and"===s.value){if(2!==f.length)throw f.length,new SyntaxError('Invalid Syntax: "'+e+'"');m={value:{tst:f[0],thn:f[1],els:{value:!1,type:V}},type:z}}else if("if"===s.value){if(3!==f.length)throw new SyntaxError('Invalid Syntax: "'+e+'"');m={value:{tst:f[0],thn:f[1],els:f[2]},type:z}}else m={value:{funct:s,args:f},type:B};return{prog:m,rest:e.slice(1).trim()}}if(te.test(e))return function e(t){if(re.test(t)){t=t.slice(1).trim();for(var n=[];")"!==t[0];){var r=e(t);n=[r.prog].concat(Object(o.a)(n)),t=r.rest}var a=t.slice(1).trim(),u=n.reduce(function(e,t){return{value:{a:t,d:e},type:Y}},{value:null,type:Y});return{prog:u,rest:a}}if(X.test(t)){var c=t.match(X),l=c[0],i=t.slice(l.length).trim(),s={value:+l,type:K};return{prog:s,rest:i}}if(Z.test(t)){var m=t.match(Z),f=m[0],E=t.slice(f.length).trim(),p={value:"t"===f.charAt(1).toLowerCase(),type:V};return{prog:p,rest:E}}if(ee.test(t)){var v=t.match(ee),h=v[0].substring(1,v[0].length-1),d={value:h,type:P},g=t.slice(v[0].length).trim();return{prog:d,rest:g}}if(ne.test(t)){var y=t.match(ne),b=y[0],O={value:b,type:F},w=t.slice(y[0].length).trim();return{prog:O,rest:w}}throw new SyntaxError('Invalid Syntax: "'+t+'"')}(e.slice(1).trim());throw new SyntaxError('Invalid Syntax: "'+e+'"')}function ce(e){var t=/^\(\s*define-struct(?=$|[\s",'`()[\]{}|;#])/,n=/^\(\s*define(?=$|[\s",'`()[\]{}|;#])/,r=/^(?!-?(?:\d+(?:\.\d*)?|\.\d+)(?=$|[\s",'`()[\]{}|;#]))[^\s",'`()[\]{}|;#]+/;e=(e=e.replace(/;.*/g,"")).trim();for(var a=[];""!==e;){var u=c(e);e=u.rest,a=[].concat(Object(o.a)(a),[u.prog])}return a;function c(e){if(t.test(e)){var a=/[([]/;if(e=e.slice(e.match(t)[0].length).trim(),!r.test(e))throw new Error("Invalid Struct Name");var u=e.match(r)[0];if(e=e.slice(u.length).trim(),!a.test(e))throw new Error("Invalid Struct Definition");var c,l=e.match(a)[0];e=e.slice(l.length).trim(),"("===l?c=")":"["===l&&(c="]");for(var i=[];e[0]!==c;){if(!r.test(e))throw new Error("Invalid Field Name");var s=e.match(r)[0];e=(e=e.slice(s.length)).trim(),i=[].concat(Object(o.a)(i),[s])}if(")"!==(e=e.slice(1).trim())[0])throw new Error("Invalid Struct Definition");return{prog:{superID:u,fieldIDs:i,type:"struct"},rest:e=e.slice(1).trim()}}if(n.test(e)){var m,f,E=/^\(/;if(e=e.slice(e.match(n)[0].length).trim(),r.test(e)){m=e.match(r)[0];var p=ue(e=e.slice(m.length).trim());f=p.prog,e=p.rest.trim()}else{if(!E.test(e))throw new Error("Invalid Prefix Form: ".concat(e));if(e=e.slice(e.match(E)[0].length).trim(),!r.test(e))throw new Error("Invalid Prefix Form: ".concat(e));m=e.match(r)[0],e=e.slice(m.length).trim();for(var v=[];")"!==e[0];){if(!r.test(e))throw new Error("Invalid Prefix Form: ".concat(e));var h=e.match(r)[0];e=e.slice(h.length).trim(),v=[].concat(Object(o.a)(v),[h])}var d=ue(e=e.slice(1).trim()),g=d.prog;e=(e=d.rest).trim(),f={value:{parameters:v,body:g},type:$}}if(")"!==e[0])throw new Error("Invalid Prefix Form: ".concat(e));return{prog:{name:m,binding:f,type:"define"},rest:e=e.slice(1).trim()}}throw new Error("Invalid Prefix Form: ".concat(e))}}function le(e,t){switch(e.type){case K:case V:case P:case Y:case F:return e;case G:return function(e){var n=t.reduce(function(t,n){return void 0!==t?t:n.name===e?n.binding:void 0},void 0);if(void 0===n)throw new ReferenceError(e+" isn't defined");return n}(e.value);case H:return e;case $:return{value:{parameters:e.value.parameters,body:e.value.body,env:t},type:$};case z:var n=le(e.value.tst,t);return fe(n,[V]),n.value?le(e.value.thn,t):le(e.value.els,t);case B:var r="anonymous";(function(e){return e.type===G})(e.value.funct)&&(r=e.value.funct.value);var a=le(e.value.funct,t),u=e.value.args.map(function(e){return le(e,t)});switch(a.type){case H:return a.value(u);case $:if(u.length!==a.value.parameters.length)throw new Error("Arity Mismatch: ".concat(r," expects ").concat(a.value.parameters.length," arguments but got ").concat(u.length));var c=[].concat(Object(o.a)(a.value.env),Object(o.a)(a.value.parameters.map(function(e,t){return{name:e,binding:u[t]}})));return le(a.value.body,c);default:fe(a,[H])}break;case W:case _:return e;default:throw new TypeError("Unknown Type "+e.value)}}function oe(e,t){return e.reduce(function(e,t){switch(t.type){case"struct":return Ee(t.superID,t.fieldIDs,e);case"define":return function(e,t,n){switch(t.type){case $:var r={name:e,binding:le(t,n)};return[].concat(Object(o.a)(n),[r]);default:var a={name:e,binding:le(t,n)};return[].concat(Object(o.a)(n),[a])}}(t.name,t.binding,e);default:throw new Error("Invalid Prefix Prog")}},t)}function ie(e){switch(e.type){case K:return[e.value];case V:return["#"+e.value];case P:return['"'.concat(e.value,'"')];case Y:return null===e.value?["'()"]:["(cons "].concat(Object(o.a)(ie(e.value.a)),[" "],Object(o.a)(ie(e.value.d)),[")"]);case F:return["'"+e.value];case G:return[e.value];case H:return["#<procedure>"];case $:return["#<user_defined_procedure>"];case B:return["("].concat(Object(o.a)(ie(e.value.funct)),Object(o.a)(e.value.args.map(ie).reduce(function(e,t){return[].concat(Object(o.a)(e),[" "],Object(o.a)(t))},"")),[")"]);case W:return[k(e.value)];case _:return["#<color>"];case Q:return["(make-".concat(e.value.id)].concat(Object(o.a)(e.value.fields.map(function(e){return ie(e.binding)}).reduce(function(e,t){return[].concat(Object(o.a)(e),[" "],Object(o.a)(t))},"")),[")"]);default:return"error or something"}}function se(e){switch(e.type){case K:return[e.value];case V:return["#"+e.value];case P:return['"'.concat(e.value,'"')];case Y:if(null===e.value)return["'()"];for(var t=[];null!==e.value;)t=[].concat(Object(o.a)(t),[" "],Object(o.a)(se(e.value.a))),e=e.value.d;return["(list"].concat(Object(o.a)(t),[")"]);case F:return["'"+e.value];case G:return[e.value];case H:return["#<procedure>"];case $:return["#<user_defined_procedure>"];case B:return["("].concat(Object(o.a)(se(e.value.funct)),Object(o.a)(e.value.args.map(se).reduce(function(e,t){return[].concat(Object(o.a)(e),[" "],Object(o.a)(t))},"")),[")"]);case W:return[k(e.value)];case _:return["#<color>"];case Q:return["(make-".concat(e.value.id)].concat(Object(o.a)(e.value.fields.map(function(e){return se(e.binding)}).reduce(function(e,t){return[].concat(Object(o.a)(e),[" "],Object(o.a)(t))},"")),[")"]);default:return"error or something"}}function me(e){var t=ue(e);switch(t.rest){case"":break;default:throw new SyntaxError("Parsing Error")}return t.prog}function fe(e,t){if(!t.includes(e.type)){var n=t.map(function(e){switch(e){case G:return"variable";case B:return"application";case H:return"function";case $:return"closure";case K:return"number";case V:return"boolean";case P:return"string";case Y:return"list";case F:return"symbol";case W:return"image";case _:return"color";default:return"???"}}).reduce(function(e,t){return e+" or a ".concat(t)}),r=new TypeError;throw r.message=a.a.createElement(a.a.Fragment,null,[ie(e)," ain't a "+n]),r}}function Ee(e,t,n){var r=t.length;var a=t.map(function(t){return function(n){if(1!==n.length)throw new Error("".concat(e,"-").concat(t,": arity mismatch, expected 1 argument but given ").concat(n.length));if(n[0].type!==Q||n[0].value.id!==e)throw new Error("".concat(e,"-").concat(t,": expects a ").concat(e));return n[0].value.fields.reduce(function(e,n){return void 0!==e?e:n.id===t?n.binding:void 0},void 0)}}),u=[{name:"make-".concat(e),binding:{type:H,value:function(n){if(n.length!==r)throw new Error("make-".concat(e,": arity mismatch, expected ").concat(r," arguments but given ").concat(n.length));var a=n.map(function(e,n){return{id:t[n],binding:e}});return{value:{id:e,fields:a},type:Q}}}},{name:"".concat(e,"?"),binding:{type:H,value:function(t){if(1!==t.length)throw new Error("".concat(e,"?: arity mismatch, expected 1 argument but given ").concat(t.length));var n=t[0];return{value:n.type===Q&&n.value.id===e,type:V}}}}].concat(Object(o.a)(a.map(function(n,r){return{name:"".concat(e,"-").concat(t[r]),binding:{type:H,value:n}}})));return[].concat(Object(o.a)(n),Object(o.a)(u))}function pe(e){return e.type===V}function ve(e){if(1!==e.length)throw new Error("arity mismatch");var t=e[0];if(fe(t,[Y]),null===t.value)throw new Error("expected a cons, but given empty list");return t.value.a}function he(e){if(1!==e.length)throw new Error("arity mismatch");var t=e[0];if(null===t.value)throw new Error("expected a cons, but given empty list");return fe(t,[Y]),t.value.d}function de(e){if(1!==e.length)throw new Error("arity mismatch");var t=e[0];return{value:null===t.value&&t.type===Y,type:V}}var ge={gray:"gray"},ye={pink:"pink"},be={yellow:"yellow"};function Oe(e){return 0!==e.length&&!e.every(function(e){return e===ge})&&e.every(function(e){return e===ge||pe(e)})}function we(e){return Oe(e.outputs)||void 0!==e.thenChildren}var Le=function(){return{type:"NIL"}},Re={type:"nil"};function Ie(e){return""===e?Re:{type:"text",text:String(e)}}var Ne={type:"line"};function Ae(e,t){if("function"!==typeof t)throw new Error("docR isn't a thunk");return{type:"union",left:e,right:t}}function xe(e,t){if("function"!==typeof t)throw new Error("docR isn't a thunk");switch(e.type){case"nil":return t();case"concat":return{type:"concat",left:e.left,right:function(){return xe(e.right(),t)}};case"union":return Ae(xe(e.left,t),function(){return xe(e.right(),t)});default:return{type:"concat",left:e,right:t}}}function De(e,t){switch(t.type){case"nil":return Re;case"concat":return xe(De(e,t.left),function(){return De(e,t.right())});case"nest":return{type:"nest",indent:t.indent+e,rest:t.rest};case"text":return t;case"line":return{type:"nest",indent:e,rest:t};case"union":return Ae(De(e,t.left),function(){return De(e,t.right())});default:throw Error("unnexpected document type: ".concat(t.type))}}function Ce(e){return Ae(function e(t){switch(t.type){case"nil":return Re;case"concat":return xe(e(t.left),function(){return e(t.right())});case"nest":return e(t.rest);case"text":return t;case"line":return Ie(" ");case"union":return e(t.left);default:throw Error("unnexpected document type: ".concat(t.type))}}(e),function(){return e})}function Te(e,t){function n(t,n,a){return function t(n,a,u){if(0===u.length)return Le;var c=u[0].doc;var l=u[0].indent;var i=u.slice(1);switch(c.type){case"nil":return t(n,a,i);case"concat":return t(n,a,[{indent:l,doc:c.left},{indent:l,doc:c.right()}].concat(Object(o.a)(i)));case"nest":return t(n,a,[{indent:l+c.indent,doc:c.rest}].concat(Object(o.a)(i)));case"text":return""===c.text?Le:r(function(){return{type:"TEXT",text:c.text,rest:r(function(){return t(n,a+c.text.length,i)()})}});case"line":return r(function(){return{type:"LINE",indent:l,rest:r(function(){return t(n+l,l,i)()})}});case"union":return s=n,m=a,f=t(n,a,[{indent:l,doc:c.left}].concat(Object(o.a)(i))),E=r(function(){return t(n,a,[{indent:l,doc:c.right()}].concat(Object(o.a)(i)))()}),function e(t,n,r){if(t<0||n<0)return!1;var a=r();switch(a.type){case"NIL":return!0;case"TEXT":return e(t-a.text.length,n-a.text.length,a.rest);case"LINE":return!0;default:throw Error("unnexpected DOCUMENT type: ".concat(a.type))}}(e-m,s-m,f)?f:E;default:throw console.log(c()),Error("unnexpected document type: ".concat(c.type))}var s,m,f,E}(t,n,[{indent:0,doc:a}])}function r(e){var t,n=!1;return function(){return n?t:(n=!0,t=e())}}return function(e){return function e(t){var n=t();switch(n.type){case"NIL":return"";case"TEXT":return n.text+e(n.rest);case"LINE":return"\n"+" ".repeat(n.indent)+e(n.rest);default:throw Error("unnexpected DOCUMENT type: ".concat(n.type))}}(n(t,0,e))}}function Ue(e,t){return xe(e,function(){return xe(Ie(" "),function(){return t})})}function Se(e,t){return xe(e,function(){return xe(Ne,function(){return t})})}function je(e,t){return xe(e,function(){return t})}function Me(e,t){return 0===t.length?Re:1===t.length?t[0]:e(t[0],Me(e,t.slice(1)))}function ke(e){return Me(Ue,e)}function Ge(e){return Me(Se,e)}function Be(e,t,n){return Me(je,[Ie(e),t,Ie(n)])}function He(e){switch(e.type){case G:return Ie(e.value);case B:return De(1,Be("(",Ce(Ge([He(e.value.funct)].concat(Object(o.a)(e.value.args.map(He))))),")"));case H:return Ie("function");case K:return Ie(e.value);case V:return Ie("#"+e.value);case P:return Ie('"'+e.value+'"');case Y:return null===e.value?Ie("'()"):De(1,Be("(",Ce(Ge([Ie("cons"),He(e.value.a),He(e.value.d)])),")"));case F:return Ie("'"+e.value);default:throw new Error("unknown program type")}}function Ke(e){switch(e.type){case G:return Ie(e.value);case B:return De(1,Be("(",Ce(Ge([Ke(e.value.funct)].concat(Object(o.a)(e.value.args.map(Ke))))),")"));case H:return Ie("function");case K:return Ie(e.value);case V:return Ie("#"+e.value);case P:return Ie('"'+e.value+'"');case Y:if(null===e.value)return Ie("'()");for(var t=e.value.d,n=Ke(e.value.a);null!==t.value;)n=Ge([n,Ke(t.value.a)]),t=t.value.d;return Be("(",ke([Ie("list"),Ce(n)]),")");case F:return Ie("'"+e.value);default:throw new Error("unknown program type")}}Te(1/0,1/0);var Ve=function(e,t,n,r){var a;a="cons"===t?He:Ke;var u=Te(n,r);return e.map(function(e){return function(e){var t=c(e.name),n=c(e.signature),r=c(e.purpose),a=ke(e.params.map(function(e){return c(e.name)})),l=e.examples.map(function(e){var n=Ge(e.inputs.map(function(e){return c(e.prog)})),r=c(e.want);return u(De(1,Be("(",Ce(Ge([Ie("check-expect"),Be("(",De(1,Ge([t,n])),")"),r])),")")))}).join("\n"),i=function e(t){var n,r=function(e){var t=e.filter(we),n=e.filter(function(e){return!we(e)});return{bools:t,nonbools:n}}(t),a=Ge(r.nonbools.map(function(e){return c(e.prog)}));if(0!==r.bools.length){var u=r.bools.map(function(t){return De(1,Be("[",Ge([c(t.prog),e(t.thenChildren)]),"]"))});n=De(2,Be("(",Ge([Ie("cond")].concat(Object(o.a)(u))),")"))}return 0!==r.bools.length&&0!==r.nonbools.length?Ge([n,a]):0!==r.bools.length?n:0!==r.nonbools.length?a:Re}(e.formulas),s=u(ke([Ie(";;"),t,Ie(":"),n])),m=u(ke([Ie(";;"),r])),f=u(De(2,Be("(",ke([Ie("define"),Ge([Be("(",ke([t,a]),")"),i])]),")")));return[s,m,f,"",l].join("\n")}(e)}).join("\n\n");function c(e){return e===be?Ie("..."):"string"===typeof e?Ie(e):a(e)}};var Pe=function(e,t){var n="http://107.170.76.216:8000/log/session"+t,r=!1;return function t(){if(r){var a=r;fetch(n,{method:"POST",body:a,mode:"no-cors",headers:{"Content-Type":"application/json"}}).then(function(){setTimeout(t,e)},function(){r||(r=a),setTimeout(t,e)}),r=!1}else setTimeout(t,e)}(),function(e){r=e}},Ye=n(5),Fe=(n(24),{yo:"don't actually change anything"}),We=/^[^\s",'`()[\]{}|;#]+$/,_e=0;function ze(){return _e++}function Qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return _e+e}var $e=ie,Je="cons";function qe(e,t){if(e.type!==t.type)return!1;if(e.type===Y)return null===e.value||null===t.value?e.value===t.value:qe(e.value.a,t.value.a)&&qe(e.value.d,t.value.d);if(function(e){return e.type===B}(e)){if(e.value.args.length!==t.value.args.length)return!1;var n=qe(e.value.funct,t.value.funct),r=e.value.args.map(function(e,n){return qe(e,t.value.args[n])}).every(function(e){return e});return n&&r}if(function(e){return e.type===Q}(e)){var a,u=e.value,c=t.value,l=u.id===c.id;return a=u.fields.length===c.fields.length&&u.fields.every(function(e,t){return qe(e.binding,c.fields[t].binding)}),l&&a}if(function(e){return e.type===W}(e)){var o=function(e){var t=document.createElement("canvas");t.width=U(e),t.height=S(e);var n=t.getContext("2d"),r=k(e),a=h.a.renderToString(r),u="data:image/svg+xml;base64,"+btoa(a),c=document.createElement("img");return c.src=u,n.drawImage(c,0,0),n.getImageData(0,0,U(e),S(e)).data},i=e.value,s=t.value,m=o(D([i,I(U(i),U(i),"solid","red")])),f=o(D([i,I(U(i),U(i),"solid","green")])),E=o(D([s,I(U(s),U(s),"solid","red")])),p=o(D([s,I(U(s),U(s),"solid","green")]));if(U(i)!==U(s)||S(i)!==S(s))return!1;var v=m.every(function(e,t){return e===E[t]}),d=f.every(function(e,t){return e===p[t]});return v&&d}return e.value===t.value}var Xe=Pe(3e3,Math.floor(1e9*Math.random()));function Ze(e){return a.a.createElement("div",{className:"colon"},":")}function et(e){return a.a.createElement("div",null,e.error.message,a.a.createElement("div",{title:"Oh no! You got an error!",className:"alert"},a.a.createElement(Ye.d,{icon:Ye.a,size:"small",verticalAlign:"middle",ariaLabel:"Error!"})))}function tt(e){return a.a.createElement("div",{className:"remove",onClick:e.onClick,title:e.title},a.a.createElement(Ye.d,{icon:Ye.c,size:"small",verticalAlign:"middle",ariaLabel:"Remove"}))}var nt=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={text:""},n.textChange=n.textChange.bind(Object(E.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"textChange",value:function(e){var t=e.target.value;this.setState(function(e){return{text:t}}),this.props.isValid(t)?this.props.onValid(t):""!==t||this.props.dummy||this.props.onEmpty()}},{key:"render",value:function(){var e,t;return e=this.props.dummy&&""===this.state.text?"dummy_input":this.props.isValid(this.state.text)?"valid_input":""===this.state.text?"empty_input":"invalid_input",t=0===this.state.text.length?this.props.placeholder.length:Math.max(this.state.text.length+2,4),a.a.createElement("input",{className:e,size:t,placeholder:this.props.placeholder,type:"text",value:this.state.text,onChange:this.textChange})}}]),t}(a.a.Component),rt=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={text:""},n.textChange=n.textChange.bind(Object(E.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"textChange",value:function(e){var t=e.target.value;this.setState(function(e){return{text:t}}),this.props.isValid(t)?this.props.onValid(t):""!==t||this.props.dummy||this.props.onEmpty()}},{key:"render",value:function(){var e;e=this.props.dummy&&""===this.state.text?"dummy_input":this.props.isValid(this.state.text)?"valid_input":""===this.state.text?"empty_input":"invalid_input";var t,n,r=this.state.text.match(/\n/g);return t=null===r?1:r.length+1,n=0===this.state.text.length?this.props.placeholder.length:Math.max.apply(Math,Object(o.a)(this.state.text.split("\n").map(function(e){return e.length+1})).concat([4])),a.a.createElement("textarea",{className:e+" validated_area",rows:t,cols:n,placeholder:this.props.placeholder,onChange:this.textChange,spellCheck:!1,value:this.state.text})}}]),t}(a.a.Component);function at(e){function t(t,n){var r;r=-1!==e.tables.indexOf(n)?e.tables.map(function(e){return e===n?t:e}):[].concat(Object(o.a)(e.tables),[t]),e.programChange(r)}function n(t,n){var r=e.tables.filter(function(e){return e!==n}).map(function(e){return{name:e.name,binding:null}}),a=n.params.map(function(e){return{name:e,binding:null}}),u=[].concat(Object(o.a)(e.globalEnv),Object(o.a)(r),Object(o.a)(a));return We.test(t)&&!function(e,t){return t.reduce(function(t,n){return!!t||n.name===e},!1)}(t,u)}var r=e.tables.map(function(r){return a.a.createElement("div",{key:r.key,className:"flex_horiz table"},a.a.createElement("div",{className:"flex_vert no_grow"},a.a.createElement("div",{className:"flex_horiz no_grow signature"},a.a.createElement(nt,{dummy:!1,placeholder:"Table Name",isValid:function(e){return n(e,r)},onValid:function(e){return t(Object(l.a)({},r,{name:e}),r)},onEmpty:function(){return t(Object(l.a)({},r,{name:be}),r)}}),a.a.createElement(Ze,null),a.a.createElement(nt,{dummy:!1,placeholder:"Signature",isValid:function(e){return function(e,t){var n=e.split(/\s+->\s+/g);if(2!==n.length)return!1;var r=n[0].match(/[a-zA-Z]+/g),a=n[1].match(/[a-zA-Z]+/g);return null!==r&&null!==a&&r.length===t.params.length&&1===a.length}(e,r)},onValid:function(e){return t(Object(l.a)({},r,{signature:e}),r)},onEmpty:function(){return t(Object(l.a)({},r,{signature:be}),r)}}),a.a.createElement(tt,{onClick:function(){return function(t){var n=e.tables.filter(function(e){return e!==t});e.programChange(n)}(r)},title:"Remove this table"})),a.a.createElement("div",{className:"flex_horiz no_grow"},a.a.createElement(nt,{dummy:!1,placeholder:"Purpose",isValid:function(e){return""!==e},onValid:function(e){return t(Object(l.a)({},r,{purpose:e}),r)},onEmpty:function(){return t(Object(l.a)({},r,{purpose:be}),r)}})),a.a.createElement(ut,{globalEnv:e.globalEnv,table:r,tableNames:e.tables.map(function(e){return e.name}),tableChange:function(e){return t(e,r)}})),a.a.createElement("div",{className:"grow"}))}),u=a.a.createElement("div",{key:Qe(),className:"flex_horiz table"},a.a.createElement("div",{className:"flex_vert no_grow"},a.a.createElement("div",{className:"flex_horiz no_grow signature"},a.a.createElement(nt,{dummy:!0,placeholder:"Table Name",isValid:function(e){return n(e,{params:[]})},onValid:function(e){return t({name:e,signature:be,purpose:be,examples:[],formulas:[],params:[],key:ze()},{})}}),a.a.createElement(Ze,null),a.a.createElement(nt,{dummy:!0,placeholder:"Signature",isValid:function(e){return""!==e},onValid:function(e){return t({name:be,signature:e,purpose:be,examples:[],formulas:[],params:[],key:ze()},{})}})),a.a.createElement("div",{className:"flex_horiz no_grow"},a.a.createElement(nt,{dummy:!0,placeholder:"Purpose",isValid:function(e){return""!==e},onValid:function(e){return t({name:be,signature:be,purpose:e,examples:[],formulas:[],params:[],key:ze()},{})}})),a.a.createElement(ut,{globalEnv:e.globalEnv,table:{name:be,signature:be,purpose:be,examples:[],formulas:[],params:[],key:Qe()},tableNames:e.tables.map(function(e){return e.name}),tableChange:function(e){return t(e,{})}})),a.a.createElement("div",{className:"grow"}));return a.a.createElement("div",null,[].concat(Object(o.a)(r),[u]))}function ut(e){function t(t){e.tableChange(Object(l.a)({},e.table,{formulas:t}))}return a.a.createElement("table",{className:"grow"},a.a.createElement(ct,{globalEnv:e.globalEnv,params:e.table.params,examples:e.table.examples,tableNames:e.tableNames,paramsExamplesChange:function(t,n){e.tableChange(Object(l.a)({},e.table,{params:t,examples:n}))},formulas:e.table.formulas,formulasChange:t}),a.a.createElement(it,{globalEnv:e.globalEnv,examples:e.table.examples,formulas:e.table.formulas,paramNames:e.table.params.map(function(e){return e.name}),examplesFormulasChange:function(t,n){e.tableChange(Object(l.a)({},e.table,{examples:t,formulas:n}))},formulasChange:t}))}function ct(e){function t(e){var t=!0;try{me(e)}catch(n){if(!(n instanceof SyntaxError))throw n;t=!1}return t}function n(t,n){var r;r=-1===e.formulas.indexOf(n)?[].concat(Object(o.a)(e.formulas),[t]):e.formulas.map(function(e){return e===n?t:e}),e.formulasChange(r)}function r(e){return we(e)?e.thenChildren.reduce(function(e,t){return e+r(t)},2):1}var u=e.formulas.reduce(function(e,t){return Math.max(e,function e(t,n){return we(t)?t.thenChildren.reduce(function(t,r){return Math.max(t,e(r,n+1))},n+1):n}(t,0))},0),c=e.params.length,i=e.formulas.map(function(u){return a.a.createElement("th",{key:u.key,colSpan:r(u)},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(rt,{placeholder:"Formula",dummy:!1,isValid:t,onValid:function(e){return n(Object(l.a)({},u,{prog:me(e)}),u)},onEmpty:function(){return n(Object(l.a)({},u,{prog:be}),u)}}),a.a.createElement(tt,{title:"Remove this formula",onClick:function(){return function(t){var n=e.formulas.filter(function(e){return e!==t});e.formulasChange(n)}(u)}})))}),s=a.a.createElement("th",{key:Qe(),colSpan:1},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(rt,{dummy:!0,placeholder:"Formula",isValid:t,onValid:function(t){return n({prog:me(t),outputs:e.examples.map(function(e){return be}),key:ze()},{})}}))),m=function e(t){return 0===t?[]:1===t?[1]:[].concat(Object(o.a)(e(t-1)),[t])}(u).map(function(t){return a.a.createElement("tr",{key:t},a.a.createElement("th",{colSpan:c+2}),e.formulas.map(function(r){return a.a.createElement(ot,{key:r.key,formula:r,depth:t,numExamples:e.examples.length,formulaChange:function(e){return n(e,r)}})}),Array(t).map(function(e,t){return a.a.createElement("th",{key:t})}),a.a.createElement("th",null))});return a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement(lt,{globalEnv:e.globalEnv,params:e.params,examples:e.examples,tableNames:e.tableNames,paramsExamplesChange:e.paramsExamplesChange}),[].concat(Object(o.a)(i),[s,a.a.createElement("th",{key:Qe(1)})])),m)}function lt(e){function t(t,n){var r=e.params.filter(function(e){return e!==n}).map(function(e){return{name:e.name,binding:null}}),a=e.tableNames.map(function(e){return{name:e,binding:null}}),u=[].concat(Object(o.a)(e.globalEnv),Object(o.a)(a),Object(o.a)(r));return We.test(t)&&!function(e,t){return t.reduce(function(t,n){return!!t||n.name===e},!1)}(t,u)}function n(t,n){var r,a;-1===e.params.indexOf(n)?(r=[].concat(Object(o.a)(e.params),[t]),a=e.examples.map(function(e){return Object(l.a)({},e,{inputs:[].concat(Object(o.a)(e.inputs),[{prog:be,key:ze()}])})})):(r=e.params.map(function(e){return e===n?t:e}),a=e.examples),e.paramsExamplesChange(r,a)}var r=e.params.map(function(r){return a.a.createElement("th",{key:r.key},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(nt,{dummy:!1,placeholder:"Parameter",isValid:function(e){return t(e,r)},onValid:function(e){return n(Object(l.a)({},r,{name:e}),r)},onEmpty:function(){return n(Object(l.a)({},r,{name:be}),r)}}),a.a.createElement(tt,{title:"Remove this parameter",onClick:function(){return function(t){var n=e.params.indexOf(t),r=e.params.filter(function(e){return e!==t}),a=e.examples.map(function(e){return Object(l.a)({},e,{inputs:e.inputs.filter(function(e,t){return t!==n})})});e.paramsExamplesChange(r,a)}(r)}})))}),u=a.a.createElement("th",{key:Qe()},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(nt,{dummy:!0,placeholder:"Parameter",isValid:function(e){return t(e,{})},onValid:function(e){return n({name:e,key:ze()},{})}})));return a.a.createElement(a.a.Fragment,null,a.a.createElement("th",null),a.a.createElement(a.a.Fragment,null,[].concat(Object(o.a)(r),[u])))}function ot(e){function t(e){try{me(e)}catch(t){return!1}return!0}function n(t,n){var r;r=-1===e.formula.thenChildren.indexOf(n)?[].concat(Object(o.a)(e.formula.thenChildren),[t]):e.formula.thenChildren.map(function(e){return e===n?t:e}),e.formulaChange(Object(l.a)({},e.formula,{thenChildren:r}))}function r(e){return we(e)?e.thenChildren.reduce(function(e,t){return e+r(t)},2):1}if(e.depth>1)return a.a.createElement(a.a.Fragment,null,a.a.createElement("th",null),we(e.formula)?a.a.createElement(a.a.Fragment,null,e.formula.thenChildren.map(function(t){return a.a.createElement(ot,{key:t.key,formula:t,depth:e.depth-1,numExamples:e.numExamples,formulaChange:function(e){return n(e,t)}})}),a.a.createElement("th",null)):a.a.createElement("script",null));if(we(e.formula)){var u=e.formula.thenChildren.map(function(u){return a.a.createElement("th",{key:u.key,colSpan:r(u)},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(rt,{dummy:!1,placeholder:"Formula",isValid:t,onValid:function(e){return n(Object(l.a)({},u,{prog:me(e)}),u)},onEmpty:function(){return n(Object(l.a)({},u,{prog:be}),u)}}),a.a.createElement(tt,{title:"Remove this formula",onClick:function(){return function(t){var n=e.formula.thenChildren.filter(function(e){return e!==t});e.formulaChange(Object(l.a)({},e.formula,{thenChildren:n}))}(u)}})))}),c=a.a.createElement("th",{key:Qe(),colSpan:1},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(rt,{dummy:!0,placeholder:"Formula",isValid:t,onValid:function(t){return n({prog:me(t),outputs:Array(e.numExamples).fill(be),key:ze()},{})}})));return a.a.createElement(a.a.Fragment,null,a.a.createElement("th",null),a.a.createElement(a.a.Fragment,null,[].concat(Object(o.a)(u),[c])))}return a.a.createElement(a.a.Fragment,null,a.a.createElement("th",null))}function it(e){function t(t,n){var r,a,u=-1!==e.examples.indexOf(n);if(t===Fe)return u;return u?(r=e.examples.map(function(e){return e===n?t:e}),a=e.formulas):(r=[].concat(Object(o.a)(e.examples),[t]),a=e.formulas.map(function e(t){var n=[].concat(Object(o.a)(t.outputs),[be]);if(we(t)){var r=t.thenChildren.map(e);return Object(l.a)({},t,{outputs:n,thenChildren:r})}return Object(l.a)({},t,{outputs:n})})),e.examplesFormulasChange(r,a),!0}var n=e.examples.map(function(n,r){return a.a.createElement("tr",{key:n.key},a.a.createElement("td",null,a.a.createElement(tt,{onClick:function(){return function(t){var n=e.examples.indexOf(t),r=e.examples.filter(function(e){return e!==t}),a=e.formulas.map(function e(t){var r=t.outputs.filter(function(e,t){return t!==n});if(we(t)){var a=t.thenChildren.map(e);return Object(l.a)({},t,{outputs:r,thenChildren:a})}return Object(l.a)({},t,{outputs:r})});e.examplesFormulasChange(r,a)}(n)},title:"Remove this example"})),a.a.createElement(st,{globalEnv:e.globalEnv,dummy:!1,inputs:n.inputs,inputsChange:function(e){return t(Object(l.a)({},n,{inputs:e}),n)}}),a.a.createElement("td",null),a.a.createElement(mt,{globalEnv:e.globalEnv,dummy:!1,formulas:e.formulas,want:n.want,row:r}),a.a.createElement("td",null),a.a.createElement(pt,{globalEnv:e.globalEnv,dummy:!1,want:n.want,wantChange:function(e){return t(Object(l.a)({},n,{want:e}),n)}}))}),r=a.a.createElement("tr",{key:Qe(e.paramNames.length)},a.a.createElement("td",null),a.a.createElement(st,{globalEnv:e.globalEnv,dummy:!0,inputs:e.paramNames.map(function(e,t){return{key:Qe(t)}}),inputsChange:function(e){return t({inputs:e,want:be,key:ze()},{})}}),a.a.createElement("td",null),a.a.createElement(mt,{globalEnv:e.globalEnv,dummy:!0,formulas:e.formulas}),a.a.createElement("td",null),a.a.createElement(pt,{globalEnv:e.globalEnv,dummy:!0,wantChange:function(n){return t({want:n,inputs:e.paramNames.map(function(e){return{prog:be,key:ze()}}),key:ze()},{})}}));return a.a.createElement("tbody",null,[].concat(Object(o.a)(n),[r]))}function st(e){function t(e){try{me(e)}catch(t){return!1}return!0}function n(t,n){var r;r=e.dummy?e.inputs.map(function(e){return e===n?Object(l.a)({},t,{key:ze()}):{prog:be,key:ze()}}):e.inputs.map(function(e){return e===n?t:e}),e.inputsChange(r)}var r=e.inputs.map(function(r,u){var c=a.a.createElement("div",null);if(e.dummy)return a.a.createElement("td",{key:r.key},a.a.createElement("div",{className:"flex_vert"},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(rt,{dummy:e.dummy,placeholder:"Input",isValid:t,onValid:function(e){return n({prog:me(e)},r)}})),c));if(r.prog!==be)try{le(r.prog,e.globalEnv)}catch(o){c=a.a.createElement(et,{error:o})}return a.a.createElement("td",{key:r.key},a.a.createElement("div",{className:"flex_vert"},a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(rt,{dummy:e.dummy,placeholder:"Input",isValid:t,onValid:function(e){return n(Object(l.a)({},r,{prog:me(e)}),r)},onEmpty:function(){return n(Object(l.a)({},r,{prog:be}),r)}})),c))});return a.a.createElement(a.a.Fragment,null,r)}function mt(e){function t(e){return we(e)?e.thenChildren.reduce(function(e,n){return e+t(n)},2):1}return e.dummy?a.a.createElement(a.a.Fragment,null,e.formulas.map(function(e){return a.a.createElement("td",{key:e.key,colSpan:t(e)})})):a.a.createElement(a.a.Fragment,null,e.formulas.map(function(t){return a.a.createElement(a.a.Fragment,{key:t.key},a.a.createElement(ft,{globalEnv:e.globalEnv,output:t.outputs[e.row],want:e.want}),we(t)?a.a.createElement(a.a.Fragment,null,a.a.createElement(mt,{globalEnv:e.globalEnv,formulas:t.thenChildren,want:e.want,row:e.row}),a.a.createElement(Et,{parentOutput:t.outputs[e.row]})):a.a.createElement("script",null))}))}function ft(e){var t,n=e.output;if(n===ge)return a.a.createElement("td",{className:"gray"});if(n===ye)return a.a.createElement("td",{className:"pink"});if(n===be)return a.a.createElement("td",{className:"yellow"});if(n instanceof Error)return a.a.createElement("td",null,a.a.createElement(et,{error:n}));try{t=le(e.want,e.globalEnv)}catch(r){t=be}return t!==be&&qe(n,t)?a.a.createElement("td",{className:"output"},$e(n),a.a.createElement("div",{title:"Yay! It's right!",className:"check"},a.a.createElement(Ye.d,{icon:Ye.b,size:"small",verticalAlign:"middle",ariaLabel:"Yay!"}))):a.a.createElement("td",{className:"output"},$e(n))}function Et(e){return e.parentOutput===ge||!1===e.parentOutput.value?a.a.createElement("td",{className:"gray"}):e.parentOutput!==ye&&pe(e.parentOutput)?a.a.createElement("td",null):a.a.createElement("td",{className:"pink"})}function pt(e){var t;if(e.dummy||e.want===be)t=a.a.createElement("script",null);else try{var n=le(e.want,e.globalEnv);t=qe(n,e.want)?a.a.createElement("script",null):a.a.createElement("td",{className:"output"},$e(n))}catch(r){t=a.a.createElement("td",null,a.a.createElement(et,{error:r}))}return a.a.createElement(a.a.Fragment,null,a.a.createElement("td",null,a.a.createElement("div",{className:"flex_horiz"},a.a.createElement(rt,{dummy:e.dummy,placeholder:"Want",isValid:function(e){try{me(e)}catch(r){return!1}return!0},onValid:function(t){return e.wantChange(me(t))},onEmpty:function(){return e.wantChange(be)}}))),t)}var vt=function(e){function t(e){var n;Object(i.a)(this,t),n=Object(m.a)(this,Object(f.a)(t).call(this,e));var r=a.a.createElement("div",null);return n.state={error:r,globalEnv:ae},n.prefixChange=n.prefixChange.bind(Object(E.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"validPrefix",value:function(e){try{ce(e)}catch(t){return!1}return!0}},{key:"prefixChange",value:function(e){var t=a.a.createElement("div",null),n=ce(e),r=this.state.globalEnv;try{r=oe(n,ae)}catch(u){t=a.a.createElement(et,{error:u})}this.setState(function(e){return{error:t,globalEnv:r}}),this.props.prefixChange(n,r)}},{key:"render",value:function(){return a.a.createElement("div",{className:"flex_horiz"},a.a.createElement("div",{className:"flex_vert no_grow"},a.a.createElement(rt,{dummy:!1,placeholder:"Definitions Area",isValid:this.validPrefix,onValid:this.prefixChange}),this.state.error),a.a.createElement("div",{className:"grow"}))}}]),t}(a.a.Component),ht=function(e){function t(e){var n;Object(i.a)(this,t);return(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={showBSL:!1},n.toggleDisplay=n.toggleDisplay.bind(Object(E.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"toggleDisplay",value:function(e){this.setState(function(e){return{showBSL:!e.showBSL}})}},{key:"render",value:function(){var e;return e=this.state.showBSL?a.a.createElement("textarea",{className:"bsl_field",rows:20,cols:70,readOnly:!0,value:Ve(this.props.tables,Je,70,70)}):a.a.createElement("div",null),a.a.createElement("div",{className:"bsl_io"},a.a.createElement("div",{className:"bsl_checkbox"},a.a.createElement("input",{type:"checkbox",id:"bsl_toggle",name:"bsl_output",onChange:this.toggleDisplay}),a.a.createElement("label",{htmlFor:"bsl_toggle"},"Show BSL Output")),e)}}]),t}(a.a.Component),dt=function(e){function t(e){var n;Object(i.a)(this,t),n=Object(m.a)(this,Object(f.a)(t).call(this,e));var r=ae,a=[{examples:[{inputs:[{prog:be,key:ze()}],want:be,key:ze()}],formulas:[{prog:be,outputs:[be],key:ze()}],params:[{name:be,key:ze()}],name:be,signature:be,purpose:be,key:ze()}],u=[{prefix:"",globalEnv:r,tables:a}];return n.state={prefix:"",globalEnv:r,tables:a,snapshots:u},n.programChange=n.programChange.bind(Object(E.a)(n)),n.prefixChange=n.prefixChange.bind(Object(E.a)(n)),n.render=n.render.bind(Object(E.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"calculate",value:function(e,t){function n(t){return function(n){if(n.length!==t.params.length)throw new Error("Arity Mismatch, expected "+t.params.length+" argument"+(1===t.params.length?"":"s"));var r=t.examples.reduce(function(r,u){if(void 0!==r)return r;if(u.inputs.every(function(t,r){if(t.prog===be)return!1;var a;try{a=qe(le(t.prog,e),n[r])}catch(c){a=!1}return a})){if(u.want===be){var c=new ReferenceError;throw c.message=a.a.createElement(a.a.Fragment,null,"(",t.name,n.flatMap(function(e){return[" "].concat(Object(o.a)($e(e)))}),") doesn't have a want"),c}return le(u.want,e)}},void 0);if(void 0===r){var u=new ReferenceError;throw u.message=a.a.createElement(a.a.Fragment,null,"(",t.name,n.flatMap(function(e){return[" "].concat(Object(o.a)($e(e)))}),") is not an example"),u}return r}}var r=t.map(function(e){return{name:e.name,binding:{value:n(e),type:H}}}),u=[].concat(Object(o.a)(e),Object(o.a)(r));return t.map(function(e){function t(n,r){var a=r.map(function(t){if(t===ge)return ge;if(t===ye)return ye;if(!t.inputs.every(function(e){return e.prog!==be})||n.prog===be)return be;var r=!1;try{t.inputs.map(function(e){return le(e.prog,u)})}catch(i){r=!0}if(t===ye||r)return ye;var a,c=e.params.map(function(e,n){return{name:e.name,binding:le(t.inputs[n].prog,u)}}),l=[].concat(Object(o.a)(u),Object(o.a)(c));try{a=le(n.prog,l)}catch(i){a=i}return a});if(Oe(a)||void 0!==n.thenChildren&&0!==n.thenChildren.length){if(void 0===n.thenChildren)var c=[];else{var i=r.map(function(e,t){return function(e,t){return e===ge||!1===t.value?ge:"boolean"!==typeof t.value?ye:e}(e,a[t])});c=n.thenChildren.map(function(e){return t(e,i)})}return Object(l.a)({},n,{outputs:a,thenChildren:c})}var s=Object(l.a)({},n,{outputs:a});return delete s.thenChildren,s}if(e.name!==be&&e.params.every(function(e){return e.name!==be})){var n=e.formulas.map(function(n){return t(n,e.examples)});return Object(l.a)({},e,{formulas:n})}return Object(l.a)({},e)})}},{key:"componentDidUpdate",value:function(){Xe(JSON.stringify(this.state.snapshots))}},{key:"prefixChange",value:function(e,t){var n=this.calculate(t,this.state.tables);this.setState(function(r){return{prefix:e,globalEnv:t,tables:n,snapshots:[].concat(Object(o.a)(r.snapshots),[{prefix:e,globalEnv:t,tables:n}])}})}},{key:"programChange",value:function(e){var t=this.state.prefix,n=this.state.globalEnv,r=this.calculate(n,e);this.setState(function(e){return{tables:r,snapshots:[].concat(Object(o.a)(e.snapshots),[{prefix:t,globalEnv:n,tables:r}])}})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement(vt,{prefixChange:this.prefixChange}),a.a.createElement(at,{globalEnv:this.state.globalEnv,tables:this.state.tables,programChange:this.programChange}),a.a.createElement("div",{className:"language_select"},a.a.createElement("select",{defaultValue:"cons",onChange:function(t){"cons"===t.target.value?(Je="cons",$e=ie):(Je="list",$e=se),e.setState(function(e){return e})}},a.a.createElement("option",{value:"cons"},"Beginning Student"),a.a.createElement("option",{value:"list"},"Beginning Student with List Abbreviations"))),a.a.createElement(ht,{tables:this.state.tables}))}}]),t}(a.a.Component);document.createElement("img");Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.8117d3a6.chunk.js.map