{"version":3,"sources":["image.js","interpreter.js","header.js","prettyprint.js","sendifier.js","App.js","serviceWorker.js","index.js"],"names":["colorDb","DARK-RED","makeColor","FIRE-BRICK","DEEP-PINK","INDIAN-RED","MEDIUM-VIOLET-RED","VIOLET-RED","LIGHT-CORAL","HOT-PINK","PALE-VIOLET-RED","LIGHT-PINK","ROSY-BROWN","LAVENDER-BLUSH","SADDLE-BROWN","DARK-ORANGE","DARK-GOLDENRON","SANDY-BROWN","LIGHT-SALMON","DARK-SALMON","NAVAJO-WHITE","PEACH-PUFF","DARK-KHAKI","PALE-GOLDENROD","BLANCHE-DIAMOND","MEDIUM-GOLDENROD","PAPAYA-WHIP","MISTY-ROSE","LEMON-CHIFFON","ANTIQUE-WHITE","CORN-SILK","LIGHT-GOLDENRON-YELLOW","OLD-LACE","LIGHT-YELLOW","FLORAL-WHITE","LAWN-GREEN","GREEN-YELLOW","YELLOW-GREEN","OLIVE-DRAB","MEDIUM-FOREST-GREEN","DARK-OLIVE-GREEN","DARK-SEA-GREEN","DARK-GREEN","LIME-GREEN","FOREST-GREEN","SPRING-GREEN","MEDIUM-SPRING-GREEN","SEA-GREEN","MEDIUM-SEA-GREEN","LIGHT-GREEN","PALE-GREEN","MEDIUM-AQUAMARINE","LIGHT-SEA-GREEN","MEDIUM-TURQUOISE","MINT-CREAM","ROYAL-BLUE","DODGER-BLUE","DEEP-SKY-BLUE","CORNFLOWER-BLUE","STEEL-BLUE","LIGHT-SKY-BLUE","DARK-TURQUOISE","DARKTURQUOISE","SKY-BLUE","SKYBLUE","CADET-BLUE","DARK-SLATE-GRAY","LIGHT-STEEL-BLUE","LIGHT-BLUE","POWDER-BLUE","PALE-TURQUOISE","LIGHT-CYAN","ALICE-BLUE","MEDIUM-BLUE","DARK-BLUE","MIDNIGHT-BLUE","BLUE-VIOLET","MEDIUM-SLATE-BLUE","SLATE-BLUE","DARK-SLATE-BLUE","DARK-VIOLET","DARK-ORCHID","MEDIUM-PURPLE","MEDIUM-ORCHID","DARK-MAGENTA","GHOST-WHITE","WHITE-SMOKE","LIGHT-GRAY","DARK-GRAY","DIM-GRAY","ORANGE","ORANGERED","TOMATO","DARKRED","RED","FIREBRICK","CRIMSON","DEEPPINK","MAROON","INDIAN RED","INDIANRED","MEDIUM VIOLET RED","MEDIUMVIOLETRED","VIOLET RED","VIOLETRED","LIGHTCORAL","HOTPINK","PALEVIOLETRED","LIGHTPINK","ROSYBROWN","PINK","ORCHID","LAVENDERBLUSH","SNOW","CHOCOLATE","SADDLEBROWN","BROWN","DARKORANGE","CORAL","SIENNA","SALMON","PERU","DARKGOLDENROD","GOLDENROD","SANDYBROWN","LIGHTSALMON","DARKSALMON","GOLD","YELLOW","OLIVE","BURLYWOOD","TAN","NAVAJOWHITE","PEACHPUFF","KHAKI","DARKKHAKI","MOCCASIN","WHEAT","BISQUE","PALEGOLDENROD","BLANCHEDALMOND","MEDIUM GOLDENROD","MEDIUMGOLDENROD","PAPAYAWHIP","MISTYROSE","LEMONCHIFFON","ANTIQUEWHITE","CORNSILK","LIGHTGOLDENRODYELLOW","OLDLACE","LINEN","LIGHTYELLOW","SEASHELL","BEIGE","FLORALWHITE","IVORY","GREEN","LAWNGREEN","CHARTREUSE","GREEN YELLOW","GREENYELLOW","YELLOW GREEN","YELLOWGREEN","MEDIUM FOREST GREEN","OLIVEDRAB","MEDIUMFORESTGREEN","DARK OLIVE GREEN","DARKOLIVEGREEN","DARKSEAGREEN","LIME","DARK GREEN","DARKGREEN","LIME GREEN","LIMEGREEN","FOREST GREEN","FORESTGREEN","SPRING GREEN","SPRINGGREEN","MEDIUM SPRING GREEN","MEDIUMSPRINGGREEN","SEA GREEN","SEAGREEN","MEDIUM SEA GREEN","MEDIUMSEAGREEN","AQUAMARINE","LIGHTGREEN","PALE GREEN","PALEGREEN","MEDIUM AQUAMARINE","MEDIUMAQUAMARINE","TURQUOISE","LIGHTSEAGREEN","MEDIUM TURQUOISE","MEDIUMTURQUOISE","HONEYDEW","MINTCREAM","ROYALBLUE","DODGERBLUE","DEEPSKYBLUE","CORNFLOWERBLUE","STEEL BLUE","STEELBLUE","LIGHTSKYBLUE","DARK TURQUOISE","CYAN","AQUA","DARKCYAN","TEAL","SKY BLUE","CADET BLUE","CADETBLUE","DARK SLATE GRAY","DARKSLATEGRAY","LIGHTSLATEGRAY","SLATEGRAY","LIGHT STEEL BLUE","LIGHTSTEELBLUE","LIGHT BLUE","LIGHTBLUE","POWDERBLUE","PALETURQUOISE","LIGHTCYAN","ALICEBLUE","AZURE","MEDIUM BLUE","MEDIUMBLUE","DARKBLUE","MIDNIGHT BLUE","MIDNIGHTBLUE","NAVY","BLUE","INDIGO","BLUE VIOLET","BLUEVIOLET","MEDIUM SLATE BLUE","MEDIUMSLATEBLUE","SLATE BLUE","SLATEBLUE","PURPLE","DARK SLATE BLUE","DARKSLATEBLUE","DARKVIOLET","DARK ORCHID","DARKORCHID","MEDIUMPURPLE","CORNFLOWER BLUE","MEDIUM ORCHID","MEDIUMORCHID","MAGENTA","FUCHSIA","DARKMAGENTA","VIOLET","PLUM","LAVENDER","THISTLE","GHOSTWHITE","WHITE","WHITESMOKE","GAINSBORO","LIGHT GRAY","LIGHTGRAY","SILVER","GRAY","DARK GRAY","DARKGRAY","DIM GRAY","DIMGRAY","BLACK","TRANSPARENT","r","g","b","a","arguments","length","undefined","Error","changeAlpha","color","checkDimension","maybeDimension","checkColor","maybeColor","replace","toUpperCase","concat","checkMode","maybeMode","checkXPlace","maybeXPlace","checkYPlace","maybeYPlace","makeRectangle","width","height","mode","type","makeEquiTriangle","A","B","C","makeTriangle","makeBeside","images","yplace","makeAbove","xplace","makeOverlay","makePlace","image","x","y","scene","emptyScene","w","h","coordinates","map","coord","reduce","acc","Math","max","s","area","sqrt","round","render","red","green","blue","alpha","react_default","createElement","cx","cy","fill","stroke","strokeWidth","render_circle","render_rect","D","pow","c","points","render_triangle","cur","render_polygon","initY","yCorrect","make_list_renderer","dx","dy","renderoozle","render_beside","initX","xCorrect","render_above","render_overlay","render_place","xChange","yChange","render_list","first","rest","slice","Object","toConsumableArray","paint","picture","viewBox","xmlns","key","random","RVAR_T","RAPP_T","RFUNCT_T","RNUM_T","RBOOL_T","RSTRING_T","RLIST_T","RSYM_T","RIMAGE_T","RCOLOR_T","RIF_T","RSTRUCT_T","varRE","appRE","numRE","boolRE","strRE","quoteRE","symRE","listRE","initEnv","makeStruct","name","binding","value","args","forEach","arg","typeCheck","firstArg","secondArg","car","cdr","d","reverse","isnull","val","thirdArg","fourthArg","restArgs","img","parse","text","test","numStr","match","trim","prog","boolStr","toLowerCase","matches","substring","parseFunct","funct","app","parseArg","SyntaxError","tst","els","thn","parseQ","listArr","num","bool","charAt","str","sym","interp","env","variable","ReferenceError","lookup","TypeError","toString_cons","join","id","toString_list","elems","unparse_cons","arr","fields","field","unparse_list","parseCheck","parsed","types","includes","typesString","superID","fieldIDs","numFields","fieldExtractors","fid","extedEnv","i","struct","extract","isRBOOL","gray","pink","yellow","allBools","progs","every","isBooleanFormula","formula","outputs","thenChildren","NIL","nil","string","String","line","union","docL","docR","left","right","nest","doc","indent","group","flatten","makePretty","ribbon","best","thisRibbon","current","be","k","pairs","memoize","fits","diffWidth","diffRibbon","thunk","console","log","seen","layout","repeat","putSpace","putLine","compose","folddoc","f","docs","spread","stack","bracket","progToDoc","program","Infinity","toBSL","tables","unparse","pretty","table","fieldToDoc","sig","signature","purp","purpose","params","param","checkExpects","examples","example","inputs","input","want","body","formulasToDoc","formulas","bools","splitForms","filter","nonbools","splitFormulas","form","condRows","tableToDoc","makeSendifier","delay","item","setInterval","fetch","method","headers","Content-Type","nuveau","dryRun","yo","keyCount","takeKey","peekKey","lookahead","toString","showBSL","globalEnv","deepEquals","proga","progb","isRAPP","functCheck","argCheck","arga","elem","isRSTRUCT","fieldsSame","structa","structb","idSame","fielda","isRIMAGE","toRGBAArray","can","document","ctx","getContext","svg","xml","ReactDOMServer","renderToString","image64","btoa","src","drawImage","getImageData","data","imgA","imgB","dataA_red","dataA_green","dataB_red","dataB_green","redSame","datumA_red","greenSame","datumA_green","tellBigBrother","Colon","props","className","RemButton","onClick","title","index_esm","icon","X","size","verticalAlign","ariaLabel","ValidatedInput","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","textChange","bind","assertThisInitialized","e","target","setState","isValid","onValid","dummy","onEmpty","placeholder","onChange","React","Component","ValidatedArea","_this2","rows","cols","newlines","apply","split","Succinct","tableChange","newTab","oldTab","alteredTabs","indexOf","programChange","validName","modTab","tableVars","otherTab","paramVars","inEnv","reals","App_ValidatedInput","objectSpread","sides","paramTypes","outType","validSignature","deadTab","aliveTabs","remTable","SuccinctTab","tableNames","formulasChange","SuccinctHead","paramsExamplesChange","SuccinctBody","paramNames","examplesFormulasChange","validProg","isgood","formulaChange","newForm","oldForm","alteredForms","countWidth","child","abyss","maxDepth","curMax","numParams","colSpan","App_ValidatedArea","deadForm","aliveForms","remFormula","_","children","countUp","depth","DepictFormula","numExamples","Array","Parameters","validParam","modParam","paramChange","newParam","alteredParams","alteredExamples","deadParam","deadIndex","aliveParams","modExamples","remParam","Fragment","childChange","newChild","modChild","deadChild","aliveChildren","remChild","exampleChange","newExample","oldExample","exists","addAnotherOutputToFormula","deadExample","aliveExamples","removeOutputFromFormula","remExample","Inputs","inputsChange","Outputs","row","Want","wantChange","inputChange","newInput","oldInput","alteredInputs","inputFields","error","message","Alert","TestCell","output","DummyCell","parentOutput","face","Check","valueCell","evalWant","App","_this3","snapshots","makeLookup","expr","lookups","tableEnv","calcFormula","localEnv","subExamples","maybeSpecial","newFormula","nextState","JSON","stringify","newProg","calkedProg","calculate","bslField","_this4","readOnly","defaultValue","htmlFor","spellCheck","defStructRE","nameRE","parsePrefixExpr","fieldID","parsePrefix","curEnv","interpPrefix","Boolean","window","location","hostname","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.0833401a.chunk.js","sourcesContent":["/*******************************************\n    This here is the image library in js\n*******************************************/\n\n\n/***\n    Data Definitions:\nAn Image is one of \n      - Circle\n      - Rectangle\n      - Triangle\n      - Polygon\n      - Beside\n      - Above\n      - Overlay\n      - Place\n\n    A Circle is\n      {r:     Integer,\n       color: Color,\n       mode:  String,\n       type:  'circle'}\n     \n    A Rectangle is\n      {width:  Integer,\n       height: Integer,\n       color:  Color,\n       mode:   String,\n       type:   'rect'}\n       \n    A Triangle is                   \n      {A:      Integer,             /\\\n       B:      Integer,            /  \\\n       C:      Integer,        B  /    \\  C\n       color:  Color,            /      \\\n       mode:   String,          /________\\\n       type:   'triangle'}          A      \n       \n    A Polygon is\n      {coordinates: [{x: Integer, y: Integer}],\n       color:       Color,\n       mode:        String,\n       type:        'polygon'}\n       \n    note: only acute triangles are handled\n       \n    A Beside is\n      {type:   'beside',\n       yplace:  String,\n       images: [Image]} note: images must be non-empty\n       \n    An Above is\n      {type:   'above',\n       xplace:  String,\n       images: [Image]} note: images must be non-empty\n\n    An Overlay is\n      {type:   'overlay',\n       yplace: String\n       xplace: String,\n       images: [Image]} note: images must be non-empty\n       \n   A Place is\n     {type: place,\n      x:     Integer,\n      y:     Integer,\n      image: Image,\n      scene: Image}\n       \n    A Color is\n      {r: Integer,\n       g: Integer,\n       b: Integer,\n       a: Integer}\n***/\n\nimport React from 'react';\n\n// these colors taken from https://github.com/brownplt/code.pyret.org/blob/horizon/src/web/js/trove/image-lib.js\nconst colorDb = {\n    \"DARK-RED\" : makeColor(139, 0, 0),\n    \"FIRE-BRICK\" : makeColor(178, 34, 34),\n    \"DEEP-PINK\" : makeColor(255, 20, 147),\n    \"INDIAN-RED\" : makeColor(205, 92, 92),\n    \"MEDIUM-VIOLET-RED\" : makeColor(199, 21, 133),\n    \"VIOLET-RED\" : makeColor(208, 32, 144),\n    \"LIGHT-CORAL\" : makeColor(240, 128, 128),\n    \"HOT-PINK\" : makeColor(255, 105, 180),\n    \"PALE-VIOLET-RED\" : makeColor(219, 112, 147),\n    \"LIGHT-PINK\" : makeColor(255, 182, 193),\n    \"ROSY-BROWN\" : makeColor(188, 143, 143),\n    \"LAVENDER-BLUSH\" : makeColor(255, 240, 245),\n    \"SADDLE-BROWN\" : makeColor(139, 69, 19),\n    \"DARK-ORANGE\" : makeColor(255, 140, 0),\n    \"DARK-GOLDENRON\" : makeColor(184, 134, 11),\n    \"SANDY-BROWN\" : makeColor(244, 164, 96),\n    \"LIGHT-SALMON\" : makeColor(255, 160, 122),\n    \"DARK-SALMON\" : makeColor(233, 150, 122),\n    \"NAVAJO-WHITE\" : makeColor(255, 222, 173),\n    \"PEACH-PUFF\" : makeColor(255, 218, 185),\n    \"DARK-KHAKI\" : makeColor(189, 183, 107),\n    \"PALE-GOLDENROD\" : makeColor(238, 232, 170),\n    \"BLANCHE-DIAMOND\" : makeColor(255, 235, 205),\n    \"MEDIUM-GOLDENROD\" : makeColor(234, 234, 173),\n    \"PAPAYA-WHIP\" : makeColor(255, 239, 213),\n    \"MISTY-ROSE\" : makeColor(255, 228, 225),\n    \"LEMON-CHIFFON\" : makeColor(255, 250, 205),\n    \"ANTIQUE-WHITE\" : makeColor(250, 235, 215),\n    \"CORN-SILK\" : makeColor(255, 248, 220),\n    \"LIGHT-GOLDENRON-YELLOW\" : makeColor(250, 250, 210),\n    \"OLD-LACE\" : makeColor(253, 245, 230),\n    \"LIGHT-YELLOW\" : makeColor(255, 255, 224),\n    \"FLORAL-WHITE\" : makeColor(255, 250, 240),\n    \"LAWN-GREEN\" : makeColor(124, 252, 0),\n    \"GREEN-YELLOW\" : makeColor(173, 255, 47),\n    \"YELLOW-GREEN\" : makeColor(154, 205, 50),\n    \"OLIVE-DRAB\" : makeColor(107, 142, 35),\n    \"MEDIUM-FOREST-GREEN\" : makeColor(107, 142, 35),\n    \"DARK-OLIVE-GREEN\" : makeColor(85, 107, 47),\n    \"DARK-SEA-GREEN\" : makeColor(143, 188, 139),\n    \"DARK-GREEN\" : makeColor(0, 100, 0),\n    \"LIME-GREEN\" : makeColor(50, 205, 50),\n    \"FOREST-GREEN\" : makeColor(34, 139, 34),\n    \"SPRING-GREEN\" : makeColor(0, 255, 127),\n    \"MEDIUM-SPRING-GREEN\" : makeColor(0, 250, 154),\n    \"SEA-GREEN\" : makeColor(46, 139, 87),\n    \"MEDIUM-SEA-GREEN\" : makeColor(60, 179, 113),\n    \"LIGHT-GREEN\" : makeColor(144, 238, 144),\n    \"PALE-GREEN\" : makeColor(152, 251, 152),\n    \"MEDIUM-AQUAMARINE\" : makeColor(102, 205, 170),\n    \"LIGHT-SEA-GREEN\" : makeColor(32, 178, 170),\n    \"MEDIUM-TURQUOISE\" : makeColor(72, 209, 204),\n    \"MINT-CREAM\" : makeColor(245, 255, 250),\n    \"ROYAL-BLUE\" : makeColor(65, 105, 225),\n    \"DODGER-BLUE\" : makeColor(30, 144, 255),\n    \"DEEP-SKY-BLUE\" : makeColor(0, 191, 255),\n    \"CORNFLOWER-BLUE\" : makeColor(100, 149, 237),\n    \"STEEL-BLUE\" : makeColor(70, 130, 180),\n    \"LIGHT-SKY-BLUE\" : makeColor(135, 206, 250),\n    \"DARK-TURQUOISE\" : makeColor(0, 206, 209),\n    \"DARKTURQUOISE\" : makeColor(0, 206, 209),\n    \"SKY-BLUE\" : makeColor(135, 206, 235),\n    \"SKYBLUE\" : makeColor(135, 206, 235),\n    \"CADET-BLUE\" : makeColor(96, 160, 160),\n    \"DARK-SLATE-GRAY\" : makeColor(47, 79, 79),\n    \"LIGHT-STEEL-BLUE\" : makeColor(176, 196, 222),\n    \"LIGHT-BLUE\" : makeColor(173, 216, 230),\n    \"POWDER-BLUE\" : makeColor(176, 224, 230),\n    \"PALE-TURQUOISE\" : makeColor(175, 238, 238),\n    \"LIGHT-CYAN\" : makeColor(224, 255, 255),\n    \"ALICE-BLUE\" : makeColor(240, 248, 255),\n    \"MEDIUM-BLUE\" : makeColor(0, 0, 205),\n    \"DARK-BLUE\" : makeColor(0, 0, 139),\n    \"MIDNIGHT-BLUE\" : makeColor(25, 25, 112),\n    \"BLUE-VIOLET\" : makeColor(138, 43, 226),\n    \"MEDIUM-SLATE-BLUE\" : makeColor(123, 104, 238),\n    \"SLATE-BLUE\" : makeColor(106, 90, 205),\n    \"DARK-SLATE-BLUE\" : makeColor(72, 61, 139),\n    \"DARK-VIOLET\" : makeColor(148, 0, 211),\n    \"DARK-ORCHID\" : makeColor(153, 50, 204),\n    \"MEDIUM-PURPLE\" : makeColor(147, 112, 219),\n    \"MEDIUM-ORCHID\" : makeColor(186, 85, 211),\n    \"DARK-MAGENTA\" : makeColor(139, 0, 139),\n    \"GHOST-WHITE\" : makeColor(248, 248, 255),\n    \"WHITE-SMOKE\" : makeColor(245, 245, 245),\n    \"LIGHT-GRAY\" : makeColor(211, 211, 211),\n    \"DARK-GRAY\" : makeColor(169, 169, 169),\n    \"DIM-GRAY\" : makeColor(105, 105, 105),\n\n    \"ORANGE\" : makeColor(255, 165, 0),\n    \"ORANGERED\" : makeColor(255, 69, 0),\n    \"TOMATO\" : makeColor(255, 99, 71),\n    \"DARKRED\" : makeColor(139, 0, 0),\n    \"RED\" : makeColor(255, 0, 0),\n    \"FIREBRICK\" : makeColor(178, 34, 34),\n    \"CRIMSON\" : makeColor(220, 20, 60),\n    \"DEEPPINK\" : makeColor(255, 20, 147),\n    \"MAROON\" : makeColor(176, 48, 96),\n    \"INDIAN RED\" : makeColor(205, 92, 92),\n    \"INDIANRED\" : makeColor(205, 92, 92),\n    \"MEDIUM VIOLET RED\" : makeColor(199, 21, 133),\n    \"MEDIUMVIOLETRED\" : makeColor(199, 21, 133),\n    \"VIOLET RED\" : makeColor(208, 32, 144),\n    \"VIOLETRED\" : makeColor(208, 32, 144),\n    \"LIGHTCORAL\" : makeColor(240, 128, 128),\n    \"HOTPINK\" : makeColor(255, 105, 180),\n    \"PALEVIOLETRED\" : makeColor(219, 112, 147),\n    \"LIGHTPINK\" : makeColor(255, 182, 193),\n    \"ROSYBROWN\" : makeColor(188, 143, 143),\n    \"PINK\" : makeColor(255, 192, 203),\n    \"ORCHID\" : makeColor(218, 112, 214),\n    \"LAVENDERBLUSH\" : makeColor(255, 240, 245),\n    \"SNOW\" : makeColor(255, 250, 250),\n    \"CHOCOLATE\" : makeColor(210, 105, 30),\n    \"SADDLEBROWN\" : makeColor(139, 69, 19),\n    \"BROWN\" : makeColor(132, 60, 36),\n    \"DARKORANGE\" : makeColor(255, 140, 0),\n    \"CORAL\" : makeColor(255, 127, 80),\n    \"SIENNA\" : makeColor(160, 82, 45),\n    \"SALMON\" : makeColor(250, 128, 114),\n    \"PERU\" : makeColor(205, 133, 63),\n    \"DARKGOLDENROD\" : makeColor(184, 134, 11),\n    \"GOLDENROD\" : makeColor(218, 165, 32),\n    \"SANDYBROWN\" : makeColor(244, 164, 96),\n    \"LIGHTSALMON\" : makeColor(255, 160, 122),\n    \"DARKSALMON\" : makeColor(233, 150, 122),\n    \"GOLD\" : makeColor(255, 215, 0),\n    \"YELLOW\" : makeColor(255, 255, 0),\n    \"OLIVE\" : makeColor(128, 128, 0),\n    \"BURLYWOOD\" : makeColor(222, 184, 135),\n    \"TAN\" : makeColor(210, 180, 140),\n    \"NAVAJOWHITE\" : makeColor(255, 222, 173),\n    \"PEACHPUFF\" : makeColor(255, 218, 185),\n    \"KHAKI\" : makeColor(240, 230, 140),\n    \"DARKKHAKI\" : makeColor(189, 183, 107),\n    \"MOCCASIN\" : makeColor(255, 228, 181),\n    \"WHEAT\" : makeColor(245, 222, 179),\n    \"BISQUE\" : makeColor(255, 228, 196),\n    \"PALEGOLDENROD\" : makeColor(238, 232, 170),\n    \"BLANCHEDALMOND\" : makeColor(255, 235, 205),\n    \"MEDIUM GOLDENROD\" : makeColor(234, 234, 173),\n    \"MEDIUMGOLDENROD\" : makeColor(234, 234, 173),\n    \"PAPAYAWHIP\" : makeColor(255, 239, 213),\n    \"MISTYROSE\" : makeColor(255, 228, 225),\n    \"LEMONCHIFFON\" : makeColor(255, 250, 205),\n    \"ANTIQUEWHITE\" : makeColor(250, 235, 215),\n    \"CORNSILK\" : makeColor(255, 248, 220),\n    \"LIGHTGOLDENRODYELLOW\" : makeColor(250, 250, 210),\n    \"OLDLACE\" : makeColor(253, 245, 230),\n    \"LINEN\" : makeColor(250, 240, 230),\n    \"LIGHTYELLOW\" : makeColor(255, 255, 224),\n    \"SEASHELL\" : makeColor(255, 245, 238),\n    \"BEIGE\" : makeColor(245, 245, 220),\n    \"FLORALWHITE\" : makeColor(255, 250, 240),\n    \"IVORY\" : makeColor(255, 255, 240),\n    \"GREEN\" : makeColor(0, 255, 0),\n    \"LAWNGREEN\" : makeColor(124, 252, 0),\n    \"CHARTREUSE\" : makeColor(127, 255, 0),\n    \"GREEN YELLOW\" : makeColor(173, 255, 47),\n    \"GREENYELLOW\" : makeColor(173, 255, 47),\n    \"YELLOW GREEN\" : makeColor(154, 205, 50),\n    \"YELLOWGREEN\" : makeColor(154, 205, 50),\n    \"MEDIUM FOREST GREEN\" : makeColor(107, 142, 35),\n    \"OLIVEDRAB\" : makeColor(107, 142, 35),\n    \"MEDIUMFORESTGREEN\" : makeColor(107, 142, 35),\n    \"DARK OLIVE GREEN\" : makeColor(85, 107, 47),\n    \"DARKOLIVEGREEN\" : makeColor(85, 107, 47),\n    \"DARKSEAGREEN\" : makeColor(143, 188, 139),\n    \"LIME\" : makeColor(0, 255, 0),\n    \"DARK GREEN\" : makeColor(0, 100, 0),\n    \"DARKGREEN\" : makeColor(0, 100, 0),\n    \"LIME GREEN\" : makeColor(50, 205, 50),\n    \"LIMEGREEN\" : makeColor(50, 205, 50),\n    \"FOREST GREEN\" : makeColor(34, 139, 34),\n    \"FORESTGREEN\" : makeColor(34, 139, 34),\n    \"SPRING GREEN\" : makeColor(0, 255, 127),\n    \"SPRINGGREEN\" : makeColor(0, 255, 127),\n    \"MEDIUM SPRING GREEN\" : makeColor(0, 250, 154),\n    \"MEDIUMSPRINGGREEN\" : makeColor(0, 250, 154),\n    \"SEA GREEN\" : makeColor(46, 139, 87),\n    \"SEAGREEN\" : makeColor(46, 139, 87),\n    \"MEDIUM SEA GREEN\" : makeColor(60, 179, 113),\n    \"MEDIUMSEAGREEN\" : makeColor(60, 179, 113),\n    \"AQUAMARINE\" : makeColor(112, 216, 144),\n    \"LIGHTGREEN\" : makeColor(144, 238, 144),\n    \"PALE GREEN\" : makeColor(152, 251, 152),\n    \"PALEGREEN\" : makeColor(152, 251, 152),\n    \"MEDIUM AQUAMARINE\" : makeColor(102, 205, 170),\n    \"MEDIUMAQUAMARINE\" : makeColor(102, 205, 170),\n    \"TURQUOISE\" : makeColor(64, 224, 208),\n    \"LIGHTSEAGREEN\" : makeColor(32, 178, 170),\n    \"MEDIUM TURQUOISE\" : makeColor(72, 209, 204),\n    \"MEDIUMTURQUOISE\" : makeColor(72, 209, 204),\n    \"HONEYDEW\" : makeColor(240, 255, 240),\n    \"MINTCREAM\" : makeColor(245, 255, 250),\n    \"ROYALBLUE\" : makeColor(65, 105, 225),\n    \"DODGERBLUE\" : makeColor(30, 144, 255),\n    \"DEEPSKYBLUE\" : makeColor(0, 191, 255),\n    \"CORNFLOWERBLUE\" : makeColor(100, 149, 237),\n    \"STEEL BLUE\" : makeColor(70, 130, 180),\n    \"STEELBLUE\" : makeColor(70, 130, 180),\n    \"LIGHTSKYBLUE\" : makeColor(135, 206, 250),\n    \"DARK TURQUOISE\" : makeColor(0, 206, 209),\n    \"CYAN\" : makeColor(0, 255, 255),\n    \"AQUA\" : makeColor(0, 255, 255),\n    \"DARKCYAN\" : makeColor(0, 139, 139),\n    \"TEAL\" : makeColor(0, 128, 128),\n    \"SKY BLUE\" : makeColor(135, 206, 235),\n    \"CADET BLUE\" : makeColor(96, 160, 160),\n    \"CADETBLUE\" : makeColor(95, 158, 160),\n    \"DARK SLATE GRAY\" : makeColor(47, 79, 79),\n    \"DARKSLATEGRAY\" : makeColor(47, 79, 79),\n    \"LIGHTSLATEGRAY\" : makeColor(119, 136, 153),\n    \"SLATEGRAY\" : makeColor(112, 128, 144),\n    \"LIGHT STEEL BLUE\" : makeColor(176, 196, 222),\n    \"LIGHTSTEELBLUE\" : makeColor(176, 196, 222),\n    \"LIGHT BLUE\" : makeColor(173, 216, 230),\n    \"LIGHTBLUE\" : makeColor(173, 216, 230),\n    \"POWDERBLUE\" : makeColor(176, 224, 230),\n    \"PALETURQUOISE\" : makeColor(175, 238, 238),\n    \"LIGHTCYAN\" : makeColor(224, 255, 255),\n    \"ALICEBLUE\" : makeColor(240, 248, 255),\n    \"AZURE\" : makeColor(240, 255, 255),\n    \"MEDIUM BLUE\" : makeColor(0, 0, 205),\n    \"MEDIUMBLUE\" : makeColor(0, 0, 205),\n    \"DARKBLUE\" : makeColor(0, 0, 139),\n    \"MIDNIGHT BLUE\" : makeColor(25, 25, 112),\n    \"MIDNIGHTBLUE\" : makeColor(25, 25, 112),\n    \"NAVY\" : makeColor(36, 36, 140),\n    \"BLUE\" : makeColor(0, 0, 255),\n    \"INDIGO\" : makeColor(75, 0, 130),\n    \"BLUE VIOLET\" : makeColor(138, 43, 226),\n    \"BLUEVIOLET\" : makeColor(138, 43, 226),\n    \"MEDIUM SLATE BLUE\" : makeColor(123, 104, 238),\n    \"MEDIUMSLATEBLUE\" : makeColor(123, 104, 238),\n    \"SLATE BLUE\" : makeColor(106, 90, 205),\n    \"SLATEBLUE\" : makeColor(106, 90, 205),\n    \"PURPLE\" : makeColor(160, 32, 240),\n    \"DARK SLATE BLUE\" : makeColor(72, 61, 139),\n    \"DARKSLATEBLUE\" : makeColor(72, 61, 139),\n    \"DARKVIOLET\" : makeColor(148, 0, 211),\n    \"DARK ORCHID\" : makeColor(153, 50, 204),\n    \"DARKORCHID\" : makeColor(153, 50, 204),\n    \"MEDIUMPURPLE\" : makeColor(147, 112, 219),\n    \"CORNFLOWER BLUE\" : makeColor(68, 64, 108),\n    \"MEDIUM ORCHID\" : makeColor(186, 85, 211),\n    \"MEDIUMORCHID\" : makeColor(186, 85, 211),\n    \"MAGENTA\" : makeColor(255, 0, 255),\n    \"FUCHSIA\" : makeColor(255, 0, 255),\n    \"DARKMAGENTA\" : makeColor(139, 0, 139),\n    \"VIOLET\" : makeColor(238, 130, 238),\n    \"PLUM\" : makeColor(221, 160, 221),\n    \"LAVENDER\" : makeColor(230, 230, 250),\n    \"THISTLE\" : makeColor(216, 191, 216),\n    \"GHOSTWHITE\" : makeColor(248, 248, 255),\n    \"WHITE\" : makeColor(255, 255, 255),\n    \"WHITESMOKE\" : makeColor(245, 245, 245),\n    \"GAINSBORO\" : makeColor(220, 220, 220),\n    \"LIGHT GRAY\" : makeColor(211, 211, 211),\n    \"LIGHTGRAY\" : makeColor(211, 211, 211),\n    \"SILVER\" : makeColor(192, 192, 192),\n    \"GRAY\" : makeColor(190, 190, 190),\n    \"DARK GRAY\" : makeColor(169, 169, 169),\n    \"DARKGRAY\" : makeColor(169, 169, 169),\n    \"DIM GRAY\" : makeColor(105, 105, 105),\n    \"DIMGRAY\" : makeColor(105, 105, 105),\n    \"BLACK\" : makeColor(0, 0, 0),\n    \"TRANSPARENT\" : makeColor(0, 0, 0, 0),\n};\n\n// Integer\n// generates a random key so react stops complaining\nfunction genKey() {\n    return Math.round(Math.random() * 100000000);\n}\n\n/*\nTODO:\n  Figure out how stars, pentagons, hexagons should work (yay geometry)\n  turn rectangles and triangles into polygons?\n*/\n\n// Integer, Integer, Integer[, Integer] -> Color \nfunction makeColor (r, g, b, a = 255) {\n    if (r < 0 || r > 255 ||\n        g < 0 || g > 255 ||\n        b < 0 || b > 255 ||\n        a < 0 || a > 255 ){\n        throw new Error('r g b a values must be between 0 and 255 (inclusive)');\n    }\n\n    return {r, g, b, a};\n}\n\n// Color, Integer -> Color\nfunction changeAlpha (color, a) {\n    return makeColor(color.r, color.g, color.b, a);\n}\n\n// Integer -> Integer\n// pretty much makes sure the argument is non-negative\nfunction checkDimension(maybeDimension) {\n    if (maybeDimension < 0) {\n        throw new Error('shape dimensions must be non-negative');\n    }\n\n    return maybeDimension;\n}\n\n// (String or Color) -> Color\nfunction checkColor(maybeColor) {\n    if (typeof maybeColor === 'string') {\n        let color = colorDb[maybeColor.replace(' ', '').toUpperCase()];\n        if (color === undefined) {\n            throw new Error(`${maybeColor} is not a valid color`);\n        }\n\n        return color;\n    } \n\n    // T_ODO: check if maybeColor is actually a color object\n    // nvm, I do that in interpreter.js\n    return maybeColor;\n}\n\nfunction checkMode(maybeMode) {\n    if (maybeMode !== 'solid' && maybeMode !== 'outline') {\n        throw new Error(`${maybeMode} is not a valid mode`);\n    }\n\n    return maybeMode;\n}\n\nfunction checkXPlace(maybeXPlace) {\n    if (maybeXPlace === 'middle') {\n        return 'center';\n    }\n\n    if (maybeXPlace !== 'left' && maybeXPlace !== 'right' && maybeXPlace !== 'center') {\n        throw new Error(`${maybeXPlace} is not a valid x-place`);\n    }\n\n    return maybeXPlace;\n}\n\nfunction checkYPlace(maybeYPlace) {\n    if (maybeYPlace === 'middle') {\n        return 'center';\n    }\n\n    if (maybeYPlace !== 'top' && maybeYPlace !== 'bottom' && maybeYPlace !== 'center') {\n        throw new Error(`${maybeYPlace} is not a valid y-place`);\n    }\n\n    return maybeYPlace;\n}\n\n// Integer (String or Integer) Color -> Circle\nfunction makeCircle (r, mode, color) {\n    if (typeof mode === 'string') {\n        return {r: checkDimension(r), mode: checkMode(mode), color: checkColor(color), type: 'circle'};\n    } else {\n        return {r: checkDimension(r), mode: 'solid', color: changeAlpha(checkColor(color), mode), type: 'circle'};\n    }\n}\n\n// Integer Integer (String or Integer) Color -> Rectangle\nfunction makeRectangle (width, height, mode, color) {\n    if (typeof mode === 'string') {\n        return {width: checkDimension(width), height: checkDimension(height), mode: checkMode(mode),  color: checkColor(color), type: 'rect'};\n    } else {\n        return {width: checkDimension(width), height: checkDimension(height), mode: 'solid',  color: changeAlpha(checkColor(color), mode), type: 'rect'};\n    }\n}\n\n// Integer Integer Integer (String or Integer) Color -> Triangle\nfunction makeTriangle (A, B, C, mode, color) {\n    if (typeof mode === 'string') {\n        return {A: checkDimension(A), B: checkDimension(B), C: checkDimension(C), mode: checkMode(mode), color: checkColor(color), type: 'triangle'};\n    } else {\n        return {A: checkDimension(A), B: checkDimension(B), C: checkDimension(C), mode: 'solid', color: changeAlpha(checkColor(color), mode), type: 'triangle'};\n    }\n}\n\n// Integer (String or Integer) Color -> Triangle\nfunction makeEquiTriangle (length, mode, color) {\n    return makeTriangle(length, length, length, mode, color);\n}\n\n// [{x: Integer, y: Integer}], (String or Integer), Color -> Polygon\nfunction makePolygon (coords, mode, color) {\n    if (typeof mode === 'string') {\n        return {coordinates: coords, mode: checkMode(mode), color: checkColor(color), type: 'polygon'};\n    } else {\n        return {coordinates: coords, mode: 'solid', color: changeAlpha(checkColor(color), mode), type: 'polygon'};\n    }\n}\n\n// Integer, (String or Integer), Color -> Polygon\nfunction makePentagon (length, mode, color) {\n}\n\n// Integer, (String or Integer), Color -> Polygon\nfunction makeHexagon (length, mode, color) {\n}\n\n// Integer, (String or Integer), Color -> Polygon\nfunction makeStar (length, mode, color) {\n    \n}\n\n// [Image] -> Image\nfunction makeBeside (images, yplace = 'center') {\n    return {images, yplace: checkYPlace(yplace), type: 'beside'};\n}\n\n// [Image] -> Image\nfunction makeAbove (images, xplace = 'center') {\n    return {images, xplace: checkXPlace(xplace), type: 'above'};\n}\n\n// [Image] -> Image\nfunction makeOverlay (images, xplace = 'center', yplace = 'center') {\n    return {images, xplace: checkXPlace(xplace), yplace: checkYPlace(yplace), type: 'overlay'};\n}\n\nfunction makePlace (image, x, y, scene) {\n    return {image, x, y, scene, type: 'place'};\n}\n\n// Integer, Integer[, (Color or String)] -> Image\nfunction emptyScene (w, h, color = 'white') {\n    return makeOverlay([makeRectangle(w, h, 'outline', 'black'), makeRectangle(w, h, 'solid', color)]);\n}\n\n// Image -> Integer\nfunction width (image) {\n    switch (image.type) {\n    case 'circle':\n        return image.r * 2;\n    case 'rect':\n        return image.width;\n    case 'triangle':\n        return image.A;\n    case 'polygon':\n        return image.coordinates.map((coord) => coord.x).reduce((acc, x) => Math.max(acc, x));\n    case 'beside':\n        return image.images.reduce((acc, image) => acc + width(image), 0);\n    case 'above':\n        return image.images.reduce((acc, image) => Math.max(acc, width(image)), 0);\n    case 'overlay':\n        return image.images.reduce((acc, image) => Math.max(acc, width(image)), 0);\n    case 'place':\n        return width(image.scene);\n    default:\n        return new Error (`Unknown Image Type: ${image.type}`);\n    }\n}\n\n// Image -> Integer\nfunction height (image) {\n    switch (image.type) {\n    case 'circle':\n        return image.r * 2;\n    case 'rect':\n        return image.height;\n    case 'triangle':\n        // Heron's Formula, I went on Wikihow for this, don't judge\n        let s = (image.A + image.B + image.C) / 2;\n        let area = Math.sqrt(s * (s  - image.A) * (s - image.B) * (s - image.C));\n        return Math.round((area * 2) / image.A);\n    case 'polygon':\n        return image.coordinates.map((coord) => coord.y).reduce((acc, y) => Math.max(acc, y));\n    case 'beside':\n        return image.images.reduce((acc, image) => Math.max(acc, height(image)), 0);\n    case 'above':\n        return image.images.reduce((acc, image) => acc + height(image), 0);\n    case 'overlay':\n        return image.images.reduce((acc, image) => Math.max(acc, height(image)), 0);\n    case 'place':\n        return height(image.scene);\n    default:\n        return new Error (`Unknown Image Type: ${image.type}`);\n    }\n}\n\n\n// Image, Integer, Integer -> SVG\nfunction render (image, x, y) {\n    switch (image.type) {\n    case 'circle':\n        return render_circle(image, x, y);\n    case 'rect':\n        return render_rect(image, x, y);\n    case 'triangle':\n        return render_triangle(image, x, y);\n    case 'polygon':\n        return render_polygon(image, x, y);\n    case 'beside':\n        return render_beside(image, x, y);\n    case 'above':\n        return render_above(image, x, y);\n    case 'overlay':\n        return render_overlay(image, x, y);\n    case 'place':\n        return render_place(image, x, y);\n    default:\n        throw new Error (`Unknown Image Type: ${image.type}`);\n    }\n}\n\n// Circle, Integer, Integer -> SVG\nfunction render_circle (image, x, y) {\n    let red = image.color.r;\n    let green = image.color.g;\n    let blue = image.color.b;\n    // for some reason alpha is the only float in rgba in css...\n    let alpha = image.color.a / 255;\n    switch (image.mode) {\n    case 'solid':\n        return <circle cx={x + image.r}\n                       cy={y + image.r}\n                       r={image.r}\n                       fill={`rgba(${red}, ${green}, ${blue}, ${alpha})`}\n               />;\n    case 'outline':\n        // stroke is pretty annoying...\n        // it draws both outside of the shape and inside it...\n        //so it's difficult to figure out where exactly it wants to draw\n\n        // this should draw the outline of a circle (approximately)\n        // not sure how it works on browsers besides firefox though\n        return <circle cx={x + image.r}\n                       cy={y + image.r}\n                       r={image.r - .5}\n                       fill='none'\n                       stroke={`rgba(${red}, ${green}, ${blue}, ${alpha})`}\n                       strokeWidth={1}\n               />;\n    default:\n        throw new Error (`Unknown Image Mode: ${image.mode}`);\n    }\n}\n\n// Rectangle, Integer, Integer -> SVG\nfunction render_rect (image, x, y) {\n    let red = image.color.r;\n    let green = image.color.g;\n    let blue = image.color.b;\n    let alpha = image.color.a / 255;\n\n    switch (image.mode) {\n    case 'solid':\n        return <rect x={x}\n                     y={y}\n                     width={image.width}\n                     height={image.height}\n                     fill={`rgba(${red}, ${green}, ${blue}, ${alpha})`}\n               />;\n    case 'outline':\n        // stroke has similar problems here as it does in circle\n        return <rect x={x + .5}\n                      y={y + .5}\n                      width={image.width - 1}\n                      height={image.height - 1}\n                      fill='none'\n                      stroke={`rgba(${red}, ${green}, ${blue}, ${alpha})`}\n                      strokeWidth={1}\n                 />;\n    default:\n        throw new Error (`Unknown Image Mode: ${image.mode}`);\n    }\n}\n\n// Triangle, Integer, Integer -> SVG\nfunction render_triangle (image, x, y) {\n    let red = image.color.r;\n    let green = image.color.g;\n    let blue = image.color.b;\n    let alpha = image.color.a / 255;\n\n    let D = Math.round(Math.sqrt(Math.pow(image.B, 2) - Math.pow(height(image), 2))); \n    // these are coordinates                                   //         b       \n    let a = {x: x, y: y + height(image)};                      //         .       \n    let b = {x: x + D, y: y};                                  //        /|\\      \n    let c = {x: x + width(image), y: y + height(image)};       //       / | \\     \n                                                               //   B  /  |  \\  C\n                                                               //     /   |h  \\\n                                                               //    /    |    \\\n                                                               //   ._____|_____.\n                                                               //  a   D  A      c\n    switch (image.mode) {                                       \n    case 'solid':                                               \n        return <polygon\n                 points={`${a.x},${a.y} ${b.x},${b.y} ${c.x},${c.y}`}\n                 fill={`rgba(${red}, ${green}, ${blue}, ${alpha})`}\n               />;\n    case 'outline':\n        return <polygon\n                 points={`${a.x},${a.y} ${b.x},${b.y} ${c.x},${c.y}`}\n                 fill='none'\n                 stroke={`rgba(${red}, ${green}, ${blue}, ${alpha})`}\n                 strokeWidth={1}\n               />;\n    default:\n        throw new Error (`Unknown Image Mode: ${image.mode}`);\n    }\n}\n\n// Polygon, Integer, Integer -> SVG\nfunction render_polygon (image, x, y) {\n    let red = image.color.r;\n    let green = image.color.g;\n    let blue = image.color.b;\n    let alpha = image.color.a / 255;\n\n    let points = image.coordinates.map((coord) => `${coord.x + x},${coord.y + y}`).reduce((acc, cur) => acc + ' ' + cur);\n    switch (image.mode) {\n    case 'solid':                                               \n        return <polygon\n                 points={points}\n                 fill={`rgba(${red}, ${green}, ${blue}, ${alpha})`}\n               />;\n    case 'outline':\n        return <polygon\n                 points={points}\n                 fill='none'\n                 stroke={`rgba(${red}, ${green}, ${blue}, ${alpha})`}\n                 strokeWidth={1}\n               />;\n    default:\n        throw new Error (`Unknown Image Mode: ${image.mode}`);\n    }\n}\n\n\n// should I flatten [SVG]s?\n// no, not really any point. react seems to figure it out\n\n// (Integer, Integer -> Integer), (Integer, Integer -> Integer), (Integer, Integer -> Integer), (Integer, Integer -> Integer) -> ([Image], Integer, Integer) -> [SVG]\nfunction make_list_renderer (xCorrect, yCorrect, xChange, yChange) {\n    function render_list (images, x, y) {\n        if (images.length === 0) {\n            throw new Error('I need at least 1 image to render!');\n        }\n\n        let w = width(images[0]);\n        let h = height(images[0]);\n\n        let first = render(images[0], xCorrect(x, w), yCorrect(y, h));\n\n        if (images.length === 1) {\n            return [first];\n        }\n\n        let rest = render_list(images.slice(1), xChange(x, w), yChange(y, h));\n\n        // return list in reverse because the last child of an svg tag is shown on top\n        // this matters for overlay, but makes no difference in beside, above\n        return [...rest, first];\n    }\n\n    return render_list;\n}\n\n// Beside, Ingeger, Integer -> [SVG]\nfunction render_beside (image, x, y) {\n    let initY = y,\n        yCorrect = (y, h) => y;\n\n    switch(image.yplace) {\n    case 'top':\n        break;\n    case 'center':\n        initY = y + height(image) / 2;\n        yCorrect = (y, h) => y - h/2;\n        break;\n    case 'bottom':\n        initY = y + height(image);\n        yCorrect = (y, h) => y - h;\n        break;\n    default:\n        throw new Error(`Unknown y-place: ${image.yplace}`);\n    }\n\n    let renderoozle = make_list_renderer((x, w) => x,\n                                         yCorrect,\n                                         (x, dx) => x + dx,\n                                         (y, dy) => y);\n    return renderoozle(image.images, x, initY);\n}\n\n// Above, Integer, Integer -> [SVG]\nfunction render_above (image, x, y) {\n    let initX = x,\n        xCorrect = (x, w) => x;\n\n    switch(image.xplace) {\n    case 'left':\n        break;\n    case 'center':\n        initX = x + width(image) / 2;\n        xCorrect = (x, w) => x - w/2;\n        break;\n    case 'right':\n        initX = x + width(image);\n        xCorrect = (x, w) => x - w;\n        break;\n    default:\n        throw new Error(`Unknown x-place: ${image.xplace}`);\n    }\n\n    let renderoozle = make_list_renderer(xCorrect,\n                                         (y, h) => y,\n                                         (x, dx) => x,\n                                         (y, dy) => y + dy);\n    return renderoozle(image.images, initX, y);\n\n}\n\n// Overlay, Integer, Integer -> [SVG]\nfunction render_overlay (image, x, y) {\n    let initX = x,\n        initY = y,\n        xCorrect = (x, w) => x,\n        yCorrect = (y, h) => y;\n    \n    switch(image.xplace) {\n    case 'left':\n        break;\n    case 'center':\n        initX = x + width(image) / 2;\n        xCorrect = (x, w) => x - w/2;\n        break;\n    case 'right':\n        initX = x + width(image);\n        xCorrect = (x, w) => x - w;\n        break;\n    default:\n        throw new Error(`Unknown x-place: ${image.xplace}`);\n    }\n\n    switch(image.yplace) {\n    case 'top':\n        break;\n    case 'center':\n        initY = y + height(image) / 2;\n        yCorrect = (y, h) => y - h/2;\n        break;\n    case 'bottom':\n        initY = y + height(image);\n        yCorrect = (y, h) => y - h;\n        break;\n    default:\n        throw new Error(`Unknown y-place: ${image.yplace}`);\n    }\n\n    let renderoozle = make_list_renderer(xCorrect,\n                                         yCorrect,\n                                         (x, dx) => x,\n                                         (y, dy) => y);\n    return renderoozle(image.images, initX, initY);\n}\n\n// Place, Integer, Integer -> SVG\nfunction render_place (image, x, y) {\n    return [render(image.scene, x, y), render(image.image, x + image.x - width(image.image) / 2, y + image.y - height(image.image) / 2)];\n}\n\n// Image -> top level SVG\nfunction paint (image) {\n    let picture = render(image, 0, 0);\n    return (\n        <svg viewBox={`0 0 ${width(image)} ${height(image)}`}\n             xmlns='http://www.w3.org/2000/svg'\n             width={width(image)}\n             height={height(image)}\n             key={genKey()}\n        >\n          {picture}\n        </svg>\n    );\n}\n\nexport {makeCircle, makeRectangle, makeEquiTriangle, makeStar, makePentagon, makeHexagon,\n        makeBeside, makeAbove, makeOverlay,\n        makePlace, emptyScene, makeColor,\n        paint, width, height};\n","import {makeCircle, makeRectangle, makeEquiTriangle,\n        makeBeside, makeAbove, makeOverlay,\n        makePlace, emptyScene, makeColor,\n        paint} from './image.js';\n\n/****************\n   Interpreter\n****************/\n\nconst RVAR_T =    0;\nconst RAPP_T =    1;\nconst RFUNCT_T =  2;\nconst RNUM_T =    3;\nconst RBOOL_T =   4;\nconst RSTRING_T = 5;\nconst RLIST_T =   6;\nconst RSYM_T =    7;\nconst RIMAGE_T =  8;\nconst RCOLOR_T =  9;\nconst RIF_T =     10;\nconst RSTRUCT_T = 11;\n\nconst varRE = /^[^\\s\",'`()[\\]{}|;#]+/; // except numbers\nconst appRE = /^\\(/;\nconst numRE = /^-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?=$|[\\s\",'`()[\\]{}|;#])/; // this one doesn't permit fractions\nconst boolRE = /^#(?:[tfTF]|true|false)(?=$|[\\s\",'`()[\\]{}|;#])/;\nconst strRE = /^\"[^\\\\\"]*\"/; // TODO: handle backslash escape\nconst quoteRE = /^'/;\nconst symRE = /^[^\\s\",'`()[\\]{}|;#]+/; // except numbers\nconst listRE = /^\\(/;\n\nconst protoEnv = [\n    // functions\n    {name: '+', binding: {type: RFUNCT_T,\n                          value: plus}},\n    {name: 'add1', binding: {type: RFUNCT_T,\n                          value: add1}},\n    {name: '-', binding: {type: RFUNCT_T,\n                          value: minus}},\n    {name: 'sub1', binding: {type: RFUNCT_T,\n                          value: sub1}},\n    {name: '*', binding: {type: RFUNCT_T,\n                          value: times}},\n    {name: '/', binding: {type: RFUNCT_T,\n                          value: divide}},\n    {name: 'car', binding: {type: RFUNCT_T,\n                            value: car}},\n    {name: 'first', binding: {type: RFUNCT_T,\n                              value: car}},\n    {name: 'cdr', binding: {type: RFUNCT_T,\n                            value: cdr}},\n    {name: 'rest', binding: {type: RFUNCT_T,\n                             value: cdr}},\n    {name: 'cons', binding: {type: RFUNCT_T,\n                             value: cons}},\n    {name: 'list', binding: {type: RFUNCT_T,\n                             value: list}},\n    {name: 'not', binding: {type: RFUNCT_T,\n                            value: not}},\n    {name: 'and', binding: {type: RFUNCT_T,\n                            value: and}},\n    {name: 'or', binding: {type: RFUNCT_T,\n                           value: or}},\n    {name: 'eqv?', binding: {type: RFUNCT_T,\n                             value: iseqv}},\n    {name: 'null?', binding: {type: RFUNCT_T,\n                              value: isnull}},\n    {name: 'empty?', binding: {type: RFUNCT_T,\n                               value: isnull}},\n    {name: 'cons?', binding: {type: RFUNCT_T,\n                               value: iscons}},\n    {name: '=', binding: {type: RFUNCT_T,\n                          value: equalsign}},\n    {name: '>', binding: {type: RFUNCT_T,\n                          value: gtsign}},\n    {name: '>=', binding: {type: RFUNCT_T,\n                           value: gesign}},\n    {name: '<', binding: {type: RFUNCT_T,\n                          value: ltsign}},\n    {name: '<=', binding: {type: RFUNCT_T,\n                           value: lesign}},\n    {name: 'string-length', binding: {type: RFUNCT_T,\n                           value: stringLength}},\n    {name: 'string-append', binding: {type: RFUNCT_T,\n                           value: stringAppend}},\n    {name: 'string=?', binding: {type: RFUNCT_T,\n                                 value: isstrequal}},\n    {name: 'circle', binding: {type: RFUNCT_T,\n                               value: circle}},\n    {name: 'rectangle', binding: {type: RFUNCT_T,\n                               value: rectangle}},\n    {name: 'square', binding: {type: RFUNCT_T,\n                               value: square}},\n    {name: 'triangle', binding: {type: RFUNCT_T,\n                               value: triangle}},\n    {name: 'beside', binding: {type: RFUNCT_T,\n                               value: beside}},\n    {name: 'beside/align', binding: {type: RFUNCT_T,\n                               value: besideAlign}},\n    {name: 'above', binding: {type: RFUNCT_T,\n                               value: above}},\n    {name: 'above/align', binding: {type: RFUNCT_T,\n                               value: aboveAlign}},\n    {name: 'overlay', binding: {type: RFUNCT_T,\n                               value: overlay}},\n    {name: 'overlay/align', binding: {type: RFUNCT_T,\n                               value: overlayAlign}},\n    {name: 'place-image', binding: {type: RFUNCT_T,\n                                    value: placeImage}},\n    {name: 'empty-scene', binding: {type: RFUNCT_T,\n                                    value: empty_Scene}},\n    {name: 'color', binding: {type: RFUNCT_T,\n                              value: color}},\n    // constants\n    {name: 'true', binding: {type: RBOOL_T,\n                             value: true}},\n    {name: 'false', binding: {type: RBOOL_T,\n                              value: false}},\n    {name: 'null', binding: {type: RLIST_T,\n                             value: null}},\n    {name: 'empty', binding: {type: RLIST_T,\n                              value: null}},\n];\n\nconst initEnv = makeStruct('posn', ['x', 'y'], protoEnv);\n\n// String -> {prog: Program, rest: String}\n// parses all expressions except quoted expressions\nfunction parse(text) {\n    if (numRE.test(text)) {\n        let matches = text.match(numRE);\n        let numStr = matches[0];\n        let rest = text.slice(numStr.length).trim();\n        let num = {value: +numStr, type: RNUM_T};\n\n        return {prog: num, rest: rest};\n    } else if (varRE.test(text)) {\n        let matches = text.match(varRE);\n        let name = matches[0];\n        let rest = text.slice(name.length).trim();\n        let variable = {value: name, type: RVAR_T};\n\n        return {prog: variable, rest: rest};\n\n\n    } else if (boolRE.test(text)) {\n        let matches = text.match(boolRE);\n        let boolStr = matches[0];\n        let rest = text.slice(boolStr.length).trim();\n        let bool = {value: boolStr[1].toLowerCase() === 't', type: RBOOL_T};\n\n        return {prog: bool, rest: rest};\n\n    } else if (strRE.test(text)) {\n        let matches = text.match(strRE);\n        let value = matches[0].substring(1, matches[0].length - 1); // trim off quotes\n        let str = {value: value, type: RSTRING_T};\n        let rest = text.slice(matches[0].length).trim();\n\n        return {prog: str, rest: rest};\n\n    } else if (appRE.test(text)) {\n        text = text.slice(1).trim(); // remove open paren\n        let parseFunct = parse(text); // parse function\n        let funct = parseFunct.prog; // get function\n        text = parseFunct.rest; // get past function\n        let args = [];\n\n        while (text[0] !== ')') {\n            let parseArg = parse(text);\n            args = [...args, parseArg.prog];\n            text = parseArg.rest;\n        }\n\n        let app;\n        if (funct.value === 'or') {\n            if (args.length === 2) {\n                app = {value: {tst: args[0], els: args[1], thn: {value : true, type : RBOOL_T} }, type: RIF_T};\n            }\n            else if (args.length < 2) {\n                throw new SyntaxError('Invalid Syntax: \"' + text + '\"');\n            }\n            else {\n                // should have a loop here\n                throw new SyntaxError('Invalid Syntax: \"' + text + '\"');\n            }\n        }\n        else if (funct.value === 'and') {\n\n\n         if (args.length === 2) {\n                app = {value: {tst: args[0], thn: args[1], els: {value : false, type : RBOOL_T} }, type: RIF_T};\n            }\n            else if (args.length < 2) {\n                throw new SyntaxError('Invalid Syntax: \"' + text + '\"');\n            }\n            else {\n                // should have a loop here\n                throw new SyntaxError('Invalid Syntax: \"' + text + '\"');\n            }\n        }\n        else if (funct.value === 'if') {\n            if (args.length === 3) {\n                app = {value: {tst: args[0], thn: args[1], els: args[2]}, type: RIF_T};\n            }\n            else {\n                throw new SyntaxError('Invalid Syntax: \"' + text + '\"');\n            }\n        } else {\n            app = {value: {funct: funct, args: args}, type: RAPP_T};\n        }\n        let rest = text.slice(1).trim(); // remove close paren\n\n        return {prog: app, rest: rest};\n\n    } else if (quoteRE.test(text)) {\n        return parseQ(text.slice(1).trim());\n    }\n\n    throw new SyntaxError('Invalid Syntax: \"' + text + '\"');\n}\n\n// String -> {prog: Program, rest: String}\n// parses quoted expressions\nfunction parseQ(text) {\n    if (listRE.test(text)) {\n        text = text.slice(1).trim(); // remove quote, open paren\n        let listArr = [];\n\n        while (text[0] !== ')') {\n            let cur = parseQ(text);\n            listArr = [cur.prog, ...listArr]; // listArr is constructed backwards\n            text = cur.rest;\n        }\n\n        let rest = text.slice(1).trim();\n        let prog = listArr.reduce((acc, cur) => ({value: {a: cur, d: acc}, type: RLIST_T}), {value: null, type: RLIST_T}); // turn listArr into an Rlist\n\n        return {prog: prog, rest: rest};\n\n    } else if (numRE.test(text)) {\n        let matches = text.match(numRE);\n        let numStr = matches[0];\n        let rest = text.slice(numStr.length).trim();\n        let num = {value: +numStr, type: RNUM_T};\n\n        return {prog: num, rest: rest};\n\n    } else if (boolRE.test(text)) {\n        let matches = text.match(boolRE);\n        let boolStr = matches[0];\n        let rest = text.slice(boolStr.length).trim();\n        let bool = {value: boolStr.charAt(1).toLowerCase() === 't', type: RBOOL_T};\n\n        return {prog: bool, rest: rest};\n\n    } else if (strRE.test(text)) {\n        let matches = text.match(strRE);\n        let value = matches[0].substring(1, matches[0].length - 1); // trim off quotes\n        let str = {value: value, type: RSTRING_T};\n        let rest = text.slice(matches[0].length).trim();\n\n        return {prog: str, rest: rest};\n\n    } else if (symRE.test(text)) {\n        let matches = text.match(symRE);\n        let value = matches[0];\n        let sym = {value: value, type: RSYM_T};\n        let rest = text.slice(matches[0].length).trim();\n\n        return {prog: sym, rest: rest};\n    }\n\n    throw new SyntaxError('Invalid Syntax: \"' + text + '\"');\n}\n\n/**\n * A Prefix Prog is one of\n *   - defStruct\n *\n * A DefStruct is a\n *   {superID:  String,\n *    fieldIDs: [String],\n *    type: 'struct'}\n */\n\n// String -> [PrefixProg]\nfunction parsePrefix (text) {\n    const commentRE = /;.*/g;\n    const defStructRE = /^\\(define-struct/;\n    const nameRE = /^[^\\s,'`()[\\]{}|;#\\d]+/;\n\n    text = text.replace(commentRE, '');\n    text = text.trim();\n\n    let progs = [];\n\n    while(text !== '') {\n        let parsed = parsePrefixExpr(text);\n\n        text = parsed.rest;\n        progs = [...progs, parsed.prog];\n    }\n\n    return progs;\n\n    // Text -> {prog: PrefixProg, rest: String}\n    function parsePrefixExpr (text) {\n        if (defStructRE.test(text)) {\n            text = text.slice('(define-struct'.length);\n            text = text.trim();\n\n            if (!nameRE.test(text)) {\n                throw new Error('Invalid Struct Name');\n            }\n\n            let superID = text.match(nameRE)[0];\n            text = text.slice(superID.length)\n            text = text.trim();\n\n            if (text[0] !== '(') {\n                throw new Error('Invalid Struct Definition');\n            }\n\n            text = text.slice('('.length);\n            text = text.trim();\n\n            let fieldIDs = [];\n            while (text[0] !== ')') {\n                if (!nameRE.test(text)) {\n                    throw new Error('Invalid Field Name');\n                }\n\n                let fieldID = text.match(nameRE)[0];\n\n                text = text.slice(fieldID.length);\n                text = text.trim();\n\n                fieldIDs = [...fieldIDs, fieldID];\n            }\n\n            if (text[0] !== ')') {\n                throw new Error('Invalid Struct Definition');\n            }\n            text = text.slice(')'.length);\n            text = text.trim();\n\n            if (text[0] !== ')') {\n                throw new Error('Invalid Struct Definition');\n            }\n            text = text.slice(')'.length);\n            text = text.trim();\n\n            return {prog: {superID, fieldIDs, type: 'struct'}, rest: text}\n        } else {\n            throw new Error(`Invalid Prefix Form: ${text}`);\n        }\n    }\n}\n\n/***\n    Environment: [Variable]\n    Variable:    {name:    String,\n                  binding: Program}\n***/\n\n// Program -> Environment -> Program\nfunction interp(prog, env) {\n    function lookup(name) {\n        let val = env.reduce((acc, variable) => {\n            if (acc !== undefined) {\n                return acc;\n            }\n\n            return variable.name === name ? variable.binding : undefined;\n        }, undefined);\n\n        if (val === undefined){\n            throw new ReferenceError(name + ' isn\\'t defined');\n        }\n\n        return val;\n    }\n\n    switch(prog.type) {\n        case RNUM_T:\n            return prog;\n        case RBOOL_T:\n            return prog;\n        case RSTRING_T:\n            return prog;\n        case RLIST_T:\n            return prog;\n        case RSYM_T:\n            return prog;\n        case RVAR_T:\n            return lookup(prog.value);\n        case RFUNCT_T:\n            return prog;\n        case RIF_T:\n            let tst = interp(prog.value.tst, env);\n            typeCheck(tst, [RBOOL_T]);\n\n            if (tst.value) {\n                return interp(prog.value.thn, env);\n            }\n            else {\n                return interp(prog.value.els, env);\n            }\n\n        case RAPP_T:\n            // interpret function (valof rator env)\n            let funct = interp(prog.value.funct, env);\n\n            // interpret arguments (valof rand env)\n            let args = prog.value.args.map((arg) => interp(arg, env));\n\n            typeCheck(funct, [RFUNCT_T]);\n\n            return funct.value(args);\n        case RIMAGE_T:\n            return prog;\n        case RCOLOR_T:\n            return prog;\n\n        default:\n            //console.log(prog);\n            throw new TypeError(\"Unknown Type \" + prog.value);\n    }\n}\n\nfunction interpPrefix (progs, env) {\n    let ext = progs.reduce((curEnv, prog) => {\n        switch (prog.type) {\n            case 'struct':\n                return makeStruct(prog.superID, prog.fieldIDs, curEnv);\n            default:\n                throw new Error('Invalid Prefix Prog');\n        }\n    }, env);\n\n    return ext;\n}\n\n// Program -> String\nfunction toString_cons(prog) {\n    switch (prog.type) {\n        case RNUM_T:\n            return prog.value;\n        case RBOOL_T:\n            return '#' + prog.value;\n        case RSTRING_T:\n            return `\"${prog.value}\"`;\n        case RLIST_T:\n            if (prog.value === null) {\n                return '\\'()';\n            } else {\n                return `(cons ${toString_cons(prog.value.a)} ${toString_cons(prog.value.d)})`;\n            }\n        case RSYM_T:\n            return \"'\" + prog.value;\n        case RVAR_T:\n            return prog.value;\n        case RFUNCT_T:\n            return '#<procedure>';\n        case RAPP_T:\n            return `(${toString_cons(prog.value.funct)} ${prog.value.args.map(toString_cons).join(' ')})`;\n        case RIMAGE_T:\n            return '#<image>';\n        case RCOLOR_T:\n            return '#<color>';\n        case RSTRUCT_T:\n            return `#<${prog.value.id}>`;\n        default:\n            return 'error or something';\n    }\n}\n\n// Program -> String\nfunction toString_list (prog) {\n    switch (prog.type) {\n        case RNUM_T:\n            return prog.value;\n        case RBOOL_T:\n            return '#' + prog.value;\n        case RSTRING_T:\n            return `\"${prog.value}\"`;\n        case RLIST_T:\n            let elems = '';\n            while (prog.value !== null) {\n                elems += ' ' + toString_list(prog.value.a);\n                prog = prog.value.d;\n            }\n            return `(list${elems})`;\n        case RSYM_T:\n            return \"'\" + prog.value;\n        case RVAR_T:\n            return prog.value;\n        case RFUNCT_T:\n            return '#<procedure>';\n        case RAPP_T:\n            return `(${toString_cons(prog.value.funct)} ${prog.value.args.map(toString_cons).join(' ')})`;\n        case RIMAGE_T:\n            return '#<image>';\n        case RCOLOR_T:\n            return '#<color>';\n        case RSTRUCT_T:\n            return `#<${prog.value.id}>`;\n        default:\n            return 'error or something';\n    }\n}\n\n// Program -> [(String or SVG)]\nfunction unparse_cons(prog) {\n    switch (prog.type) {\n        case RNUM_T:\n            return [prog.value];\n        case RBOOL_T:\n            return ['#' + prog.value];\n        case RSTRING_T:\n            return [`\"${prog.value}\"`];\n        case RLIST_T:\n            if (prog.value === null) {\n                return ['\\'()'];\n            } else {\n                return ['(cons ', ...unparse_cons(prog.value.a), ' ', ...unparse_cons(prog.value.d), ')'];\n            }\n        case RSYM_T:\n            return [\"'\" + prog.value];\n        case RVAR_T:\n            return [prog.value];\n        case RFUNCT_T:\n            return ['#<procedure>'];\n        case RAPP_T:\n            return ['(', ...unparse_cons(prog.value.funct), ...prog.value.args.map(unparse_cons).reduce((acc, arr) => [...acc, ' ', ...arr], ''), ')'];\n        case RIMAGE_T:\n            return [paint(prog.value)];\n        case RCOLOR_T:\n            return ['#<color>'];\n        case RSTRUCT_T:\n            return [`(make-${prog.value.id}`, ...prog.value.fields.map((field) => unparse_cons(field.binding)).reduce((acc, arr) => [...acc, ' ', ...arr], ''), ')'];\n        default:\n            //console.log(prog);\n            return 'error or something';\n    }\n}\n\n// Program -> [(String or SVG)]\nfunction unparse_list (prog) {\n    switch (prog.type) {\n        case RNUM_T:\n            return [prog.value];\n        case RBOOL_T:\n            return ['#' + prog.value];\n        case RSTRING_T:\n            return [`\"${prog.value}\"`];\n        case RLIST_T:\n            // special case for empty list\n            if (prog.value === null) {\n                return ['\\'()'];\n            }\n\n            let elems = [];\n            while (prog.value !== null) {\n                elems = [...elems, ' ', ...unparse_list(prog.value.a)];\n                prog = prog.value.d;\n            }\n\n            return ['(list', ...elems, ')'];\n        case RSYM_T:\n            return [\"'\" + prog.value];\n        case RVAR_T:\n            return [prog.value];\n        case RFUNCT_T:\n            return ['#<procedure>'];\n        case RAPP_T:\n            return ['(', ...unparse_list(prog.value.funct), ...prog.value.args.map(unparse_list).reduce((acc, arr) => [...acc, ' ', ...arr], ''), ')'];\n        case RIMAGE_T:\n            return [paint(prog.value)];\n        case RCOLOR_T:\n            return ['#<color>'];\n        case RSTRUCT_T:\n            return [`(make-${prog.value.id}`, ...prog.value.fields.map((field) => unparse_list(field.binding)).reduce((acc, arr) => [...acc, ' ', ...arr], ''), ')'];\n        default:\n            return 'error or something';\n    }\n}\n\n// String -> Program\n// parses text and checks for syntax errors based on what's returned\nfunction parseCheck(text) {\n    let parsed = parse(text);\n\n    switch (parsed.rest) {\n    case '':\n        break;\n    default:\n        throw new SyntaxError('Parsing Error');\n    }\n\n    return parsed.prog;\n}\n\n// Program -> [Number] -> Error Maybe\n// checks if prog is of one of the types in types\nfunction typeCheck(prog, types) {\n    // Number -> String\n    function getType(type) {\n        switch (type) {\n        case RVAR_T:\n            return 'variable';\n        case RAPP_T:\n            return 'application';\n        case RFUNCT_T:\n            return 'function';\n        case RNUM_T:\n            return 'number';\n        case RBOOL_T:\n            return 'boolean';\n        case RSTRING_T:\n            return 'string';\n        case RLIST_T:\n            return 'list';\n        case RSYM_T:\n            return 'symbol';\n        case RIMAGE_T:\n            return 'image';\n        case RCOLOR_T:\n            return 'color';\n        default:\n            return '???';\n        }\n    }\n\n    if (!types.includes(prog.type)) {\n        let typesString = types.map(getType).reduce((acc, type) => acc + ` or a ${type}`);\n        throw new TypeError(toString_cons(prog) + ' ain\\'t a ' + typesString);\n    }\n}\n\n/**\n * More Data Definitions (TODO: add me to the file DataDefinitions)\n * An RSTRUCT is a\n *   {value: Struct, type: RSTRUCT_T}\n *\n * A Struct is a\n *   {id:     Super-Id,\n *    fields: [Field]\n *\n * A Super-Id is a\n *   String?\n *\n * A Field is a\n *   {id:      Field-Id,\n *    binding: Program}\n *\n * A Field-Id is a\n *   String?\n */\n\n// Super-Id, [Field-Id], Environment -> Environment\n// makes a racket structure according to id and field and appends\n// a function to make an id, a function to check if something is an id\n// and n functions that each access one of the fields of an id\n// to the given environment (and returns it)\nfunction makeStruct(superID, fieldIDs, env) {\n    const numFields = fieldIDs.length;\n\n    // [Program] -> Struct\n    function construct (args) {\n        if (args.length !== numFields) {\n            throw new Error(`make-${superID}: arity mismatch, expected ${numFields} arguments but given ${args.length}`);\n        }\n\n        let fields = args.map((prog, i) => ({id: fieldIDs[i], binding: prog}));\n        return {value: {id: superID, fields}, type: RSTRUCT_T};\n    }\n\n    // [Program] -> RBOOL\n    function isID (args) {\n        if (args.length !== 1) { //TODO: make something that generalizes arrity mismatches\n            throw new Error(`${superID}?: arity mismatch, expected 1 argument but given ${args.length}`);\n        }\n\n        let struct = args[0];\n\n        return {value: struct.type === RSTRUCT_T && struct.value.id === superID,\n                type: RBOOL_T};\n    }\n\n    let fieldExtractors = fieldIDs.map((fid) => (\n        // Struct -> Program\n        function (args) {\n            if (args.length !== 1) { //TODO: make something that generalizes arrity mismatches\n                throw new Error(`${superID}-${fid}: arity mismatch, expected 1 argument but given ${args.length}`);\n            }\n\n            if (args[0].type !== RSTRUCT_T || args[0].value.id !== superID) {\n                throw new Error(`${superID}-${fid}: expects a ${superID}`);\n            }\n\n            let struct = args[0].value;\n\n            // hey, it's lookup again!\n            return struct.fields.reduce((acc, field) =>  {\n                if (acc !== undefined) {\n                    return acc;\n                } else if (field.id === fid) {\n                    //console.log(field);\n                    return field.binding;\n                } else {\n                    return undefined;\n                }\n            }, undefined);\n        }\n    ));\n\n    let extedEnv = [{name: `make-${superID}`, binding: {type:  RFUNCT_T,\n                                                        value: construct}},\n                    {name: `${superID}?`, binding: {type: RFUNCT_T,\n                                                    value: isID}},\n                    ...fieldExtractors.map((extract, i) => (\n                        {name: `${superID}-${fieldIDs[i]}`, binding: {type: RFUNCT_T,\n                                                                      value: extract}}\n                    ))];\n\n    return [...env, ...extedEnv];\n}\n\n/**\n * Type Checking Functions\n *\n * so I don't have to do prog.type === RTYPE_T all the time\n */\n\nfunction isRVAR (prog) {\n    return prog.type === RVAR_T;\n}\nfunction isRAPP (prog) {\n    return prog.type === RAPP_T;\n}\nfunction isRFUNCT (prog) {\n    return prog.type === RFUNCT_T;\n}\nfunction isRNUM (prog) {\n    return prog.type === RNUM_T;\n}\nfunction isRBOOL (prog) {\n    return prog.type === RBOOL_T;\n}\nfunction isRSTRING (prog) {\n    return prog.type === RSTRING_T;\n}\nfunction isRLIST (prog) {\n    return prog.type === RLIST_T;\n}\nfunction isRSYM (prog) {\n    return prog.type === RSYM_T;\n}\nfunction isRIMAGE (prog) {\n    return prog.type === RIMAGE_T;\n}\nfunction isRCOLOR (prog) {\n    return prog.type === RCOLOR_T;\n}\nfunction isRIF (prog) {\n    return prog.type === RIF_T;\n}\nfunction isRSTRUCT (prog) {\n    return prog.type === RSTRUCT_T;\n}\n\nfunction plus(args) {\n    if (args.length < 2) {\n        throw new Error('arity mismatch');\n    }\n\n    args.forEach((arg) => typeCheck(arg, [RNUM_T]));\n\n    return args.reduce((acc, arg) => (\n        {value: acc.value + arg.value,\n         type: RNUM_T}\n    ));\n}\nfunction add1(args) {\n    if (args.length !== 1) {\n        throw new Error('arity mismatch');\n    }\n\n    typeCheck(args[0], [RNUM_T]);\n\n    return {value: args[0].value + 1,\n            type: RNUM_T};\n}\nfunction minus(args) {\n    if (args.length < 1) {\n        throw new Error('arity mismatch');\n    }\n\n    args.forEach((arg) => typeCheck(arg, [RNUM_T]));\n\n    if (args.length === 1) {\n        return {value: 0 - args[0].value,\n                type: RNUM_T};\n    }\n\n    return args.reduce((acc, arg) => (\n        {value: acc.value - arg.value,\n         type: RNUM_T}\n    ));\n}\nfunction sub1(args) {\n    if (args.length !== 1) {\n        throw new Error('arity mismatch');\n    }\n\n    typeCheck(args[0], [RNUM_T]);\n\n    return {value: args[0].value - 1,\n            type: RNUM_T};\n}\nfunction times(args) {\n    if (args.length < 2) {\n        throw new Error('arity mismatch');\n    }\n\n    args.forEach((arg) => typeCheck(arg, [RNUM_T]));\n\n    return args.reduce((acc, arg) => (\n        {value: acc.value * arg.value,\n         type: RNUM_T}\n    ));\n}\nfunction divide(args) {\n    args.forEach((arg) => typeCheck(arg, [RNUM_T]));\n\n    if (args.length === 1) {\n        let firstArg = args[0];\n\n        typeCheck(firstArg, [RNUM_T]);\n\n        return {value: 1 / firstArg.value,\n                type: RNUM_T};\n    } else if (args.length === 2) {\n        let firstArg = args[0];\n        let secondArg = args[1];\n\n        typeCheck(firstArg, [RNUM_T]);\n        typeCheck(secondArg, [RNUM_T]);\n\n        return {value: firstArg.value / secondArg.value,\n                type: RNUM_T};\n    }\n\n    return {value: false, type: RBOOL_T};\n}\nfunction car(args) {\n    if (args.length !== 1) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n\n    typeCheck(firstArg, [RLIST_T]);\n\n    if (firstArg.value === null) {\n        throw new Error('expected a cons, but given empty list');\n    }\n\n    return firstArg.value.a;\n}\nfunction cdr(args) {\n    if (args.length !== 1) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n\n    if (firstArg.value === null) {\n        throw new Error('expected a cons, but given empty list');\n    }\n\n    typeCheck(firstArg, [RLIST_T]);\n\n    return firstArg.value.d;\n}\nfunction cons(args) {\n    if (args.length !== 2) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n    let secondArg = args[1];\n\n    // because BSL\n    typeCheck(secondArg, [RLIST_T]);\n\n    return {value: {a: firstArg, d: secondArg},\n            type: RLIST_T};\n}\nfunction list(args) {\n    // this indentation is pretty jank\n    return args.reverse().reduce((acc, arg) => (\n        {value: {a: arg, d: acc},\n         type: RLIST_T}),\n                                 {value: null,\n                                  type: RLIST_T});\n}\nfunction not(args) {\n    if (args.length !== 1) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n\n    return {value: firstArg.value === false,\n            type: RBOOL_T};\n}\nfunction iseqv(args) {\n    if (args.length !== 2) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n    let secondArg = args[1];\n\n    return {value: firstArg.value === secondArg.value,\n            type: RBOOL_T};\n}\nfunction and(args) {\n    return args.reduce((acc, cur) => {\n        return acc.value !== false ? cur : {value: false, type: RBOOL_T};\n    }, {value: true, type: RBOOL_T});\n\n} function or(args) {return args.reduce((acc, cur) => {\n        return acc.value !== false ? acc : cur;\n    }, {value: true, type: RBOOL_T});\n\n}\nfunction isnull(args) {\n    if (args.length !== 1) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n\n    return {value: firstArg.value === null && firstArg.type === RLIST_T,\n            type: RBOOL_T};\n}\nfunction iscons(args) {\n    if (args.length !== 1) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n\n    return {value: firstArg.value !== null && firstArg.type === RLIST_T,\n            type: RBOOL_T};\n}\nfunction equalsign(args) {\n    args.forEach((cur) => typeCheck(cur, [RNUM_T]));\n\n    let val = args.reduce((acc, cur) => {\n\n        if (acc.value === false) {\n            return {value: false, type: RBOOL_T};\n        }\n\n        return acc.value===cur.value ? acc : {value: false, type: RBOOL_T};\n    });\n\n    if (val.value === false){\n        return val;\n    } else {\n        return {value: true, type: RBOOL_T};\n    }\n}\nfunction gtsign(args) {\n    args.forEach((cur) => typeCheck(cur, [RNUM_T]));\n\n    let val = args.reduce((acc, cur) => {\n\n        if (acc.value === false) {\n            return {value: false, type: RBOOL_T};\n        }\n\n        return acc.value > cur.value ? acc : {value: false, type: RBOOL_T};\n    });\n\n    if (val.value === false){\n        return val;\n    } else {\n        return {value: true, type: RBOOL_T};\n    }\n}\nfunction gesign(args) {\n    args.forEach((cur) => typeCheck(cur, [RNUM_T]));\n\n    let val = args.reduce((acc, cur) => {\n\n        if (acc.value === false) {\n            return {value: false, type: RBOOL_T};\n        }\n\n        return acc.value >= cur.value ? acc : {value: false, type: RBOOL_T};\n    });\n\n    if (val.value === false){\n        return val;\n    } else {\n        return {value: true, type: RBOOL_T};\n    }\n}\nfunction ltsign(args) {\n    args.forEach((cur) => typeCheck(cur, [RNUM_T]));\n\n    let val = args.reduce((acc, cur) => {\n\n        if (acc.value === false) {\n            return {value: false, type: RBOOL_T};\n        }\n\n        return acc.value < cur.value ? acc : {value: false, type: RBOOL_T};\n    });\n\n    if (val.value === false){\n        return val;\n    } else {\n        return {value: true, type: RBOOL_T};\n    }\n}\nfunction lesign(args) {\n    args.forEach((cur) => typeCheck(cur, [RNUM_T]));\n\n    let val = args.reduce((acc, cur) => {\n\n        if (acc.value === false) {\n            return {value: false, type: RBOOL_T};\n        }\n\n        return acc.value <= cur.value ? acc : {value: false, type: RBOOL_T};\n    });\n\n    if (val.value === false){\n        return val;\n    } else {\n        return {value: true, type: RBOOL_T};\n    }\n}\nfunction isstrequal(args) {\n    args.forEach((arg) => typeCheck(arg, [RSTRING_T]));\n\n    let value = args.map((arg) => arg.value).reduce((acc, val) => {\n\n        if (acc === false) {\n            return false;\n        }\n\n        return acc === val ? acc : false;\n    });\n\n    if (value !== false) {\n        return {value: true, type: RBOOL_T};\n    } else {\n        return {value, type: RBOOL_T};\n    }\n}\nfunction stringLength(args) {\n    if (args.length !== 1) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n\n    typeCheck(firstArg, [RSTRING_T]);\n\n    return {value: firstArg.value.length,\n            type: RNUM_T};\n}\nfunction stringAppend(args) {\n    if (args.length < 2) {\n        throw new Error('arity mismatch');\n    }\n\n    args.forEach((arg) => typeCheck(arg, [RSTRING_T]));\n\n    return args.reduce((acc, arg) => (\n        {value: acc.value + arg.value,\n         type: RSTRING_T}\n    ));\n}\nfunction circle(args) {\n    if (args.length < 3) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n    let secondArg = args[1];\n    let thirdArg = args[2];\n    \n    typeCheck(firstArg, [RNUM_T]);\n    typeCheck(secondArg, [RNUM_T, RSTRING_T, RSYM_T]);\n    typeCheck(thirdArg, [RSTRING_T, RSYM_T, RCOLOR_T]);\n\n    let value = makeCircle(firstArg.value, secondArg.value, thirdArg.value);\n\n    return {value, type: RIMAGE_T};\n}\nfunction rectangle(args) {\n    if (args.length < 4) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n    let secondArg = args[1];\n    let thirdArg = args[2];\n    let fourthArg = args[3];\n\n    typeCheck(firstArg, [RNUM_T]);\n    typeCheck(secondArg, [RNUM_T]);\n    typeCheck(thirdArg, [RNUM_T, RSTRING_T, RSYM_T]);\n    typeCheck(fourthArg, [RSTRING_T, RSYM_T, RCOLOR_T]);\n\n    let value = makeRectangle(firstArg.value, secondArg.value, thirdArg.value, fourthArg.value);\n\n    return {value, type: RIMAGE_T};\n}\nfunction square(args) {\n    if (args.length < 3) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n    let secondArg = args[1];\n    let thirdArg = args[2];\n\n    typeCheck(firstArg, [RNUM_T]);\n    typeCheck(secondArg, [RNUM_T, RSTRING_T, RSYM_T]);\n    typeCheck(thirdArg, [RSTRING_T, RSYM_T, RCOLOR_T]);\n\n    let value = makeRectangle(firstArg.value, firstArg.value, secondArg.value, thirdArg.value);\n\n    return {value, type: RIMAGE_T};\n}\nfunction triangle(args) {\n    if (args.length < 3) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n    let secondArg = args[1];\n    let thirdArg = args[2];\n    \n    typeCheck(firstArg, [RNUM_T]);\n    typeCheck(secondArg, [RNUM_T, RSTRING_T, RSYM_T]);\n    typeCheck(thirdArg, [RSTRING_T, RSYM_T, RCOLOR_T]);\n\n    let value = makeEquiTriangle(firstArg.value, secondArg.value, thirdArg.value);\n\n    return {value, type: RIMAGE_T};\n}\nfunction beside(args) {\n    if (args.length < 2) {\n        throw new Error('arity mismatch');\n    }\n\n    args.forEach((arg) => typeCheck(arg, [RIMAGE_T]));\n\n    let value = makeBeside(args.map((arg) => arg.value));\n\n    return {value, type: RIMAGE_T};\n}\nfunction besideAlign(args) {\n    if (args.length < 3) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n    let restArgs = args.slice(1);\n\n    typeCheck(firstArg, [RSTRING_T, RSYM_T]);\n    restArgs.forEach((arg) => typeCheck(arg, [RIMAGE_T]));\n\n    let value = makeBeside(restArgs.map((arg) => arg.value), firstArg.value);\n\n    return {value, type: RIMAGE_T};\n}\nfunction above(args) {\n    if (args.length < 2) {\n        throw new Error('arity mismatch');\n    }\n\n    args.forEach((arg) => typeCheck(arg, [RIMAGE_T]));\n\n    let value = makeAbove(args.map((arg) => arg.value));\n\n    return {value, type: RIMAGE_T};\n}\nfunction aboveAlign(args) {\n    if (args.length < 3) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n    let restArgs = args.slice(1);\n\n    typeCheck(firstArg, [RSTRING_T, RSYM_T]);\n    restArgs.forEach((arg) => typeCheck(arg, [RIMAGE_T]));\n\n    let value = makeAbove(restArgs.map((arg) => arg.value), firstArg.value);\n\n    return {value, type: RIMAGE_T};\n}\nfunction overlay(args) {\n    if (args.length < 2) {\n        throw new Error('arity mismatch');\n    }\n\n    args.forEach((arg) => typeCheck(arg, [RIMAGE_T]));\n\n    let value = makeOverlay(args.map((arg) => arg.value));\n\n    return {value, type: RIMAGE_T};\n}\nfunction overlayAlign(args) {\n    if (args.length < 4) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n    let secondArg = args[1];\n    let restArgs = args.slice(2);\n\n    typeCheck(firstArg, [RSTRING_T, RSYM_T]);\n    typeCheck(secondArg, [RSTRING_T, RSYM_T]);\n    restArgs.forEach((arg) => typeCheck(arg, [RIMAGE_T]));\n\n    let value = makeOverlay(restArgs.map((arg) => arg.value), firstArg.value, secondArg.value);\n\n    return {value, type: RIMAGE_T};\n}\nfunction placeImage(args) {\n    if (args.length < 4) {\n        throw new Error('arity mismatch');\n    }\n\n    let img = args[0];\n    let x = args[1];\n    let y = args[2];\n    let scene = args[3];\n\n    typeCheck(img, [RIMAGE_T]);\n    typeCheck(x, [RNUM_T]);\n    typeCheck(y, [RNUM_T]);\n    typeCheck(scene, [RIMAGE_T]);\n\n    let value = makePlace(img.value, x.value, y.value, scene.value);\n\n    return {value, type: RIMAGE_T};\n}\nfunction empty_Scene(args) {\n    if (args.length < 2) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n    let secondArg = args[1];\n    let thirdArg = args[2];\n\n    typeCheck(firstArg, [RNUM_T]);\n    typeCheck(secondArg, [RNUM_T]);\n\n    let value;\n    if (thirdArg !== undefined) {\n        typeCheck(thirdArg, [RCOLOR_T, RSTRING_T, RSYM_T]);\n        value = emptyScene(firstArg.value, secondArg.value, thirdArg.value);\n    } else {\n        value = emptyScene(firstArg.value, secondArg.value);\n    }\n\n    return {value, type: RIMAGE_T};\n}\nfunction color(args) {\n    if (args.length < 3) {\n        throw new Error('arity mismatch');\n    }\n\n    let firstArg = args[0];\n    let secondArg = args[1];\n    let thirdArg = args[2];\n    let fourthArg = args[3];\n    \n    typeCheck(firstArg, [RNUM_T]);\n    typeCheck(secondArg, [RNUM_T]);\n    typeCheck(thirdArg, [RNUM_T]);\n\n    let value;\n    if (fourthArg !== undefined) {\n        typeCheck(fourthArg, [RNUM_T]);\n        value = makeColor(firstArg.value, secondArg.value, thirdArg.value, fourthArg.value);\n    } else {\n        value = makeColor(firstArg.value, secondArg.value, thirdArg.value);\n    }\n\n    return {value, type: RCOLOR_T};\n}\n\nexport {interp, parseCheck, initEnv, parsePrefix, interpPrefix,\n        isRVAR, isRAPP, isRFUNCT, isRNUM, isRBOOL, isRSTRING, isRLIST, isRSYM, isRIMAGE, isRCOLOR, isRIF, isRSTRUCT,\n        RVAR_T, RAPP_T, RFUNCT_T, RNUM_T, RBOOL_T, RSTRING_T, RLIST_T, RSYM_T, RIMAGE_T, RCOLOR_T, RIF_T,\n        unparse_cons, unparse_list, toString_cons, toString_list,\n        varRE};\n","import {isRBOOL} from './interpreter.js';\n\n/************\n    Colors\n************/\n\n// value to put in child formulas that don't have an output for that row\nexport const gray = {gray: 'gray'};\n// value to put in child formulas that have an error output for that row (non-boolean and non-gray)\nexport const pink = {pink: 'pink'};\n// value that indicates an uninitialized input\nexport const yellow = {yellow: 'yellow'};\n\n/*********************\n   Functions I Want\n*********************/\n// [Program] -> Boolean\n// returns true if progs has at least one member and all of its members are boooleans\n//    otherwise returns false\nexport function allBools(progs){\n    if (progs.length === 0 || progs.every((prog) => prog === gray)) {\n        return false;\n    }\n\n    return progs.every((prog) => prog === gray || isRBOOL(prog));\n}\n\nexport function isBooleanFormula(formula) {\n    return allBools(formula.outputs) || formula.thenChildren !== undefined;\n}\n\n","import {yellow, isBooleanFormula} from './header.js';\nimport {RVAR_T, RAPP_T, RFUNCT_T, RNUM_T, RBOOL_T, RSTRING_T, RLIST_T, RSYM_T} from './interpreter.js';\n\n/*********************\n    Pretty Printer\n*********************/\n\n/***\n    Data Definitions\n\n    a DOC is one of\n    - NIL\n    - TEXT\n    - LINE\n\n    A NIL is\n    () => {type: 'NIL'}\n\n    A TEXT is\n    () => {type: 'TEXT',\n    text: String,\n    rest: DOC}\n\n    A LINE is\n    () => {type: 'LINE',\n    indent: Integer,\n    rest: DOC}\n\n    A Doc is one of\n    - Nil\n    - Concat\n    - Nest\n    - Text\n    - Line\n    - Union\n\n    A Nil is\n    {type: 'nil'}\n    A Nest is\n    {type:   'nest',\n    indent: Integer,\n    rest:   Doc}\n\n    A Text is\n    {type: 'text',\n    text: String}\n\n    A Line is\n    {type: 'line'}\n\n    A Concat is\n    {type: 'concat',\n    left: Doc,\n    right: () => Doc}\n\n    A Union is\n    {type:  'union',\n    left:  Doc,\n    right: () => Doc}\n\n    A Pair is\n    {doc:    Doc,\n    indent: Integer}\n***/\n\n// DOC\nconst NIL = () => ({type: 'NIL'});\n\n// Doc\nconst nil = {type: 'nil'};\n\n// String -> Doc\nfunction text (string) {\n    if (string === '') {\n        return nil;\n    } else {\n        return {type: 'text', text: String(string)};\n    }\n}\n\n// Doc\nconst line = {type: 'line'};\n\n// Doc, () => Doc -> Doc\nfunction union (docL, docR) {\n    if (typeof docR !== 'function') {\n        throw new Error(\"docR isn't a thunk\");\n    }\n    return {type: 'union', left: docL, right: docR};\n}\n\n// Doc, () => Doc -> Doc\nfunction concat (docL, docR) {\n    if (typeof docR !== 'function') {\n        throw new Error(\"docR isn't a thunk\");\n    }\n    // switch(docR.type) {\n    // case 'union':\n    //     return union(concat(docL, docR.left), concat(docL, docR.right));\n    // default:\n    //     break;\n    // }\n    switch (docL.type) {\n        case 'nil':\n            return docR();\n        case 'concat':\n            return {type: 'concat', left: docL.left, right: () => concat(docL.right(), docR)};\n        case 'union':\n            return union(concat(docL.left, docR), () => concat(docL.right(), docR));\n        default:\n            return {type: 'concat', left: docL, right: docR};\n    }\n}\n\n// Integer -> Doc\nfunction nest (i, doc) {\n    switch (doc.type) {\n        case 'nil':\n            return nil;\n        case 'concat':\n            return concat(nest(i, doc.left), () => nest(i, doc.right()));\n        case 'nest':\n            return {type: 'nest', indent: doc.indent + i, rest: doc.rest};\n        case 'text':\n            return doc;\n        case 'line':\n            return {type: 'nest', indent: i, rest: doc};\n        case 'union':\n            return union(nest(i, doc.left), () => nest(i, doc.right()));\n        default:\n            throw Error(`unnexpected document type: ${doc.type}`);\n    }\n}\n\n// DOC -> String\nfunction layout (thunk) {\n\n    let doc = thunk();\n\n    switch (doc.type) {\n        case 'NIL':\n            return '';\n        case 'TEXT':\n            return doc.text + layout(doc.rest);\n        case 'LINE':\n            return '\\n' + ' '.repeat(doc.indent) + layout(doc.rest);\n        default:\n            throw Error(`unnexpected DOCUMENT type: ${doc.type}`);\n    }\n}\n\n// Doc -> Doc\nfunction group (doc) {\n    return union(flatten(doc), () => doc);\n}\n\n// Doc -> Doc\nfunction flatten (doc) {\n    switch (doc.type) {\n        case 'nil':\n            return nil;\n        case 'concat':\n            return concat(flatten(doc.left), () => flatten(doc.right()));\n        case 'nest':\n            return flatten(doc.rest);\n        case 'text':\n            return doc;\n        case 'line':\n            return text(' ');\n        case 'union':\n            return flatten(doc.left);\n        default:\n            throw Error(`unnexpected document type: ${doc.type}`);\n    }\n}\n\n// Integer, Integer -> (Doc -> String)\nfunction makePretty (width, ribbon) {\n\n    // Integer, Integer, Doc -> DOC\n    function best (thisRibbon, current, doc) {\n        return be(thisRibbon, current, [{indent: 0, doc: doc}]);\n    }\n\n    // DOC -> DOC\n    function memoize(thunk) {\n        let seen = false;\n        let value;\n\n        return () => {\n            if (seen) {\n                return value;\n            } else {\n                seen = true;\n                value = thunk();\n                return value;\n            }\n        };\n    }\n\n    // Integer, Integer, [Pair] -> DOC\n    function be (r, k, pairs) {\n        if (pairs.length === 0) {\n            return NIL;\n        }\n\n        let doc = pairs[0].doc;\n        let indent = pairs[0].indent;\n        let rest = pairs.slice(1);\n\n        switch (doc.type) {\n            case 'nil':\n                return be(r, k, rest);\n            case 'concat':\n                return be(r, k, [{indent, doc: doc.left}, {indent, doc: doc.right()}, ...rest]);\n            case 'nest':\n                return be(r, k, [{indent: indent + doc.indent, doc: doc.rest}, ...rest]);\n            case 'text':\n                if (doc.text === '') {\n                    return NIL;\n                } else {\n                    return memoize(() => ({type: 'TEXT', text: doc.text, rest: memoize(() => (be(r, k + doc.text.length, rest)()))}));\n                }\n            case 'line':\n                return memoize(() => ({type: 'LINE', indent: indent, rest: memoize(() => (be(r + indent, indent, rest)()))}));\n            case 'union':\n                return better(r, k, be(r, k, [{indent, doc: doc.left}, ...rest]),\n                                    memoize(() => (be(r, k, [{indent, doc: doc.right()}, ...rest])())));\n            default:\n                console.log(doc());\n                throw Error(`unnexpected document type: ${doc.type}`);\n        }\n    }\n\n    // Integer, Integer, Integer, DOC, DOC -> DOC\n    function better (thisRibbon, current, docL, docR) {\n        if (fits(width - current, thisRibbon - current, docL)) {\n            return docL;\n        } else {\n            return docR;\n        }\n    }\n\n    // Integer, Integer, DOC -> Boolean\n    function fits(diffWidth, diffRibbon, thunk) {\n        if (diffWidth < 0 || diffRibbon < 0) {\n            return false;\n        }\n\n        let doc = thunk();\n\n        switch (doc.type) {\n            case 'NIL':\n                return true;\n            case 'TEXT':\n                return fits(diffWidth - doc.text.length, diffRibbon - doc.text.length, doc.rest);\n            case 'LINE':\n                return true;\n            default:\n                throw Error(`unnexpected DOCUMENT type: ${doc.type}`);\n        }\n    }\n\n    function pretty (doc) {\n        return layout(best(ribbon, 0, doc));\n    }\n\n    return pretty;\n}\n\n/***\n    Utility Functions\n***/\n\n// Doc, Doc -> Doc\nfunction putSpace (docL, docR) {\n    return concat(docL, () => concat(text(' '), () => docR));\n}\n\n// Doc, Doc -> Doc\nfunction putLine (docL, docR) {\n    return concat(docL, () => concat(line, () => docR));\n}\n\n// Doc, Doc -> Doc\nfunction compose (docL, docR) {\n    return concat(docL, () => docR);\n}\n\n// (Doc -> Doc -> Doc), [Doc] -> Doc\nfunction folddoc (f, docs) {\n    if (docs.length === 0) {\n        return nil;\n    } else if (docs.length === 1) {\n        return docs[0];\n    } else {\n        return f(docs[0], folddoc(f, docs.slice(1)));\n    }\n}\n\n// [Doc] -> Doc\n// puts a space between docs\nfunction spread (docs) {\n    return folddoc(putSpace, docs);\n}\n\n// [Doc] -> Doc\n// puts a line between docs\nfunction stack (docs) {\n    return folddoc(putLine, docs);\n}\n\n// [Doc] -> Doc\n// puts docs right next to eachother\nfunction level (docs) {\n    return folddoc(compose, docs);\n}\n\n// String -> Doc -> String -> Doc\n// puts the given document between left and right\nfunction bracket (left, doc, right) {\n    return level([text(left), doc, text(right)]);\n}\n\n/**************************************\n    Thing that Turns Tables Into BSL\n**************************************/\n\n// Program -> Doc\nfunction progToDoc (program) {\n    switch (program.type) {\n        case RVAR_T:\n            return text(program.value);\n        case RAPP_T:\n            return nest(1, bracket('(', group(stack([progToDoc(program.value.funct), ...program.value.args.map(progToDoc)])), ')'));\n        case RFUNCT_T:\n            return text('function');\n        case RNUM_T:\n            return text(program.value);\n        case RBOOL_T:\n            return text('#' + program.value);\n        case RSTRING_T:\n            return text('\"' + program.value + '\"');\n        case RLIST_T: // this just does cons, not list\n            if (program.value === null) {\n                return text(\"'()\");\n            } else {\n                return nest(1, bracket('(', group(stack([text('cons'), progToDoc(program.value.a), progToDoc(program.value.d)])), ')'));\n            }\n        case RSYM_T:\n            return text(\"'\" + program.value);\n        default:\n            throw new Error('unknown program type');\n    }\n}\n\n// Program -> Doc\nfunction progToDoc_list (program) {\n    switch (program.type) {\n        case RVAR_T:\n            return text(program.value);\n        case RAPP_T:\n            return nest(1, bracket('(', group(stack([progToDoc(program.value.funct), ...program.value.args.map(progToDoc)])), ')'));\n        case RFUNCT_T:\n            return text('function');\n        case RNUM_T:\n            return text(program.value);\n        case RBOOL_T:\n            return text('#' + program.value);\n        case RSTRING_T:\n            return text('\"' + program.value + '\"');\n        case RLIST_T:\n            if (program.value === null) {\n                return text(\"'()\");\n            }\n\n            let list = program.value.d,\n                elems = progToDoc_list(program.value.a);\n            while (list.value !== null) {\n                elems = stack([elems, progToDoc_list(list.value.a)]);\n            }\n\n            return bracket('(', spread([text('list'), group(elems)]), ')');\n        case RSYM_T:\n            return text(\"'\" + program.value);\n        default:\n            throw new Error('unknown program type');\n    }\n}\n\n// [Table] -> String\nfunction toBSL(tables, unparse, width, ribbon) {\n    let pretty = makePretty(width, ribbon);\n    let tableBSLs = tables.map((table) => pretty(tableToDoc(table))).join('');\n    return tableBSLs;\n\n    // Table -> Doc\n    function tableToDoc(table) {\n        let name = fieldToDoc(table.name);\n        let sig = fieldToDoc(table.signature);\n        let purp = fieldToDoc(table.purpose);\n        let params = spread(table.params.map((param) => fieldToDoc(param.name)));\n\n        let checkExpects = stack(table.examples.map((example) => {\n            let inputs = stack(example.inputs.map((input) => fieldToDoc(input.prog)));\n            let want = fieldToDoc(example.want);\n\n            return nest(1, bracket('(', group(stack([text('check-expect'), bracket('(', nest(1, stack([name, inputs])), ')'), want])), ')'));\n        }));\n\n        let body = formulasToDoc(table.formulas);\n        let signature = spread([text(';;'), name, text(':'), sig]);\n        let purpose = spread([text(';;'), purp]);\n        let funct = nest(2, bracket('(', spread([text('define'), stack([bracket('(', spread([name, params]), ')'), body])]), ')'));\n        return stack([signature, purpose, funct, nil, checkExpects, line]);\n    }\n\n    // [Formula] -> Doc\n    function formulasToDoc(formulas) {\n        // [Formula] -> {bools: [Formula], nonbools: [Formula]}\n        function splitFormulas(formulas) {\n            let bools = formulas.filter(isBooleanFormula);\n            let nonbools = formulas.filter((formula) => !isBooleanFormula(formula));\n            return {bools, nonbools};\n        }\n\n        let splitForms = splitFormulas(formulas);\n\n        // this one's a doc\n        let nonbools = stack(splitForms.nonbools.map((form) => fieldToDoc(form.prog))),\n            bools;\n\n        if (splitForms.bools.length !== 0) {\n            // this is an array of documents\n            let condRows = splitForms.bools.map((form) => (\n                nest(1, bracket('[', stack([fieldToDoc(form.prog), formulasToDoc(form.thenChildren)]),']'))\n            ));\n            // this one is just a doc\n            bools = nest(2, bracket('(', stack([text('cond'), ...condRows]),')'));\n        }\n\n        if (splitForms.bools.length !== 0 && splitForms.nonbools.length !== 0) {\n            return stack([bools, nonbools]);\n        } else if (splitForms.bools.length !== 0) {\n            return bools;\n        } else if (splitForms.nonbools.length !== 0) {\n            return nonbools;\n        } else {\n            return nil;\n        }\n    }\n\n    // Field (yellow or string or program) -> Doc\n    function fieldToDoc(input) {\n        if (input === yellow) {                 // empty\n            return text('...');\n        } else if (typeof input === 'string') { // name\n            return text(input);\n        } else {                                // program\n            return progToDoc(input);\n        }\n    }\n}\n\n/****************\n    Unparsers\n****************/\nconst widePretty = makePretty(Infinity, Infinity);\n\nexport let unparse_cons = (prog) => widePretty(progToDoc(prog));\nexport let unparse_list = (prog) => widePretty(progToDoc_list(prog));\n\nexport default toBSL;\n","// Number -> (String -> Side Effect)\nfunction makeSendifier (delay) {\n    let item = false;\n\n    function setItem (nuveau) {\n        item = nuveau;\n    }\n\n    function sendItem () {\n        if (item) {\n            fetch(\"http://107.170.76.216:8000/log/foo\", { method: 'POST', // or 'PUT'\n                                                          body: item, // data can be `string` or {object}!\n                                                          mode: 'no-cors',\n                                                          headers: { 'Content-Type': 'application/json' } });\n        }\n\n        item = false;\n    }\n\n    setInterval(sendItem, delay);\n\n    return setItem;\n}\n\nexport default makeSendifier;\n","import React from 'react';\nimport ReactDOMServer from 'react-dom/server';\nimport {interp, parseCheck, parsePrefix, interpPrefix, unparse_cons, toString_cons, toString_list, unparse_list, initEnv, isRAPP, RFUNCT_T, isRLIST, isRIMAGE, isRBOOL, isRSTRUCT} from './interpreter.js';\nimport {gray, pink, yellow, allBools, isBooleanFormula} from './header.js';\nimport {paint, width, height, makeRectangle, makeOverlay} from './image.js';\nimport toBSL from './prettyprint.js';\nimport makeSendifier from './sendifier.js';\nimport Octicon, {X, Alert, Check} from '@primer/octicons-react';\nimport './App.css';\n\n/*****************************\n  Universal Constants I Want\n*****************************/\n// value to indicate a dry run, i.e. don't actually change the underlying structure, just say\n// if the given value exists or not\nconst dryRun = {yo: 'don\\'t actually change anything'};\n// this one's different because it has a $ at the end so it tests\n// the string until the end\nconst varRE = /^[^\\s\",'`()[\\]{}|;#]+$/; // except numbers\n\n\n/*********************\n    Key Management\n*********************/\n// variable used by takeKey and peekKey to generate keys\nlet keyCount = 0;\n\n// Number\n// returns a unique key\nfunction takeKey() {\n    return keyCount++;\n}\n\n// [Number] -> Number (the brackets here mean optional, not array)\n// returns current key without changing it\n// shoud be used to look at current state of key without actually taking it\n// optionally takes a number as an argument, in which case it returns the key that number\n// of steps ahead of the current key\nfunction peekKey(lookahead = 0) {\n    return keyCount + lookahead;\n}\n\n/**************\n    Globals\n**************/\n// TODO: maybe get rid of these?\nlet unparse = unparse_cons;\nlet toString = toString_cons;\nlet showBSL = false;\nlet globalEnv = initEnv;\n\n/*****************\n    Deep Equals\n*****************/\n// Program -> Program -> Boolean\n// checks if two programs are equivalent, recurs on lists and applications\n// may not quite work on functions because I use js functions, not data represented closures or something\n//    thus 2 functions are only equal if they're a reference to the same object\n// maybe move this to interpreter.js?\nfunction deepEquals(proga, progb) {\n    if (proga.type !== progb.type) {\n        return false;\n    }\n\n    if (isRLIST(proga)) {\n        if (proga.value === null || progb.value === null) {\n            return proga.value === progb.value;\n        }\n        return deepEquals(proga.value.a, progb.value.a) && deepEquals(proga.value.d, progb.value.d);\n    }\n\n    // this case will prolly never even happen...\n    if (isRAPP(proga)) {\n        if (proga.value.args.length !== progb.value.args.length) {\n            return false;\n        }\n        let functCheck = deepEquals(proga.value.funct, progb.value.funct);\n        let argCheck = proga.value.args.map((arga, i) => deepEquals(arga, progb.value.args[i])).every((elem) => elem);\n        return functCheck && argCheck;\n    }\n\n    if (isRSTRUCT(proga)) {\n        let structa = proga.value;\n        let structb = progb.value;\n\n        let idSame = structa.id === structb.id;\n\n        let fieldsSame;\n        if (structa.fields.length === structb.fields.length) {\n            fieldsSame = structa.fields.every((fielda, i) => deepEquals(fielda.binding, structb.fields[i].binding));\n        } else {\n            fieldsSame = false;\n        }\n\n        return idSame && fieldsSame;\n    }\n\n    if (isRIMAGE(proga)) {\n        // Image -> Uint8ClampedArray\n        // takes an image and returns an array containing RGBA values of all pixels in the image\n        // a lot of this was taken from https://stackoverflow.com/questions/3768565/drawing-an-svg-file-on-a-html5-canvas\n        // sometimes this doesn't work...\n        //   - when it is first used in a certain instance of the table method, it returns an array containing only zeros,\n        //     however, after this I'm pretty sure it returns the array it should be returning\n        //   - maybe something hasn't been properly initialized by the first time around?\n        function toRGBAArray (image) {\n            let can = document.createElement('canvas');\n            can.width = width(image);\n            can.height = height(image);\n            let ctx = can.getContext('2d');\n            let svg = paint(image);\n\n            // pretty much just turns the jsx into a string\n            let xml = ReactDOMServer.renderToString(svg);\n\n            // make the xml base 64 for some reason (I dunno why)\n\n\n            let svg64 = btoa(xml);\n            // header that does stuff I guess\n            let b64Start = 'data:image/svg+xml;base64,';\n\n            // prepend a the header to the xml data\n            let image64 = b64Start + svg64;\n\n            // make image that contains the xml data so we can draw it\n            let img = document.createElement('img');\n            //console.log(img);\n            img.src = image64;\n\n            // draw the image onto the canvas\n            ctx.drawImage(img, 0, 0);\n\n            return ctx.getImageData(0, 0, width(image), height(image)).data;\n        }\n\n        let imgA = proga.value;\n        let imgB = progb.value\n\n        let dataA_red = toRGBAArray(makeOverlay([imgA, makeRectangle(width(imgA), width(imgA), 'solid', 'red')]));\n        let dataA_green = toRGBAArray(makeOverlay([imgA, makeRectangle(width(imgA), width(imgA), 'solid', 'green')]));\n\n        let dataB_red = toRGBAArray(makeOverlay([imgB, makeRectangle(width(imgB), width(imgB), 'solid', 'red')]));\n        let dataB_green = toRGBAArray(makeOverlay([imgB, makeRectangle(width(imgB), width(imgB), 'solid', 'green')]));\n\n        if (width(imgA) !== width(imgB) || height(imgA) !== height(imgB)) { // images have different dimensions\n            return false;\n        }\n\n        let redSame = dataA_red.every((datumA_red, i) => datumA_red === dataB_red[i]);\n        let greenSame = dataA_green.every((datumA_green, i) => datumA_green === dataB_green[i]);\n\n        return redSame && greenSame;\n    }\n\n    return proga.value === progb.value;\n}\n\n/****************************************\n * Thing That Sends Stuff Out To Server *\n ***************************************/\n\nlet tellBigBrother = makeSendifier(3000);\n\n/*********************\n   React Components\n*********************/\n\n// it's a picture of a colon\nfunction Colon (props) {\n    return (\n        <div className='colon'>:</div>\n    );\n}\n\n/*** Buttons ***/\n// Button that probably removes something\nfunction RemButton(props){\n    return (\n        <div className='remove'\n             onClick={props.onClick}\n             title={props.title}>\n          <Octicon\n            icon={X} size=\"small\" verticalAlign=\"middle\"\n            ariaLabel='Remove'/>\n        </div>\n    );\n}\n\n/*** Inputs ***/\nclass ValidatedInput extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {text: ''};\n\n        this.textChange = this.textChange.bind(this);\n    }\n\n    textChange(e) {\n        let text = e.target.value;\n\n        this.setState((state) => ({text}));\n\n        if (this.props.isValid(text)) {\n            this.props.onValid(text);\n        } else if (text === '' && !this.props.dummy) {\n            this.props.onEmpty();\n        }\n    }\n\n    render() {\n        let className;\n        if (this.props.dummy && this.state.text === '') { // empty dummy\n            className = 'dummy_input';\n        } else if (this.props.isValid(this.state.text)) { // valid\n            className = 'valid_input';\n        } else if (this.state.text === '') { // empty non-dummy\n            className = 'empty_input';\n        } else { // invalid\n            className = 'invalid_input';\n        }\n        \n        let size;\n        if (this.state.text.length === 0)\n            size = this.props.placeholder.length;\n        else\n            size = Math.max(this.state.text.length + 2, 4);\n\n        return (\n            <input\n              className={className}\n              size={size}\n              placeholder={this.props.placeholder}\n              type={'text'}\n              value={this.state.text}\n              onChange={this.textChange}\n            />\n        );\n    }\n}\n\nclass ValidatedArea extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {text: ''};\n\n        this.textChange = this.textChange.bind(this);\n    }\n\n    textChange(e) {\n        let text = e.target.value;\n\n        this.setState((state) => ({text}));\n\n        if (this.props.isValid(text)) {\n            this.props.onValid(text);\n        } else if (text === '' && !this.props.dummy) {\n            this.props.onEmpty();\n        }\n    }\n\n    render() {\n        let className;\n        if (this.props.dummy && this.state.text === '') { // empty dummy\n            className = 'dummy_input';\n        } else if (this.props.isValid(this.state.text)) { // valid\n            className = 'valid_input';\n        } else if (this.state.text === '') { // empty non-dummy\n            className = 'empty_input';\n        } else { // invalid\n            className = 'invalid_input';\n        }\n\n        let rows,\n            newlines = this.state.text.match(/\\n/g);\n        if (newlines === null) {\n            rows = 1;\n        } else {\n            rows = newlines.length + 1;\n        }\n\n        let cols;\n        if (this.state.text.length === 0)\n            cols = this.props.placeholder.length;\n        else\n            cols = Math.max(...this.state.text.split('\\n').map((line) => line.length + 1), 4);\n\n        return (\n            <textarea\n              className={className + ' validated_area'}\n              rows={rows}\n              cols={cols}\n              placeholder={this.props.placeholder}\n              onChange={this.textChange}\n            >\n              {this.state.text}\n            </textarea>\n        );\n    }\n}\n\n/*** Table Sections ***/\n// let's put everything in one table woo\nfunction Succinct(props) {\n\n    function tableChange(newTab, oldTab) {\n        const exists = props.tables.indexOf(oldTab) !== -1;\n\n        let alteredTabs;\n        if (exists) {\n            alteredTabs = props.tables.map((table) => table === oldTab ? newTab : table);\n        } else {\n            alteredTabs = [...props.tables, newTab];\n        }\n\n        props.programChange(alteredTabs);\n    }\n\n    function remTable(deadTab) {\n        let aliveTabs = props.tables.filter((table) => table !== deadTab);\n        props.programChange(aliveTabs);\n    }\n\n    // String -> Boolean\n    function validName(text, modTab) {\n        function inEnv(name, env) {\n            return env.reduce((acc, variable) => {\n                if (acc) {\n                    return true;\n                }\n\n                return variable.name === name;\n\n            }, false);\n        }\n\n        let tableVars = props.tables.filter((table) => table !== modTab).map((otherTab) => ({name: otherTab.name, binding: null}));\n        let paramVars = modTab.params.map((param) => ({name: param, binding: null}));\n        let env = [...globalEnv, ...tableVars, ...paramVars];\n\n        return varRE.test(text) && !inEnv(text, env);\n    }\n\n    // TODO make more sophisticated parser that can handle functions as parameters in signature\n    function validSignature(text, modTab) {\n        let sides = text.split(/\\s+->\\s+/g);\n\n        if (sides.length !== 2) {\n            return false;\n        }\n\n        let paramTypes = sides[0].match(/[a-zA-Z]+/g);\n        let outType = sides[1].match(/[a-zA-Z]+/g);\n\n        let noNull = paramTypes !== null && outType !== null;\n\n        return noNull && paramTypes.length === modTab.params.length && outType.length === 1;\n    }\n\n    const reals = props.tables.map((table) => (\n        <div key={table.key} className='flex_horiz table'>\n          <div className='flex_vert no_grow'>\n            <div className='flex_horiz no_grow'>\n              <ValidatedInput\n                dummy={false}\n                placeholder='Table Name'\n                isValid={(text) => validName(text, table)}\n                onValid={(text) => tableChange({...table,\n                                                name: text},\n                                               table)}\n                onEmpty={() => tableChange({...table,\n                                            name: yellow},\n                                           table)}\n              />\n              <Colon/>\n              <ValidatedInput\n                dummy={false}\n                placeholder='Signature'\n                isValid={(text) => validSignature(text, table)}\n                onValid={(text) => tableChange({...table,\n                                                signature: text},\n                                               table)}\n                onEmpty={() => tableChange({...table,\n                                            signature: yellow},\n                                           table)}\n              />\n              <RemButton\n                onClick={() => remTable(table)}\n                title='Remove this table'\n              />\n            </div>\n            <div className='flex_horiz no_grow'>\n              <ValidatedInput\n                dummy={false}\n                placeholder='Purpose'\n                isValid={(text) => text !== ''}\n                onValid={(text) => tableChange({...table,\n                                                purpose: text},\n                                               table)}\n                onEmpty={() => tableChange({...table,\n                                            purpose: yellow},\n                                           table)}\n              />\n            </div>\n            <SuccinctTab\n              table={table}\n              tableNames={props.tables.map((table) => table.name)}\n              tableChange={(newTab) => tableChange(newTab, table)}\n            />\n          </div>\n          <div className='grow'>{/* div to prevent text fields from stretching across the screen */}</div>\n        </div>\n    ));\n\n    const dummy = (\n        <div key={peekKey()} className='flex_horiz table'>\n          <div className='flex_vert no_grow'>\n            <div className='flex_horiz no_grow'>\n              <ValidatedInput\n                dummy={true}\n                placeholder='Table Name'\n                isValid={(text) => validName(text, {params: []})}\n                onValid={(text) => tableChange({name: text,\n                                                signature: yellow,\n                                                purpose: yellow,\n                                                examples: [],\n                                                formulas: [],\n                                                params: [],\n                                                key: takeKey()},\n                                               {})}\n              />\n              <Colon/>\n              <ValidatedInput\n                dummy={true}\n                placeholder='Signature'\n                isValid={(text) => text !== ''}\n                onValid={(text) => tableChange({name: yellow,\n                                                signature: text,\n                                                purpose: yellow,\n                                                examples: [],\n                                                formulas: [],\n                                                params: [],\n                                                key: takeKey()},\n                                               {})}\n              />\n            </div>\n            <div className='flex_horiz no_grow'>\n              <ValidatedInput\n                dummy={true}\n                placeholder='Purpose'\n                isValid={(text) => text !== ''}\n                onValid={(text) => tableChange({name: yellow,\n                                                signature: yellow,\n                                                purpose: text,\n                                                examples: [],\n                                                formulas: [],\n                                                params: [],\n                                                key: takeKey()},\n                                               {})}\n              />\n            </div>\n            <SuccinctTab\n              table={{name: yellow,\n                      signature: yellow,\n                      purpose: yellow,\n                      examples: [],\n                      formulas: [],\n                      params: [],\n                      key: peekKey()}}\n              tableNames={props.tables.map((table) => table.name)}\n              tableChange={(newTab) => tableChange(newTab, {})}\n            />\n          </div>\n          <div className='grow'>{/* div to prevent text fields from stretching across the screen */}</div>\n        </div>\n    );\n\n    return (\n        <div>\n          {[...reals, dummy]}\n        </div>\n    );\n}\n\nfunction SuccinctTab(props) {\n    function paramsExamplesChange(params, examples) {\n        props.tableChange({...props.table, params, examples});\n    }\n\n    function formulasChange(formulas) {\n        props.tableChange({...props.table, formulas});\n    }\n\n    function examplesFormulasChange(examples, formulas) {\n        props.tableChange({...props.table, examples, formulas});\n    }\n\n    return (\n        <table className={'grow'}>\n          <SuccinctHead\n            params={props.table.params}\n            examples={props.table.examples}\n            tableNames={props.tableNames}\n            paramsExamplesChange={paramsExamplesChange}\n\n            formulas={props.table.formulas}\n            formulasChange={formulasChange}\n          />\n          <SuccinctBody\n            examples={props.table.examples}\n            formulas={props.table.formulas}\n            paramNames={props.table.params.map((param) => param.name)}\n            examplesFormulasChange={examplesFormulasChange}\n            formulasChange={formulasChange}\n          />\n        </table>\n    );\n}\n\nfunction SuccinctHead(props) {\n    // String -> Boolean\n    // checks if the given string is a valid program\n    function validProg(text) {\n        let isgood = true;\n\n        try {\n            parseCheck(text);\n        } catch(e) {\n            if (e instanceof SyntaxError) {\n                isgood = false;\n            } else { // this should never happen\n                throw e;\n            }\n        }\n\n        return isgood;\n    }\n\n    // Formula -> Side Effect\n    // removes a given formula from the tree\n    function remFormula(deadForm) {\n        const aliveForms = props.formulas.filter((formula) => formula !== deadForm);\n        props.formulasChange(aliveForms);\n    }\n\n    // Formula -> Formula -> Side Effect\n    // replaces one formula with another one\n    function formulaChange(newForm, oldForm) {\n\n        let alteredForms;\n        if (props.formulas.indexOf(oldForm) === -1) {\n            alteredForms = [...props.formulas, newForm];\n        } else {\n            alteredForms = props.formulas.map((form) => form === oldForm ? newForm : form);\n        }\n        props.formulasChange(alteredForms);\n    }\n\n    // Formula -> Number -> Number\n    // gives the maximum depth of a Formula, second parameter is an accumulator\n    function maxDepth(formula, curMax) {\n        if (!isBooleanFormula(formula)) {\n            return curMax;\n        } else {\n            return formula.thenChildren.reduce((acc, child) => Math.max(acc, maxDepth(child, curMax + 1)), curMax + 1);\n        }\n    }\n\n    function countWidth(formula) {\n        if (!isBooleanFormula(formula)) {\n            return 1;\n        } else {\n            return formula.thenChildren.reduce((acc, child) => acc + countWidth(child), 2);\n        }\n    }\n\n    // Number -> [Number]\n    // takes a number, returns an array that counts from 1 to that number, input of 0 gives empty array\n    // e.g. countUp(5) -> [1, 2, 3, 4, 5]\n    function countUp(num) {\n        // special case: want an empty array for 0\n        if (num === 0) {\n            return [];\n        } else if (num === 1)\n            return [1];\n        else\n            return [...countUp(num - 1), num];\n    }\n\n    const abyss = props.formulas.reduce((acc, formula) => Math.max(acc, maxDepth(formula, 0)), 0);\n    const numParams = props.params.length;\n\n    const reals = props.formulas.map((formula) => (\n        <th key={formula.key} colSpan={countWidth(formula)} >\n          <div className='flex_horiz'>\n            <ValidatedArea\n              placeholder={'Formula'}\n              dummy={false}\n              isValid={validProg}\n              onValid={(text) => formulaChange({...formula,\n                                                prog: parseCheck(text)},\n                                               formula)}\n              onEmpty={() => formulaChange({...formula,\n                                            prog: yellow},\n                                           formula)}\n            />\n            <RemButton\n              title={'Remove this formula'}\n              onClick={() => remFormula(formula)}\n            />\n          </div>\n        </th>\n    ));\n\n    const dummy = (\n        <th key={peekKey()} colSpan={1}>\n          <div className='flex_horiz'>\n            <ValidatedArea\n              dummy={true}\n              placeholder='Formula'\n              isValid={validProg}\n              onValid={(text) => formulaChange({prog: parseCheck(text),\n                                                outputs: props.examples.map((_) => yellow),\n                                                key: takeKey()},\n                                               {})}\n            />\n          </div>\n        </th>\n    );\n\n    const children = countUp(abyss).map((depth) => (\n        <tr key={depth}>\n          <th colSpan={numParams + 2}>{/* empty cell to align with example RemButton and Parameters */}</th>\n          {props.formulas.map((formula) => (\n              <DepictFormula\n                key={formula.key}\n                formula={formula}\n                depth={depth}\n                numExamples={props.examples.length}\n                formulaChange={(newForm) => formulaChange(newForm, formula)}\n              />\n          ))}\n          {Array(depth).map((_, i) => (<th key={i}>{/* empty cell under some parent dummy formula */}</th>))}\n          <th>{/* empty cell above wants */}</th>\n        </tr>\n    ));\n\n    return (\n        <thead>\n          <tr>\n            <Parameters\n              params={props.params}\n              examples={props.examples}\n              tableNames={props.tableNames}\n              paramsExamplesChange={props.paramsExamplesChange}\n            />\n            {/* top level formulas */}\n            {[...reals, dummy, <th key={peekKey(1)}>{/* empty cell above wants */}</th>]}\n          </tr>\n          {/* rest of formulas */}\n          {children}\n        </thead>\n    );\n}\n\nfunction Parameters(props) {\n    function validParam(text, modParam) {\n        function inEnv(name, env) {\n            return env.reduce((acc, variable) => {\n                if (acc) {\n                    return true;\n                }\n\n                return variable.name === name;\n\n            }, false);\n        }\n\n        // These are not technically Variables, see note above\n        let paramVars = props.params.filter((param) => param !== modParam).map((param) => ({name: param.name, binding: null}));\n        let tableVars = props.tableNames.map((name) => ({name: name, binding: null}));\n        let env = [...globalEnv, ...tableVars, ...paramVars];\n\n        return varRE.test(text) && !inEnv(text, env);\n    }\n\n    function remParam(deadParam) {\n        const deadIndex = props.params.indexOf(deadParam);\n        const aliveParams = props.params.filter((param) => param !== deadParam);\n\n        // need to maintain #inputs = #params\n        const modExamples = props.examples.map((example => ({...example,\n                                                             inputs: example.inputs.filter((_, i) => i !== deadIndex)})));\n\n        props.paramsExamplesChange(aliveParams, modExamples);\n    }\n\n    // String, Number -> Side Effect\n    // changes the name of the given parameter\n    // if that parameter doesn't exist yet, it makes it\n    function paramChange(newParam, modParam) {\n\n        let alteredParams, alteredExamples;\n        if (props.params.indexOf(modParam) === -1) {\n            alteredParams = [...props.params, newParam];\n            // need to maintain #inputs = #params\n            alteredExamples = props.examples.map((example) => ({...example,\n                                                                inputs: [...example.inputs, {prog: yellow, key: takeKey()}]}));\n        } else {\n            alteredParams = props.params.map((param) => param === modParam ? newParam : param);\n            // examples don't actually change\n            alteredExamples = props.examples;\n        }\n\n        props.paramsExamplesChange(alteredParams, alteredExamples);\n    }\n\n    const reals = props.params.map((param) => (\n        <th key={param.key} >\n          <div className='flex_horiz'>\n            <ValidatedInput\n              dummy={false}\n              placeholder='Parameter'\n              isValid={(text) => validParam(text, param)}\n              onValid={(text) => paramChange({...param,\n                                              name: text},\n                                             param)}\n              onEmpty={() => paramChange({...param,\n                                          name: yellow},\n                                         param)}\n            />\n            <RemButton\n              title='Remove this parameter'\n              onClick={() => remParam(param)}\n            />\n          </div>\n        </th>\n    ));\n\n    const dummy = (\n        <th key={peekKey()}>\n          <div className='flex_horiz'>\n            <ValidatedInput\n              dummy={true}\n              placeholder='Parameter'\n              isValid={(text) => validParam(text, {})}\n              onValid={(text) => paramChange({name: text,\n                                              key: takeKey()},\n                                             {})}\n            />\n          </div>\n        </th>\n    );\n\n    return (\n        <React.Fragment>\n          <th>{/* empty cell to align with example RemButtons */}</th>\n          <React.Fragment>\n            {[...reals, dummy]}\n          </React.Fragment>\n        </React.Fragment>\n    );\n}\n\n/*\n  props: formula, depth, kill, formulaChange\n*/\nfunction DepictFormula(props) {\n    function validProg(text) {\n        try {\n            parseCheck(text);\n        } catch(e) {\n            return false;\n        }\n\n        return true;\n    }\n\n    // this is pretty macabre...\n    function remChild(deadChild) {\n        const aliveChildren = props.formula.thenChildren.filter((child) => child !== deadChild);\n        props.formulaChange({...props.formula, thenChildren: aliveChildren});\n    }\n\n    function childChange(newChild, modChild) {\n        let children;\n        if (props.formula.thenChildren.indexOf(modChild) === -1) {\n            children = [...props.formula.thenChildren, newChild];\n        } else {\n            children = props.formula.thenChildren.map((child) => child === modChild ? newChild : child);\n        }\n        props.formulaChange({...props.formula, thenChildren: children});\n    }\n\n    function countWidth(formula) {\n        if (!isBooleanFormula(formula)) {\n            return 1;\n        } else {\n            return formula.thenChildren.reduce((acc, child) => acc + countWidth(child), 2);\n        }\n    }\n\n    if (props.depth > 1) {\n        return (\n            <React.Fragment>\n              <th>{/* empty cell to align with parent input */}</th>\n              {isBooleanFormula(props.formula) ?\n               <React.Fragment>\n                 {props.formula.thenChildren.map((child) => (\n                     <DepictFormula\n                       key={child.key}\n                       formula={child}\n                       depth={props.depth - 1}\n                       numExamples={props.numExamples}\n                       formulaChange={(formula) => childChange(formula, child)}\n                     />))}\n                 <th>{/* empty cell to align with child input */}</th>\n               </React.Fragment>\n               : <script/> }\n            </React.Fragment>\n        );\n    } else {\n        if (isBooleanFormula(props.formula)) {\n            const reals = props.formula.thenChildren.map((child) => (\n                <th key={child.key} colSpan={countWidth(child)} >\n                  <div className='flex_horiz'>\n                    <ValidatedArea\n                      dummy={false}\n                      placeholder={'Formula'}\n                      isValid={validProg}\n                      onValid={(text) => childChange({...child,\n                                                      prog: parseCheck(text)},\n                                                     child)}\n                      onEmpty={() => childChange({...child,\n                                                  prog: yellow},\n                                                 child)}\n                    />\n                    <RemButton\n                      title={'Remove this formula'}\n                      onClick={() => remChild(child)}\n                    />\n                  </div>\n                </th>\n            ));\n\n            const dummy = (\n                <th key={peekKey()} colSpan={1}>\n                  <div className='flex_horiz'>\n                    <ValidatedArea\n                      dummy={true}\n                      placeholder='Formula'\n                      isValid={validProg}\n                      onValid={(text) => childChange({prog: parseCheck(text),\n                                                      outputs: Array(props.numExamples).fill(yellow),\n                                                      key: takeKey()},\n                                                     {})}\n                    />\n                  </div>\n                </th>\n            );\n\n            return (\n                <React.Fragment>\n                  <th>{/* empty cell to align with parent input */}</th>\n                   <React.Fragment>\n                     {[...reals, dummy]}\n                   </React.Fragment>\n                </React.Fragment>\n            );\n        } else {\n\n            return (\n                <React.Fragment>\n                  <th>{/* empty cell to align with parent input */}</th>\n                </React.Fragment>\n            );\n        }\n    }\n}\n\nfunction SuccinctBody(props) {\n    function remExample(deadExample) {\n        const deadIndex = props.examples.indexOf(deadExample);\n        // Formula -> Formula\n        // removes the output at deadIndex from the given formula and all of its children (if it has any) so stuff works\n        function removeOutputFromFormula(formula) {\n            let outputs = formula.outputs.filter((_, i) => i !== deadIndex);\n\n            if (isBooleanFormula(formula)) {\n                const thenChildren = formula.thenChildren.map(removeOutputFromFormula);\n                return {...formula,\n                        outputs,\n                        thenChildren};\n            } else {\n                return {...formula,\n                        outputs};\n            }\n        }\n\n\n        const aliveExamples = props.examples.filter((example) => example !== deadExample);\n        const alteredForms = props.formulas.map(removeOutputFromFormula);\n        props.examplesFormulasChange(aliveExamples, alteredForms);\n    }\n\n    function exampleChange(newExample, oldExample) {\n        const exists = props.examples.indexOf(oldExample) !== -1;\n\n        if (newExample === dryRun) {\n            return exists;\n        }\n\n        // Formula -> Formula\n        // adds an init output to the given formula and all of its children (if it has any) so stuff works\n        function addAnotherOutputToFormula(formula) {\n            let outputs = [...formula.outputs, yellow];\n\n            if (isBooleanFormula(formula)) {\n                const thenChildren = formula.thenChildren.map(addAnotherOutputToFormula);\n                return {...formula,\n                        outputs,\n                        thenChildren};\n            } else {\n                return {...formula,\n                        outputs};\n            }\n        }\n\n        let alteredExamples, alteredForms;\n        if (exists) {\n            alteredExamples = props.examples.map((example) => example === oldExample ? newExample : example);\n            alteredForms = props.formulas;\n        } else {\n            alteredExamples = [...props.examples, newExample];\n            alteredForms = props.formulas.map(addAnotherOutputToFormula);\n        }\n\n        props.examplesFormulasChange(alteredExamples, alteredForms);\n        return true; // this doesn't actually do anything\n    }\n\n    const reals = props.examples.map((example, i) => (\n          <tr key={example.key}>\n            <td>\n              <RemButton\n                onClick={() => remExample(example)}\n                title={'Remove this example'}\n              />\n            </td>\n            <Inputs\n              dummy={false}\n              inputs={example.inputs}\n              inputsChange={(inputs) => exampleChange({...example, inputs},\n                                                      example)}\n            />\n            <td>{/* empty cell to align with param dummy input */}</td>\n            <Outputs\n              dummy={false}\n              formulas={props.formulas}\n              want={example.want}\n              row={i}\n            />\n            <td>{/* empty cell to align with top level formula dummy input */}</td>\n            <Want\n              dummy={false}\n              want={example.want}\n              wantChange={(want) => exampleChange({...example, want},\n                                                  example)}\n            />\n          </tr>\n    ));\n    \n    const dummy = (\n          <tr key={peekKey(props.paramNames.length)}>\n            <td>{/* empty cell to offset rembutton */}</td>\n            <Inputs\n              dummy={true}\n              inputs={props.paramNames.map((_, i) => ({key: peekKey(i)}))}\n              inputsChange={(inputs) => exampleChange({inputs,\n                                                       want: yellow,\n                                                       key: takeKey()},\n                                                      {})}\n            />\n            <td>{/* empty cell to align with param dummy input */}</td>\n            <Outputs\n              dummy={true}\n              formulas={props.formulas}\n            />\n            <td>{/* empty cell to align with top level formula dummy input */}</td>\n            <Want\n              dummy={true}\n              wantChange={(want) => exampleChange({want,\n                                                   inputs: props.paramNames.map((_) => ({prog: yellow, key: takeKey()})),\n                                                   key: takeKey()},\n                                                  {})}\n            />\n          </tr>\n    );\n\n    return (\n        <tbody>\n          {[...reals, dummy]}\n        </tbody>\n    );\n}\n\nfunction Inputs(props) {\n    function validProg(text) {\n        try {\n            parseCheck(text);\n        } catch(e) {\n            return false;\n        }\n        return true;\n    }\n\n    function inputChange(newInput, oldInput) {\n        let alteredInputs;\n        if (props.dummy) {\n            alteredInputs = props.inputs.map((input) => input === oldInput ? {...newInput, key: takeKey()} : {prog: yellow, key: takeKey()});\n        } else {\n            alteredInputs = props.inputs.map((input) => input === oldInput ? newInput : input);\n        }\n        props.inputsChange(alteredInputs);\n    }\n\n    // this looks awful...\n    let inputFields = props.inputs.map((input, i) => {\n        let error = <div/>;\n        if (props.dummy) {\n            return (\n                <td key={input.key} >\n                  <div className='flex_vert'>\n                    <div className='flex_horiz'>\n                      <ValidatedArea\n                        dummy={props.dummy}\n                        placeholder={'Input'}\n                        isValid={validProg}\n                        onValid={(text) => inputChange({prog: parseCheck(text)},\n                                                       input)}\n                      />\n                    </div>\n                    {error}\n                  </div>\n                </td>\n            );\n\n        } else {\n            if (input.prog !== yellow) {\n                try {\n                    interp(input.prog, globalEnv);\n                } catch (e) {\n                    error = (\n                        <div>\n                          {e.message}\n                          <div title={\"Oh no! You got an error!\"} className=\"alert\">\n                            <Octicon\n                              icon={Alert} size=\"small\" verticalAlign=\"middle\"\n                              ariaLabel='Error!'/>\n                          </div>;\n                        </div>\n                    );\n                }\n            }\n\n            return (\n                <td key={input.key} >\n                  <div className='flex_vert'>\n                    <div className='flex_horiz'>\n                      <ValidatedArea\n                        dummy={props.dummy}\n                        placeholder={'Input'}\n                        isValid={validProg}\n                        onValid={(text) => inputChange({...input,\n                                                        prog: parseCheck(text)},\n                                                       input)}\n                        onEmpty={() => inputChange({...input,\n                                                    prog: yellow},\n                                                   input)}\n                      />\n                    </div>\n                    {error}\n                  </div>\n                </td>\n            );\n\n        }\n    });\n\n    return (\n        <React.Fragment>\n          {inputFields}\n        </React.Fragment>\n    );\n}\n\nfunction Outputs(props) {\n    function countWidth(formula) {\n        if (!isBooleanFormula(formula)) {\n            return 1;\n        } else {\n            return formula.thenChildren.reduce((acc, child) => acc + countWidth(child), 2);\n        }\n    }\n\n    if (props.dummy) {\n        return (\n            <React.Fragment>\n            {props.formulas.map((formula) => (\n                <td key={formula.key} colSpan={countWidth(formula)}>{/* empty cell */}</td>\n            ))}\n            </React.Fragment>\n        );\n    } else {\n        return (\n            <React.Fragment>\n              {props.formulas.map((formula) => (\n                  <React.Fragment key={formula.key}>\n                    <TestCell\n                      output={formula.outputs[props.row]}\n                      want={props.want}\n                    />\n                    {isBooleanFormula(formula) ?\n                     <React.Fragment>\n                       <Outputs\n                         formulas={formula.thenChildren}\n                         want={props.want}\n                         row={props.row}\n                       />\n                       <DummyCell\n                         parentOutput={formula.outputs[props.row]}\n                       />\n                     </React.Fragment>\n                     : <script/> }\n                  </React.Fragment>\n              ))}\n            </React.Fragment>\n        );\n    }\n}\n\nfunction TestCell(props) {\n\n    if (props.output === gray) {\n        return (\n            <td className={'gray'}>\n            </td>\n        );\n    }\n\n    if (props.output === pink) {\n        return (\n            <td className={'pink'}>\n            </td>\n        );\n    }\n\n    if (props.output === yellow) {\n        return (\n            <td className={'yellow'}>\n            </td>\n        );\n    }\n\n    let output = props.output;\n    let want = yellow;\n\n    if (props.want !== yellow) {\n        try {\n            want = interp(props.want, globalEnv);\n        } catch (e) {\n            want = yellow;\n        }\n    }\n\n    let text, error;\n    if (output instanceof Error) {\n        text = output.message;\n        error = true;\n    } else {\n        text = unparse(output);\n        error = false;\n    }\n\n    let face;\n    if (error) {\n        face = <div title={\"Oh no! You got an error!\"} className=\"alert\">\n                 <Octicon\n                  icon={Alert} size=\"small\" verticalAlign=\"middle\"\n                  ariaLabel='Error!'/>\n               </div>;\n    }else if (want === yellow) { // I should make this better\n        face = '';\n    } else if (deepEquals(output, want)) {\n        face = <div title={\"Yay! It's right!\"} className=\"check\">\n                 <Octicon\n                  icon={Check} size=\"small\" verticalAlign=\"middle\"\n                  ariaLabel='Yay!'/>\n               </div>;\n    } else {\n        face = '';\n    }\n\n    return (\n        <td className={'output'}>\n          {text}\n          {face}\n        </td>\n    );\n}\n\nfunction DummyCell (props) {\n    if (props.parentOutput === gray || props.parentOutput.value === false) {\n        return (\n            <td className={'gray'}>\n            </td>\n        );\n    } else if (props.parentOutput === pink || !isRBOOL(props.parentOutput)) {\n        return (\n            <td className={'pink'}>\n            </td>\n        );\n    } else {\n        return <td></td>;\n    }\n}\n\nfunction Want(props) {\n    function validProg(text) {\n        try {\n            parseCheck(text);\n        } catch(e) {\n            return false;\n        }\n        return true;\n    }\n\n    let valueCell;\n    if (props.dummy || props.want === yellow) {\n        valueCell = <script/>;\n    } else {\n        try {\n            let evalWant = interp(props.want, globalEnv);\n            if (deepEquals(evalWant, props.want)) {\n                valueCell = <script/>;\n            } else {\n                valueCell = <td className='output'>{unparse(evalWant)}</td>;\n            }\n        } catch (e) {\n            valueCell = (\n                <td className='output'>\n                  {e.message}\n                  <div title={\"Oh no! You got an error!\"} className=\"alert\">\n                    <Octicon\n                      icon={Alert} size=\"small\" verticalAlign=\"middle\"\n                      ariaLabel='Error!'/>\n                  </div>;\n                </td>\n            );\n        }\n    }\n\n    return (\n        <React.Fragment>\n          <td>\n            <div className='flex_horiz'>\n              <ValidatedArea\n                dummy={props.dummy}\n                placeholder={'Want'}\n                isValid={validProg}\n                onValid={(text) => props.wantChange(parseCheck(text))}\n                onEmpty={() => props.wantChange(yellow)}\n              />\n            </div>\n          </td>\n          {valueCell}\n        </React.Fragment>\n    );\n}\n\n/*\n  notes:\n  #inputs === #params\n  #outputs === #examples\n  ---------------------\n  |#inputs !== #outputs| (well it can but not always)\n  ---------------------\n*/\nclass App extends React.Component {\n    constructor(props){\n        super(props);\n        let tables = [{examples: [{inputs: [{prog: yellow, key: takeKey()}], want: yellow, key: takeKey()}],\n                       formulas: [{prog: yellow, outputs: [yellow], key: takeKey()}],\n                       params: [{name: yellow, key: takeKey()}],\n                       name: yellow,\n                       signature: yellow,\n                       purpose: yellow,\n                       key: takeKey()}];\n        let snapshots = [tables];\n        this.state = {tables, snapshots};\n\n        this.programChange = this.programChange.bind(this);\n    }\n\n    calculate(program) {\n        function makeLookup(table) {\n            function lookup(args) {\n                if (args.length !== table.params.length) {\n                    throw new Error('Arity Mismatch, expected ' + table.params.length + ' argument' + (table.params.length === 1 ? '' : 's'));\n                }\n\n                let expr = table.examples.reduce((acc, example) => {\n                    if (acc !== undefined) {\n                        return acc;\n                    }\n\n                    // I have no idea what should happen if this is called on a table with no params\n                    if (example.inputs.every((input, i) => {\n                        if (input.prog === yellow) {\n                            return false;\n                        }\n                        let bool;\n                        try {\n                            bool = deepEquals(interp(input.prog, globalEnv), args[i]);\n                        } catch (e) {\n                            bool = false;\n                        }\n                        return bool;\n                    })) {\n                        if (example.want === yellow) {\n                            throw new ReferenceError(`(${table.name} ${args.map(toString).join(' ')}) doesn't have a want`);\n                        } else {\n                            // Note: don't need to catch exception here because it will be caught in calcFormula\n                            return interp(example.want, globalEnv);\n                        }\n                    }\n\n                    return undefined;\n                }, undefined);\n\n                if (expr === undefined) {\n                    // it's like a reference error in the super meta table language\n                    throw new ReferenceError(args.map(toString).join() + ' is not an example in ' + table.name);\n                }\n\n                return expr;\n            }\n\n            return lookup;\n        }\n\n        let lookups = program.map((table) => ({name: table.name, binding: {value: makeLookup(table), type: RFUNCT_T}}));\n        let tableEnv = [...globalEnv, ...lookups];\n\n        function calcTable(table) {\n            function calcFormula(formula, examples) {\n                let outputs = examples.map((example) => {\n\n                    if (example === gray) {\n                        return gray;\n                    } if (example === pink) {\n                        return pink;\n                    } else if (!example.inputs.every((input) => input.prog !== yellow) || formula.prog === yellow) {\n                        // if any of the inputs or the formula isn't initialized, return yellow\n                        return yellow;\n                    }\n\n                    let error = false;\n                    try {\n                        example.inputs.map((input) => interp(input.prog, tableEnv));\n                    } catch (e) {\n                        error = true;\n                    }\n\n                    if (example === pink || error) {\n                        return pink;\n                    }\n\n                    let localEnv = table.params.map((param, i) => ({name: param.name, binding: interp(example.inputs[i].prog, tableEnv)}));\n                    let env = [...tableEnv, ...localEnv];\n\n                    let output;\n                    try {\n                        output = interp(formula.prog, env);\n                    } catch (e) {\n                        output = e;\n                    }\n\n                    return output;\n                });\n\n                if (allBools(outputs) || (formula.thenChildren !== undefined && formula.thenChildren.length !== 0)) {\n                    function maybeSpecial(example, output) {\n                        if (example === gray || output.value === false)\n                            return gray;\n                        else if (typeof output.value !== 'boolean')\n                            return pink;\n                        else\n                            return example;\n                    }\n\n                    if (formula.thenChildren === undefined) {\n                        var thenChildren = [];\n                    } else {\n                        let subExamples = examples.map((example, i) => maybeSpecial(example, outputs[i]));\n                        thenChildren = formula.thenChildren.map((formula) => calcFormula(formula, subExamples));\n                    }\n\n                    return {...formula,\n                            outputs,\n                            thenChildren};\n                } else {\n                    let newFormula = {...formula,\n                                      outputs};\n                    delete newFormula.thenChildren;\n                    return newFormula;\n                }\n            }\n\n            if (table.name === yellow || !table.params.every((param) => param.name !== yellow)) {\n                // if the table or any of the table's parameters don't have a name yet, freeze outputs\n                return {...table}; \n            } else {\n                let formulas = table.formulas.map((formula) => calcFormula(formula, table.examples));\n                return {...table,\n                        formulas};\n            }\n        }\n\n        return program.map(calcTable);\n    }\n\n    // React people say that this is unsafe (https://reactjs.org/docs/react-component.html#unsafe_componentwillupdate)\n    // but it sends the ith list of snapshots to the server whereas the safe componentDidUpdate sends the i-1th\n    componentWillUpdate(_, nextState) {\n        // He's always watching...\n        tellBigBrother(JSON.stringify(nextState.snapshots));\n    }\n\n    programChange(newProg) {\n        let calkedProg = this.calculate(newProg);\n        //console.log(calkedProg);\n        //console.log('next key: ', peekKey());\n        this.setState((state) => {\n            return {tables: calkedProg,\n                    snapshots: [...state.snapshots, calkedProg]};\n        });\n    }\n\n    render(){\n        let bslField;\n        if (showBSL) {\n            bslField = (\n                <textarea\n                  className='bsl_field'\n                  rows={20}\n                  cols={70}\n                  readOnly={true}\n                  value={toBSL(this.state.tables, toString, 70, 70)}\n                />\n            );\n        } else {\n            bslField = (\n                <textarea\n                  className='bsl_field'\n                  rows={20}\n                  cols={70}\n                  readOnly={true}\n                  value={''}\n                />\n            );\n        }\n\n        return (\n            <div>\n              <Succinct\n                tables={this.state.tables}\n                programChange={this.programChange}\n              />\n              <div className='language_select'>\n                <select\n                  defaultValue='cons'\n                  onChange={(e) => {\n                      if (e.target.value === 'cons'){\n                          toString = toString_cons;\n                          unparse = unparse_cons;\n                      } else {\n                          toString = toString_list;\n                          unparse = unparse_list;\n                      }\n                      // this just rerenders everything, the state remains unchanged\n                      this.setState((state) => state);\n                  }}\n                >\n                  <option value='cons'>Beginning Student</option>\n                  <option value='list'>Beginning Student with List Abbreviations</option>\n                </select>\n              </div>\n              <div className='bsl_io'>\n                <div className='bsl_checkbox'>\n                  <input\n                    type='checkbox'\n                    id='bsl_output'\n                    name='bsl_output'\n                    onChange={(e) => {\n                        showBSL = !showBSL;\n                        // same here, state remains unchanged but everything is rerendered\n                        this.setState((state) => state);\n                    }}\n                  />\n                  <label htmlFor='bsl_output'>Show BSL Output</label>\n                </div>\n                {bslField}\n              </div>\n              <div>\n                {/*TODO: all this is pretty jank, make it less jank*/}\n                <textarea\n                  className='bsl_field'\n                  rows={20}\n                  cols={70}\n                  spellCheck={false}\n                  onChange={(e) => {\n                      let text = e.target.value;\n                      let progs;\n                      try {\n                          progs = parsePrefix(text);\n                      } catch (e) {\n                          return;\n                      }\n                    \n                      // update the global environment\n                      globalEnv = interpPrefix(progs, initEnv);\n\n                      // recalculate the tables\n                      this.programChange(this.state.tables);\n                  }}\n                />\n                {/* <button */}\n                {/*   onClick={() => console.log('I dunno lol')} */}\n                {/* > */}\n                {/*   Check If Stuff Sent! */}\n                {/* </button> */}\n              </div>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}